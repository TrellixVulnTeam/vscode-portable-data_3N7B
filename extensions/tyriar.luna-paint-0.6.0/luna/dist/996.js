const a8_0x3334=["requestRender","onRequestRender","width"," v-","strokeWidth","M0.5 0.5 h","drawCircle","left","imageService","3yAeIZi","value","bottom","257924CturTp","stroke","Brush Size","onUpdate","_value","absolute","register","floor","_model","top","pointerMove","render","http://www.w3.org/2000/svg","pointerDown","none","_setPixel","min","type","_edit","height","linearDodgeAdd","replace","M1.5 1.5 h","_sc","400613brqkeL","_svg","1753Ttyprq","normal","multiply","range","screen","_drawLine","currentLayer","setAttribute","_lastCoord","selectionService","options","createElementNS","exclusion","setValueFromHistoryChange","position"," h-","_svgInnerPath","eraser","986RWIFjT","461604QCIciB","darken","difference","svg","softLight","style","append","zoom","removeChild","208pTSxGs","event","_getEdit","name","pointerDownMove","pointerUp","10322ffHfXj","containsCoord","Could not create extended edit","abs","_container","_outlineModel","_onRequestRender","Blend Mode","1HAhZHP","display","createDomRenderProgram","viewportService","_brushSizeOption","_onUpdate","ceil","block","push","1.1","commit","_viewportService","258707gvfIgo","_imageService","path","onHistoryUpdateValue","overlay","_onHistoryUpdateValue","version","fire","#000","getCoordsFromEvent","webpackChunkluna","Eraser","9HaSHaA","round","toString","right","_svgPath","lighten","order","_updateOutline"],a8_0xd89c=function(t,s){return a8_0x3334[t-=320]},a8_0xf8ec27=a8_0xd89c;(function(t,s){const e=a8_0xd89c;for(;;)try{if(235363===-parseInt(e(402))+parseInt(e(357))+-parseInt(e(337))*-parseInt(e(383))+-parseInt(e(425))*-parseInt(e(325))+parseInt(e(381))+-parseInt(e(354))*parseInt(e(417))+parseInt(e(401))*-parseInt(e(411)))break;t.push(t.shift())}catch(s){t.push(t.shift())}})(a8_0x3334),(self[a8_0xf8ec27(335)]=self[a8_0xf8ec27(335)]||[])[a8_0xf8ec27(321)]([[996],{3315:(t,s,e)=>{"use strict";const i=a8_0xf8ec27;e.d(s,{d:()=>o});var n=e(5120),r=e(1674);class o extends n.JT{constructor(t,s,e,i){const n=a8_0xd89c;super(),this._container=t,this[n(326)]=s,this[n(324)]=e,this[n(365)]=i,this[n(343)]=2,this[n(382)]=document.createElementNS(r.q,n(405)),this[n(382)].setAttribute(n(331),n(322)),this[n(382)][n(407)][n(397)]=n(362),this._svgInnerPath=document[n(394)](r.q,"path"),this[n(399)][n(407)][n(358)]="#fff",this[n(399)][n(407)][n(349)]="1",this[n(399)][n(407)].fill=n(371),this[n(341)]=document[n(394)](r.q,n(327)),this[n(341)][n(407)].stroke=n(333),this[n(341)][n(407)][n(349)]="1",this[n(341)][n(407)].fill=n(371),this[n(382)][n(408)](this[n(341)],this[n(399)]),this[n(421)].appendChild(this[n(382)]),this[n(363)]({dispose:()=>this[n(421)][n(410)](this._svg)})}[i(368)](){const t=i,s=this[t(365)][t(386)],e=this[t(324)];if(!s||e[t(409)]<4)return void(this[t(382)][t(407)].display=t(371));this[t(382)][t(407)][t(426)]=t(320);const n=this._imageService[t(389)];if(!n)return;const r=Math.round(this._container.clientWidth/2)-n[t(347)]/2*e.zoom+e.x*e.zoom,o=Math[t(338)](this[t(421)].clientHeight/2)-n[t(376)]/2*e.zoom+e.y*e.zoom,h=(s[t(340)]-s[t(352)])*e.zoom,a=(s[t(356)]-s[t(366)])*e.zoom;this[t(382)].style[t(352)]=r+s[t(352)]*e[t(409)]-2+"px",this._svg[t(407)][t(366)]=o+s[t(366)]*e[t(409)]-2+"px",this._svg[t(390)](t(347),(h+5)[t(339)]()),this[t(382)].setAttribute("height",(a+5)[t(339)]()),this[t(399)].setAttribute("d",t(379)+(h+2)+" v"+(a+2)+t(398)+(h+2)+t(348)+(a+2)),this._svgPath[t(390)]("d",t(350)+(h+4)+" v"+(a+4)+t(398)+(h+4)+t(348)+(a+4))}}},9904:(t,s,e)=>{"use strict";const i=a8_0xf8ec27;e.d(s,{rP:()=>o,bG:()=>h,Jp:()=>a,qv:()=>c});var n=e(1815),r=e(5120);class o extends r.JT{constructor(t,s,e){const i=a8_0xd89c;super(),this[i(414)]=t,this.options=s,this._value=e,this[i(374)]="string",this[i(330)]=this[i(363)](new n.v),this[i(328)]=this._onHistoryUpdateValue.event,this[i(430)]=this[i(363)](new n.v),this[i(360)]=this._onUpdate[i(412)]}get[i(355)](){return this[i(361)]}set[i(355)](t){const s=i;this._value=t,this[s(430)][s(332)]()}[i(396)](t){const s=i;this[s(361)]=t,this[s(330)][s(332)](t)}}class h extends o{constructor(){const t=i;super(t(424),["normal",t(403),"multiply","linearBurn","lighten","screen",t(377),t(329),t(406),t(404),t(395)],t(384))}}class a extends o{constructor(){const t=i;super(t(424),[t(384),t(378),t(403),t(385),"linearBurn",t(342),t(387),t(377),t(329),"softLight",t(404),t(395)],t(384))}}class c extends r.JT{constructor(t,s,e,r){const o=i;super(),this[o(414)]=t,this[o(361)]=s,this[o(373)]=e,this.max=r,this.type="number",this[o(330)]=this[o(363)](new n.v),this[o(328)]=this[o(330)].event,this[o(430)]=this[o(363)](new n.v),this.onUpdate=this._onUpdate[o(412)]}get[i(355)](){return this._value}set[i(355)](t){const s=i;this._value=t,this._onUpdate[s(332)]()}[i(396)](t){const s=i;this[s(361)]=t,this[s(330)].fire(t)}}},2996:(t,s,e)=>{"use strict";const i=a8_0xf8ec27;e.r(s),e.d(s,{default:()=>u});var n=e(1815),r=e(5120),o=e(3315),h=e(9904),a=e(704);const c=new Float32Array([0,0,0,0]);class d extends r.JT{constructor(t){const s=a8_0xd89c;super(),this[s(380)]=t,this.id=s(400),this._brushSizeOption=new h.qv(s(359),1,1,1e3),this[s(393)]=[this[s(429)]],this[s(422)]={range:void 0},this[s(423)]=this[s(363)](new n.v),this[s(346)]=this[s(423)][s(412)]}[i(427)](t){const s=i;return new o.d(t,this[s(380)][s(353)],this[s(380)].viewportService,this[s(422)])}[i(370)](t){const s=i,e=this[s(380)][s(353)];if(!e[s(389)])return;const n=this[s(380)][s(428)].getCoordsFromEvent(t);if(n){if(e[s(418)](n[0],n[1])){const t=this[s(413)]();this[s(372)](this[s(413)](),n[0],n[1],this[s(429)][s(355)],c),t[s(345)]()}this[s(391)]=n}}[i(367)](t){const s=i;if(!this[s(380)][s(353)][s(389)])return;const e=this[s(380)][s(428)][s(334)](t);this[s(344)](e)}[i(344)](t){const s=i;if(this[s(380)][s(353)][s(389)]&&(this[s(422)][s(386)]?.[s(352)]!==t[0]||this[s(422)].range?.top!==t[1])){if(this[s(380)][s(353)][s(418)](t[0],t[1])){const e=(this[s(429)].value-1)/2;this[s(422)][s(386)]={left:t[0]-Math[s(364)](e),top:t[1]-Math[s(364)](e),right:t[0]+Math[s(431)](e)+1,bottom:t[1]+Math[s(431)](e)+1}}else this[s(422)][s(386)]=void 0;this[s(423)][s(332)]()}}[i(415)](t){const s=i;if(!this[s(391)])return;const e=this[s(380)][s(353)];if(!e[s(389)])return;const n=this[s(380)][s(428)][s(334)](t);(e[s(418)](n[0],n[1])||e[s(418)](this[s(391)][0],this[s(391)][1]))&&this[s(388)](this[s(391)],n,c),this[s(391)]=n}async[i(416)](){const t=i;this[t(380)][t(353)].currentLayer&&(this[t(375)]?.[t(323)](t(336)),this[t(375)]=void 0),this[t(391)]=void 0}[i(388)](t,s,e){const n=i,r=this[n(413)]();(0,a.g)(e,t[0],t[1],s[0],s[1],((t,s,e)=>this[n(372)](r,t,s,this._brushSizeOption[n(355)],e))),r[n(345)]()}[i(413)](){const t=i;if(!this._edit&&(this._edit=this[t(380)][t(353)].currentLayer?.createExtendedEdit(),!this._edit))throw new Error(t(419));return this[t(375)]}[i(372)](t,s,e,n,r){const o=i;this[o(380)][o(392)][o(418)](s,e)&&this[o(380)][o(353)][o(418)](s,e)&&t[o(351)](s,e,n,!0,r)}}const u=d},704:(t,s,e)=>{"use strict";function i(t,s,e,i,o,h){const a=a8_0xd89c;Math.abs(o-e)<Math[a(420)](i-s)?s>i?n(t,i,o,s,e,h):n(t,s,e,i,o,h):e>o?r(t,i,o,s,e,h):r(t,s,e,i,o,h)}function n(t,s,e,i,n,r){const o=i-s;let h=n-e,a=1;h<0&&(a=-1,h=-h);let c=2*h-o,d=e;for(let e=s;e<=i;e++)r(e,d,t),c>0?(d+=a,c+=2*(h-o)):c+=2*h}function r(t,s,e,i,n,r){let o=i-s;const h=n-e;let a=1;o<0&&(a=-1,o=-o);let c=2*o-h,d=s;for(let s=e;s<=n;s++)r(d,s,t),c>0?(d+=a,c+=2*(o-h)):c+=2*o}e.d(s,{g:()=>i})},1674:(t,s,e)=>{"use strict";const i=a8_0xf8ec27;e.d(s,{q:()=>n});const n=i(369)}}]);