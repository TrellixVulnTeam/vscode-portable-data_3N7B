const a7_0x11a4=["selectionService","4EvXUFk","shiftKey","_sc","isSelectionTool","pointerUp","pointerDownMove","commit","taskService","454334ybSQDK","imageService","layer/cropToSelection","Rectangle Selection","offsetX","68491pwYzfg","abs","height","408920EnkRhd","65139wYSjhj","_pointerDownX","_originY","229837fhhkbq","_originX","createCompositeEntry","_pointerDownStartTime","right","7tCpUzW","_targetY","getCoordsFromEvent","push","validate","sign","webpackChunkluna","_updateSelection","bottom","83549KLPLSs","offsetY","_isPointerDown","keyUp","_targetX","width","4QqusDt","_pointerDownY","left","range","viewportService","top","crop","Deselect","550684HtafRG","2SbPghP","3wPnamk"],a7_0x1260=function(t,i){return a7_0x11a4[t-=198]},a7_0x2f406f=a7_0x1260;(function(t,i){const s=a7_0x1260;for(;;)try{if(321764==parseInt(s(207))*-parseInt(s(244))-parseInt(s(210))-parseInt(s(242))+-parseInt(s(228))*parseInt(s(234))+-parseInt(s(219))*parseInt(s(211))+-parseInt(s(214))*-parseInt(s(243))+parseInt(s(246))*parseInt(s(202)))break;t.push(t.shift())}catch(i){t.push(t.shift())}})(a7_0x11a4),(self[a7_0x2f406f(225)]=self[a7_0x2f406f(225)]||[])[a7_0x2f406f(222)]([[976],{3976:(t,i,s)=>{"use strict";const e=a7_0x2f406f;s.r(i),s.d(i,{default:()=>a});var o=s(5120),n=s(2939),h=s(1003);class r extends o.JT{constructor(t){const i=a7_0x1260;super(),this[i(248)]=t,this.id=i(240),this[i(249)]=!0,this._originX=0,this._originY=0,this[i(217)]=0,this[i(212)]=0,this[i(235)]=0}keyDown(t,i){const s=a7_0x1260;this[s(230)]=i,this[s(226)](t)}[e(231)](t,i){this[e(230)]=i,this._updateSelection(t)}pointerDown(t){const i=e;this._isPointerDown=!0,this._pointerDownStartTime=Date.now(),this[i(212)]=t[i(206)],this[i(235)]=t[i(229)],(this[i(248)].selectionService[i(237)]||void 0!==this[i(232)]||void 0!==this[i(220)])&&(this[i(232)]=void 0,this._targetY=void 0,this[i(248)][i(245)][i(237)]=void 0),[this._originX,this[i(213)]]=this[i(248)].viewportService[i(221)](t)}async[e(198)](t){const i=e;if(this[i(230)]=!1,void 0===this[i(232)]||void 0===this[i(220)]){this[i(248)][i(245)].range=void 0;const t=void 0===this[i(248)][i(245)][i(237)]?i(241):i(205);return void this._sc[i(245)][i(200)](t)}const s=Math[i(208)](this._pointerDownX-t[i(206)]),o=Math[i(208)](this._pointerDownY-t[i(229)]);s<10&&o<10&&Date.now()-this._pointerDownStartTime<75?this[i(248)][i(245)][i(237)]=void 0:(this[i(226)](t),this._sc.historyService[i(216)]("Crop",(async()=>{const t=i;await this[t(248)][t(201)].executeOnAllLayers(t(204),{selection:this[t(248)][t(245)][t(237)]}),this[t(248)][t(238)].fitToWindow()})))}[e(199)](t){const i=e;[this[i(232)],this[i(220)]]=this._sc.viewportService[i(221)](t),this[i(226)](t)}_updateSelection(t){const i=e;if(!this[i(230)]||void 0===this._targetX||void 0===this._targetY)return;let s=this[i(232)]-this[i(215)],o=this[i(220)]-this[i(213)];t[i(247)]&&(Math[i(208)](s)>Math.abs(o)?s=o*(Math.sign(s)!==Math.sign(o)?-1:1):o=s*(Math.sign(s)!==Math[i(224)](o)?-1:1));const r=this[i(248)][i(203)][i(233)],a=this[i(248)][i(203)][i(209)],c=(0,h.Pq)();o<0?(c[i(239)]=(0,n.u)(this[i(213)]+o,a),c.bottom=(0,n.u)(this[i(213)]+1,a)):(c[i(227)]=(0,n.u)(this[i(213)]+o+1,a),c[i(239)]=(0,n.u)(this[i(213)],a)),s<0?(c[i(236)]=(0,n.u)(this[i(215)]+s,r),c.right=(0,n.u)(this[i(215)]+1,r)):(c[i(218)]=(0,n.u)(this[i(215)]+s+1,r),c[i(236)]=(0,n.u)(this[i(215)],r)),this[i(248)].selectionService[i(237)]=c,this[i(248)][i(245)][i(223)](r,a)}}const a=r}}]);