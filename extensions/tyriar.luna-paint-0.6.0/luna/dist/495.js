const a18_0x2a84=["webpackChunkluna","floor","width","setUint32"," color count"," bitness, falling back to 32-bit","No support for writing icos with ","arrayBuffer","bitmapWidth","4369chTDqh","size","1402lYXcml","importantColorCount","paletteColorCount","from","Writing only 32, 24, 8, 4 and 1-bit bmps is supported currently","-bit image contains more colors than bits per pixel allows, increasing to 24-bit","map","setUint16","warn","undefined","Unexpected bits per pixel "," with ","300iEHqZJ","437LzsMFH","1312581LtBDTb","buffer","push","toRGBA","colors","bitsPerPixel","error","table","slice","mimeType","Cannot write an .ico with 0 images","canvas","267tQpCXY","223QoNvaa","subarray","image/png","-bit image contains alpha channel, increasing to 32-bit","includes","Cannot encode .ico png images without browser yet","height","OffscreenCanvas","1051mtggeA","verticalResolution","horizontalResolution","createElement","split","reduce","data","toBGRA","get","145718fYfGZw","colorPlaneCount","bitness","pow","bitmapHeight","all","Color Table","set","3601pddlbN","getContext","putImageData","imageSize","entries","Failed to encode canvas to png","4733lPsYBw","length","toBlob","setUint8","6829XtRjBf"],a18_0x598a=function(t,e){return a18_0x2a84[t-=278]},a18_0x206f71=a18_0x598a;(function(t,e){const n=a18_0x598a;for(;;)try{if(816720===parseInt(n(281))*parseInt(n(320))+-parseInt(n(342))*-parseInt(n(303))+parseInt(n(312))+-parseInt(n(295))*-parseInt(n(330))+-parseInt(n(282))+parseInt(n(294))*-parseInt(n(340))+parseInt(n(326))*-parseInt(n(280)))break;t.push(t.shift())}catch(e){t.push(t.shift())}})(a18_0x2a84),(self[a18_0x206f71(331)]=self[a18_0x206f71(331)]||[]).push([[495],{9094:(t,e,n)=>{"use strict";var a,o;n.d(e,{P:()=>a,V:()=>o}),(a||(a={}))[a18_0x598a(285)]=function(t,e){let n=0;const a=4*e;for(let e=0;e<a;e+=4)n=t[e],t[e]=t[e+2],t[e+2]=n},(o||(o={}))[a18_0x598a(310)]=function(t,e){return a[a18_0x598a(285)](t,e)}},4085:(t,e,n)=>{"use strict";function a(t,e){return Math.ceil(t/e)*e}n.d(e,{g:()=>a})},7495:(t,e,n)=>{"use strict";n.r(e),n.d(e,{writeIco:()=>c,writeIcoEntries:()=>u,writeIcoHeader:()=>l,writeIcoImageData:()=>p});var a=n(9094),o=n(4085);function r(t,e,n){const a=a18_0x598a,r=(0,o.g)(t[a(339)]*t[a(287)],32)/8,i=new Uint8Array(e[a(301)]*r);if(0===n[a(341)])return i;let s=0,c=0,l=0;for(let o=0;o<t.bitmapHeight;o++){const u=o*r;for(let r=0;r<t.bitmapWidth;r++){s=4*((e[a(301)]-o-1)*e[a(333)]+r);const p=e[a(309)][s]+","+e[a(309)][s+1]+","+e.data[s+2]+","+e[a(309)][s+3];switch(t[a(287)]){case 1:c=u+Math.floor(r/8),l=7-r%8;break;case 4:c=u+Math[a(332)](r/2),l=r%2==0?4:0;break;case 8:c=u+r;break;default:throw new Error(a(278)+t.bitsPerPixel)}i[c]|=(n[a(311)](p)||0)<<l}}return i}function i(t){const e=a18_0x598a,n=t.reduce(((t,n)=>t+n[e(327)]),0),a=new Uint8Array(n);let o=0;for(const n of t)a.set(n,o),o+=n[e(327)];return a}const s=[1,4,8,16,24,32];async function c(t){const e=a18_0x598a,n=l(t[e(327)]),a=t[e(348)]((t=>p(t))),o=await Promise[e(317)](a),r=u(t,o[e(348)]((t=>t[e(344)])),o[e(348)]((t=>t[e(287)])));let s=n[e(327)]+r[e(308)](((t,n)=>t+n[e(327)]),0);for(const[t,n]of r[e(324)]()){const a=new DataView(n[e(283)]);a[e(334)](8,o[t][e(309)][e(327)],!0),a[e(334)](12,s,!0),s+=o[t][e(309)][e(327)]}return i([n,...r,...o[e(348)]((t=>t[e(309)]))])}function l(t){const e=a18_0x598a;if(0===t)throw new Error(e(292));const n=new Uint8Array(6),a=new DataView(n[e(283)]);return a[e(349)](2,1,!0),a[e(349)](4,t,!0),n}function u(t,e,n){const a=a18_0x598a,o=[];for(let r=0;r<t[a(327)];r++){const i=t[r],s=new Uint8Array(16),c=new DataView(s[a(283)]);c[a(329)](0,i[a(333)]>255?0:i[a(333)]),c[a(329)](1,i.height>255?0:i[a(301)]),c[a(329)](2,e[r]||0),c.setUint8(4,1),c.setUint16(6,n[r],!0),o[a(284)](s)}return o}async function p(t){const e=a18_0x598a;return t[e(291)]&&t[e(291)]!==e(297)?function(t){const e=a18_0x598a;let n=t[e(314)]<=24?function(t){const e=a18_0x598a,n=new Map;let a=!1,o=0;for(let r=0;r<t[e(301)];r++)for(let i=0;i<t.width;i++){const s=4*(r*t[e(333)]+i);if(o=t[e(309)][s+3],0===o)continue;255!==o&&(a=!0);const c=t[e(309)][s]+","+t[e(309)][s+1]+","+t.data[s+2]+","+o;!n.has(c)&&n[e(319)](c,n[e(341)])}return{colors:n,usesAlphaChannel:a}}(t):void 0;n&&(t.bitness<24&&n[e(286)][e(341)]>Math[e(315)](2,t[e(314)])&&(console[e(350)](t.bitness+e(347)),t[e(314)]=24),n.usesAlphaChannel&&(console.warn(t[e(314)]+e(298)),t[e(314)]=32),t.bitness>=24&&(n=void 0));let o=t[e(314)];!s[e(299)](t.bitness)&&(console.warn(e(337)+t[e(314)]+e(336)),o=32);const c={type:1,headerSize:40,bitmapWidth:t[e(333)],bitmapHeight:t.height,colorPlaneCount:1,bitsPerPixel:o,compression:0,imageSize:0,horizontalResolution:0,verticalResolution:0,paletteColorCount:0,importantColorCount:0},l=n?function(t,e,n){const a=a18_0x598a;if(e[a(341)]>Math[a(315)](2,t[a(287)]))throw console[a(288)](a(318),Array[a(345)](e.keys())),new Error("Cannot write bmp with bits per pixel "+t.bitsPerPixel+a(279)+e[a(341)]+a(335));const o=new Uint8Array(4*e.size);for(const[t,n]of e[a(324)]()){const[e,r,i,s]=t[a(307)](",")[a(348)]((t=>parseInt(t)));o[4*n]=i,o[4*n+1]=r,o[4*n+2]=e}return"paletteColorCount"in t&&(t.paletteColorCount=e[a(341)]),{data:o,table:e}}(c,n.colors):void 0,u=function(t,e,n){const o=a18_0x598a;switch(t[o(287)]){case 1:case 4:case 8:if(!n)throw new Error("Cannot write 1, 4 or 8-bit bmps without color table");return r(t,e,n[o(289)]);case 24:return function(t,e){const n=a18_0x598a,a=3*e[n(333)],o=new Uint8Array(a*e[n(301)]);let r=0;for(let i=0;i<t[n(316)];i++){const s=i*a;for(let a=0;a<t.bitmapWidth;a++)r=4*((e[n(301)]-i-1)*e.width+a),o[s+3*a]=e[n(309)][r+2],o[s+3*a+1]=e[n(309)][r+1],o[s+3*a+2]=e[n(309)][r]}return o}(t,e);case 32:return function(t,e){const n=a18_0x598a,o=e[n(309)][n(290)]();a.V[n(310)](o,t[n(339)]*t.bitmapHeight);const r=new Uint8Array(o),i=4*t.bitmapWidth;let s=0;for(let e=0;e<t[n(316)];e++)s=t[n(316)]-(e+1),r[n(319)](o[n(296)](s*i,(s+1)*i),e*i);return r}(t,e);default:throw new Error(o(346))}}(c,t,l),p=r({type:1,headerSize:40,bitmapWidth:t.width,bitmapHeight:t.height,colorPlaneCount:1,bitsPerPixel:1,compression:0,imageSize:0,horizontalResolution:0,verticalResolution:0,paletteColorCount:0,importantColorCount:0},t,function(t){const e=a18_0x598a,n=new Map;for(let a=0;a<t[e(301)];a++)for(let o=0;o<t[e(333)];o++){const r=4*(a*t[e(333)]+o),i=t[e(309)][r]+","+t.data[r+1]+","+t[e(309)][r+2]+","+t[e(309)][r+3];255===t[e(309)][r+3]?n[e(319)](i,0):n.set(i,1)}return n}(t));return{data:i([(w={...c,bitmapHeight:2*t[e(301)],imageSize:u[e(327)]+p.length},function(t){const e=a18_0x598a,n=new Uint8Array(40),a=new DataView(n[e(283)]);return a.setUint32(0,t.headerSize,!0),a[e(334)](4,t.bitmapWidth,!0),a[e(334)](8,t[e(316)],!0),a[e(349)](12,t[e(313)],!0),a[e(349)](14,t[e(287)],!0),a[e(349)](16,t.compression,!0),a[e(349)](20,t[e(323)],!0),a[e(349)](24,t[e(305)],!0),a[e(349)](28,t[e(304)],!0),a.setUint16(32,t[e(344)],!0),a[e(349)](36,t[e(343)],!0),n}(w)),l?l[e(309)]:new Uint8Array(0),u,p]),paletteColorCount:c.paletteColorCount,bitsPerPixel:o};var w}(t):async function(t){const e=a18_0x598a;if(typeof navigator===e(351))throw new Error(e(300));let n;e(302)in window?n=new OffscreenCanvas(t[e(333)],t[e(301)]):(n=document[e(306)](e(293)),n[e(333)]=t[e(333)],n[e(301)]=t[e(301)]),n[e(321)]("2d")[e(322)](new ImageData(new Uint8ClampedArray(t[e(309)]),t.width,t[e(301)]),0,0);const a="toBlob"in n?await new Promise((t=>n[e(328)](t,e(297)))):await n.convertToBlob({type:e(297)});if(null===a)throw new Error(e(325));return{data:new Uint8Array(await a[e(338)]()),bitsPerPixel:32}}(t)}}}]);