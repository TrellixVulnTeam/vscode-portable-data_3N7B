const a6_0x4afa=["push","primary","pointerMove","name","onUpdate","_svgInnerPath","_samplingOption","overlay","secondary","get","version","stroke","1.1","M1.5 1.5 h","register","containsCoord","_lastCoord","right","multiply","pointerUp","fire","getCoordsFromEvent","592458VhVrBd","min","51 x 51 Average","130065bfYgiP","currentLayer","_outlineModel","_svgPath","setAttribute","linearBurn","3 x 3 Average","M0.5 0.5 h","string","184429ryvLYY","bottom","80188wWCiVm","lighten","_isPointerDown","_svg","append","Sampling","top","buttons","_setColor","_value","#fff","2BwDFIg","screen","_imageService","left","options","exclusion","32023XZRzRR","Point","101 x 101 Average","round","value","pointerDown","_sc","http://www.w3.org/2000/svg","softLight","112925pDwTtw","zoom","11 x 11 Average","type","range","block","normal","path","11MBNnMU","createElementNS","height","5397YiSbwy","clientHeight","imageService","replace","viewportService","width","absolute","style","setValueFromHistoryChange","strokeWidth","render","linearDodgeAdd","_onHistoryUpdateValue","Blend Mode","_viewportService","_container","difference","svg","_onUpdate","none","darken","createDomRenderProgram","fill"," h-","event","2AgRAwX","onHistoryUpdateValue","onRequestRender","toString"," v-","display","31 x 31 Average","position","_onRequestRender","5 x 5 Average","webpackChunkluna","max","number","_updateOutline"],a6_0x44fd=function(t,e){return a6_0x4afa[t-=254]},a6_0x3160b3=a6_0x44fd;(function(t,e){const s=a6_0x44fd;for(;;)try{if(118750===-parseInt(s(291))*-parseInt(s(302))+parseInt(s(328))*parseInt(s(325))+parseInt(s(289))+parseInt(s(280))+parseInt(s(308))*parseInt(s(353))+parseInt(s(317))+-parseInt(s(277)))break;t.push(t.shift())}catch(e){t.push(t.shift())}})(a6_0x4afa),(self[a6_0x3160b3(363)]=self[a6_0x3160b3(363)]||[])[a6_0x3160b3(255)]([[471],{3315:(t,e,s)=>{"use strict";const i=a6_0x3160b3;s.d(e,{d:()=>o});var n=s(5120),r=s(1674);class o extends n.JT{constructor(t,e,s,i){const n=a6_0x44fd;super(),this[n(343)]=t,this[n(304)]=e,this[n(342)]=s,this._model=i,this.order=2,this[n(294)]=document[n(326)](r.q,n(345)),this[n(294)].setAttribute(n(265),n(267)),this[n(294)][n(335)][n(360)]=n(334),this[n(260)]=document[n(326)](r.q,"path"),this._svgInnerPath[n(335)][n(266)]=n(301),this[n(260)][n(335)][n(337)]="1",this._svgInnerPath[n(335)][n(350)]="none",this._svgPath=document[n(326)](r.q,n(324)),this[n(283)][n(335)].stroke="#000",this[n(283)][n(335)][n(337)]="1",this[n(283)][n(335)].fill="none",this[n(294)][n(295)](this[n(283)],this[n(260)]),this._container.appendChild(this[n(294)]),this.register({dispose:()=>this[n(343)].removeChild(this._svg)})}[i(338)](){const t=i,e=this._model[t(321)],s=this._viewportService;if(!e||s[t(318)]<4)return void(this[t(294)].style.display=t(347));this[t(294)][t(335)][t(358)]=t(322);const n=this._imageService[t(281)];if(!n)return;const r=Math[t(311)](this._container.clientWidth/2)-n[t(333)]/2*s.zoom+s.x*s[t(318)],o=Math[t(311)](this[t(343)][t(329)]/2)-n[t(327)]/2*s[t(318)]+s.y*s[t(318)],h=(e[t(272)]-e[t(305)])*s.zoom,a=(e[t(290)]-e[t(297)])*s[t(318)];this[t(294)][t(335)][t(305)]=r+e[t(305)]*s[t(318)]-2+"px",this._svg.style[t(297)]=o+e[t(297)]*s.zoom-2+"px",this[t(294)].setAttribute(t(333),(h+5)[t(356)]()),this[t(294)][t(284)]("height",(a+5)[t(356)]()),this._svgInnerPath.setAttribute("d",t(268)+(h+2)+" v"+(a+2)+t(351)+(h+2)+t(357)+(a+2)),this[t(283)][t(284)]("d",t(287)+(h+4)+" v"+(a+4)+" h-"+(h+4)+t(357)+(a+4))}}},9904:(t,e,s)=>{"use strict";const i=a6_0x3160b3;s.d(e,{rP:()=>o,bG:()=>h,Jp:()=>a,qv:()=>c});var n=s(1815),r=s(5120);class o extends r.JT{constructor(t,e,s){const i=a6_0x44fd;super(),this[i(258)]=t,this[i(306)]=e,this[i(300)]=s,this[i(320)]=i(288),this._onHistoryUpdateValue=this.register(new n.v),this[i(354)]=this[i(340)].event,this[i(346)]=this.register(new n.v),this[i(259)]=this[i(346)][i(352)]}get[i(312)](){return this._value}set[i(312)](t){const e=i;this[e(300)]=t,this[e(346)].fire()}[i(336)](t){const e=i;this[e(300)]=t,this[e(340)][e(275)](t)}}class h extends o{constructor(){const t=i;super(t(341),["normal",t(348),t(273),t(285),"lighten",t(303),t(339),t(262),t(316),t(344),"exclusion"],t(323))}}class a extends o{constructor(){const t=i;super(t(341),[t(323),t(331),"darken",t(273),"linearBurn",t(292),t(303),t(339),t(262),t(316),"difference",t(307)],"normal")}}class c extends r.JT{constructor(t,e,s,r){const o=i;super(),this.name=t,this._value=e,this[o(278)]=s,this[o(364)]=r,this[o(320)]=o(365),this[o(340)]=this.register(new n.v),this.onHistoryUpdateValue=this[o(340)][o(352)],this[o(346)]=this.register(new n.v),this[o(259)]=this._onUpdate[o(352)]}get[i(312)](){return this[i(300)]}set value(t){this[i(300)]=t,this._onUpdate.fire()}[i(336)](t){const e=i;this[e(300)]=t,this[e(340)][e(275)](t)}}},6471:(t,e,s)=>{"use strict";const i=a6_0x3160b3;s.r(e),s.d(e,{default:()=>l});var n=s(1815),r=s(5120),o=s(3315),h=s(9904);const a=new Map([["Point",0],[i(286),1],[i(362),2],["11 x 11 Average",5],[i(359),15],[i(279),25],[i(310),50]]);class c extends r.JT{constructor(t){const e=i;super(),this[e(314)]=t,this.id="colorPicker",this._samplingOption=new h.rP(e(296),[e(309),e(286),e(362),e(319),e(359),"51 x 51 Average","101 x 101 Average"],"Point"),this[e(306)]=[this._samplingOption],this[e(282)]={range:void 0},this[e(361)]=this[e(269)](new n.v),this[e(355)]=this[e(361)].event}[i(349)](t){const e=i;return new o.d(t,this[e(314)][e(330)],this[e(314)][e(332)],this[e(282)])}[i(313)](t){const e=i;if(!this._sc[e(330)][e(281)])return;this[e(293)]=!0;const s=this[e(314)].viewportService.getCoordsFromEvent(t);this[e(254)](s),this._sc[e(330)].containsCoord(s[0],s[1])&&this[e(299)](s,t),this[e(271)]=s}[i(274)](){const t=i;this[t(314)][t(330)][t(281)]&&(this._isPointerDown=!1,this[t(271)]=void 0)}[i(257)](t){const e=i;if(!this[e(314)][e(330)][e(281)])return;const s=this[e(314)][e(332)][e(276)](t);this[e(254)](s),this._isPointerDown&&this[e(271)]&&(this[e(314)][e(330)][e(270)](s[0],s[1])&&(this[e(271)][0]!==s[0]||this[e(271)][1]!==s[1])&&this._setColor(s,t),this._lastCoord=s)}[i(254)](t){const e=i;if(this[e(314)][e(330)].currentLayer&&(this._outlineModel[e(321)]?.left!==t[0]||this[e(282)][e(321)]?.[e(297)]!==t[1])){if(this._sc.imageService[e(270)](t[0],t[1])){const s=a[e(264)](this._samplingOption[e(312)]);this[e(282)][e(321)]={left:t[0]-s,top:t[1]-s,right:t[0]+s+1,bottom:t[1]+s+1}}else this._outlineModel[e(321)]=void 0;this._onRequestRender.fire()}}[i(299)](t,e){const s=i,n=this[s(314)][s(330)][s(281)];if(!n)return;const r=n.data;let o;if(this[s(261)].value===s(309)){const e=4*(t[1]*n.width+t[0]);o=new Float32Array([r[e],r[e+1],r[e+2],r[e+3]])}else{const e=a[s(264)](this._samplingOption[s(312)]);let i=0,h=0,c=0,l=0;const d=Math[s(364)](t[0]-e,0),p=Math[s(364)](t[1]-e,0),u=Math.min(t[0]+e,n[s(333)]-1),v=Math.min(t[1]+e,n[s(327)]-1);let _=0;for(let t=p;t<=v;t++)for(let e=d;e<=u;e++)_=4*(t*n.width+e),i+=r[_],h+=r[_+1],c+=r[_+2],l+=r[_+3];const g=(u-d+1)*(v-p+1);o=new Float32Array([Math[s(311)](i/g),Math[s(311)](h/g),Math[s(311)](c/g),Math[s(311)](l/g)])}1&e[s(298)]?this._sc.paletteService[s(256)]=o:2&e[s(298)]&&(this[s(314)].paletteService[s(263)]=o)}}const l=c},1674:(t,e,s)=>{"use strict";const i=a6_0x3160b3;s.d(e,{q:()=>n});const n=i(315)}}]);