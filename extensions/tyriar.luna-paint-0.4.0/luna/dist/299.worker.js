const a4_0x3137=["width","sqrt","height",'": ',"data",'Images "',"webpackChunkluna","571588ClmXMi","right","round","1ZMTKbQ","selection","pow","184779kuDZON",'Invalid dimensions for image "',"subarray","top","322375XQZduV","7MLUgdK","404518PzkBSJ",'" dimensions differ','" and "',"127729PnWkbI","tolerance","min","left","targetImage","305895eBYgTB","length","max","bottom"," x ","update","397700ZWzwBt","color"],a4_0x479d=function(t,n){return a4_0x3137[t-=103]},a4_0xd50b8d=a4_0x479d;(function(t,n){const r=a4_0x479d;for(;;)try{if(311684===-parseInt(r(131))+parseInt(r(123))+-parseInt(r(121))+-parseInt(r(117))+-parseInt(r(114))*parseInt(r(111))+parseInt(r(137))+parseInt(r(126))*parseInt(r(122)))break;t.push(t.shift())}catch(n){t.push(t.shift())}})(a4_0x3137),(self[a4_0xd50b8d(110)]=self[a4_0xd50b8d(110)]||[]).push([[299],{299:(t,n,r)=>{"use strict";const e=a4_0xd50b8d;function a(t,n,r=!1){const a=e;return n<Math[a(116)](2,8)?r?new Uint8Array(new SharedArrayBuffer(t)):new Uint8Array(t):n<Math[a(116)](2,16)?r?new Uint16Array(new SharedArrayBuffer(2*t)):new Uint16Array(t):r?new Uint32Array(new SharedArrayBuffer(4*t)):new Uint32Array(t)}r.r(n),r.d(n,{run:()=>d});var o=r(3),i=r(742),s=r(517);const d=(t,n,r)=>{const d=e;(0,i.ap)(r,d(130));const f=r[d(130)][d(108)],h=r.targetImage[d(104)],l=r.targetImage[d(106)],p=r.x,g=r.y,w=4*(g*h+p),x=f[d(119)](w,w+4),m=r.tolerance*r[d(127)]*4,B=a(h*l*2,Math[d(133)](h,l));let M=0;B[M++]=p,B[M++]=g;const y=new Uint8Array(h*l);y[g*h+p]=1;const I=a(h*l,h*l*4,!0);let _=0;const A=(0,o.Re)(p,g),b=(0,o.DI)(h,l),R=r[d(115)]||b;let v=0,U=0,k=0,D=0;for(;M>0;)U=B[--M],v=B[--M],k=U*h+v,D=4*k,S=f,C=D,Z=x,((L=m)>0?(u[0]=Z[0]-S[C],u[1]=Z[1]-S[C+1],u[2]=Z[2]-S[C+2],u[3]=Z[3]-S[C+3],u[4]=(1+u[0]*u[0])*Z[3]/256+(1+u[1]*u[1])*Z[3]/256+(1+u[2]*u[2])*Z[3]/256+u[3]*u[3],u[4]<=L):S[C]===Z[0]&&S[C+1]===Z[1]&&S[C+2]===Z[2]&&S[C+3]===Z[3])&&(I[_++]=D,(0,o.Hv)(A,v,U),(0,o.RB)(b,v+1,U)&&0===y[k+1]&&((0,o.RB)(R,v+1,U)&&(B[M++]=v+1,B[M++]=U),y[k+1]=1),(0,o.RB)(b,v-1,U)&&0===y[k-1]&&((0,o.RB)(R,v-1,U)&&(B[M++]=v-1,B[M++]=U),y[k-1]=1),(0,o.RB)(b,v,U+1)&&0===y[k+h]&&((0,o.RB)(R,v,U+1)&&(B[M++]=v,B[M++]=U+1),y[k+h]=1),(0,o.RB)(b,v,U-1)&&0===y[k-h]&&((0,o.RB)(R,v,U-1)&&(B[M++]=v,B[M++]=U-1),y[k-h]=1));var S,C,Z,L;const T=I[d(119)](0,_);n[d(136)](.25);const q=c(f,T);n[d(136)](.5),function(t,n,r){let e=0;for(let a=0;a<n.length;a++)e=n[a],(0,s.B)("normal",t,e,r,0)}(f,T,r[d(103)]),n.update(.75);const z=c(f,T);return n[d(136)](1),{indexList:T,undoColorData:q,redoColorData:z,range:A}},u=new Int32Array(5);function c(t,n){const r=e,a=new Uint8Array(new SharedArrayBuffer(4*n[r(132)]));for(let e=0;e<n[r(132)];e++)a[4*e]=t[n[e]],a[4*e+1]=t[n[e]+1],a[4*e+2]=t[n[e]+2],a[4*e+3]=t[n[e]+3];return a}},742:(t,n,r)=>{"use strict";function e(t,n){const r=a4_0x479d,e=t[n];if(e.width<1||e.height<1)throw new Error(r(118)+n+r(107)+e[r(104)]+r(135)+e.height)}function a(t,n,r){const e=a4_0x479d,a=t[n],o=t[r];if(a[e(104)]===o[e(104)]&&a[e(106)]===o[e(106)])throw new Error('Images "'+n+e(125)+r+'" dimensions are equal')}r.d(n,{ap:()=>e,TO:()=>a})},517:(t,n,r)=>{"use strict";const e=a4_0xd50b8d;r.d(n,{B:()=>s});const a=new Float32Array(6);let o;const i={normal:(t,n)=>n,darken:(t,n)=>Math[e(128)](t,n),multiply:(t,n)=>t*n,linearBurn:(t,n)=>Math[e(133)](t+n-1,0),lighten:(t,n)=>Math.max(t,n),screen:(t,n)=>1-(1-t)*(1-n),linearDodgeAdd:(t,n)=>Math[e(128)](t+n,1),overlay:(t,n)=>t<.5?2*t*n:1-2*(1-t)*(1-n),softLight:(t,n)=>n<.5?2*t*n+t*t*(1-2*n):Math[e(105)](t)*(2*n-1)+2*t*(1-n),difference:(t,n)=>Math.abs(t-n),exclusion:(t,n)=>t+n-2*t*n};function s(t,n,r,s,u,c=n,f=r){const h=e;return a[0]=s[u+3]/255,0===a[0]?(n[r]=c[f],n[r+1]=c[f+1],n[r+2]=c[f+2],void(n[r+3]=c[f+3])):(a[1]=c[f+3]/255,0===a[1]?(n[r]=s[u],n[r+1]=s[u+1],n[r+2]=s[u+2],void(n[r+3]=s[u+3])):(o=i[t],a[3]=o(c[f]/255,s[u]/255),a[4]=o(c[f+1]/255,s[u+1]/255),a[5]=o(c[f+2]/255,s[u+2]/255),a[2]=a[0]+a[1]*(1-a[0]),n[r]=Math.round(d(c[f]/255,a[1],s[u]/255,a[0],a[3])/a[2]*255),n[r+1]=Math.round(d(c[f+1]/255,a[1],s[u+1]/255,a[0],a[4])/a[2]*255),n[r+2]=Math[h(113)](d(c[f+2]/255,a[1],s[u+2]/255,a[0],a[5])/a[2]*255),void(n[r+3]=Math[h(113)](255*a[2]))))}function d(t,n,r,e,a){return(n-n*e)*t+(e-n*e)*r+n*e*a}},3:(t,n,r)=>{"use strict";function e(t,n){return{left:t,top:n,right:t+1,bottom:n+1}}function a(t,n){return{left:0,top:0,right:t,bottom:n}}function o(t,n,r){const e=a4_0x479d;if(function(t){const n=a4_0x479d;return t[n(129)]===t[n(112)]||t.top===t[n(134)]}(t))return t.left=n,t[e(112)]=n+1,t[e(120)]=r,void(t[e(134)]=r+1);t[e(129)]=Math[e(128)](t.left,n),t[e(120)]=Math.min(t[e(120)],r),t[e(112)]=Math[e(133)](t[e(112)],n+1),t[e(134)]=Math.max(t[e(134)],r+1)}function i(t,n,r){const e=a4_0x479d;return n>=t.left&&n<t[e(112)]&&r>=t.top&&r<t[e(134)]}r.d(n,{Re:()=>e,DI:()=>a,Hv:()=>o,RB:()=>i})}}]);