const a7_0x2121=["max","currentLayer","http://www.w3.org/2000/svg","M1.5 1.5 h","removeChild","version","overlay","_onHistoryUpdateValue","_imageService"," h-","setValueFromHistoryChange","requestRender","webpackChunkluna","_brushSizeOption","order","1.1","exclusion","event","stroke","top","1029313xByLEc","right","clientWidth","createDomRenderProgram","_value","softLight","getCoordsFromEvent","path","Brush Size","_svgInnerPath","options","svg","pointerUp","setAttribute","239987TxfHhH","drawCircle","Blend Mode","lighten","1388143NOLKtD","block","none","_edit","_lastCoord","onRequestRender","689bTKAie","ceil","linearDodgeAdd","height","zoom","clientHeight","M0.5 0.5 h","#fff","push","toString","_container"," v-","viewportService","commit","render","pointerDownMove","fill","replace","containsCoord","display","#000","round","onUpdate","difference","_outlineModel","createElementNS","_svgPath","onHistoryUpdateValue","createExtendedEdit","687MOqcHA","range","202564odRUKw","_svg","_sc","_onUpdate","absolute","style","_drawLine","normal","bottom","width","multiply","value","screen","_onRequestRender","name","register","786ePpkir","_getEdit","string","7rYhRmR","type","number","pointerMove","422430giPaSz","selectionService","1937TOyCvW","left","_model","_viewportService","linearBurn","min","strokeWidth","imageService","_updateOutline","fire","abs","darken","appendChild"],a7_0x2f01=function(t,e){return a7_0x2121[t-=355]},a7_0x168d0b=a7_0x2f01;(function(t,e){const s=a7_0x2f01;for(;;)try{if(697608===parseInt(s(407))*parseInt(s(463))+parseInt(s(383))+-parseInt(s(436))*parseInt(s(454))+parseInt(s(438))+parseInt(s(401))+parseInt(s(397))+-parseInt(s(461))*parseInt(s(457)))break;t.push(t.shift())}catch(e){t.push(t.shift())}})(a7_0x2121),(self.webpackChunkluna=self[a7_0x168d0b(375)]||[])[a7_0x168d0b(415)]([[996],{3315:(t,e,s)=>{"use strict";const i=a7_0x168d0b;s.d(e,{d:()=>h});var n=s(5120),r=s(1674);class h extends n.JT{constructor(t,e,s,i){const n=a7_0x2f01;super(),this[n(417)]=t,this[n(371)]=e,this._viewportService=s,this[n(465)]=i,this[n(377)]=2,this[n(439)]=document[n(432)](r.q,n(394)),this[n(439)][n(396)](n(368),n(378)),this[n(439)].style.position=n(442),this[n(392)]=document.createElementNS(r.q,n(390)),this._svgInnerPath[n(443)][n(381)]=n(414),this._svgInnerPath[n(443)].strokeWidth="1",this[n(392)][n(443)].fill="none",this[n(433)]=document[n(432)](r.q,"path"),this._svgPath[n(443)][n(381)]=n(427),this._svgPath[n(443)][n(356)]="1",this[n(433)][n(443)][n(423)]=n(403),this[n(439)].append(this[n(433)],this[n(392)]),this._container[n(362)](this[n(439)]),this[n(453)]({dispose:()=>this[n(417)][n(367)](this[n(439)])})}[i(421)](){const t=i,e=this[t(465)][t(437)],s=this[t(466)];if(!e||s[t(411)]<4)return void(this[t(439)][t(443)][t(426)]=t(403));this[t(439)][t(443)][t(426)]=t(402);const n=this[t(371)][t(364)];if(!n)return;const r=Math[t(428)](this[t(417)][t(385)]/2)-n[t(447)]/2*s[t(411)]+s.x*s.zoom,h=Math[t(428)](this[t(417)][t(412)]/2)-n[t(410)]/2*s[t(411)]+s.y*s[t(411)],o=(e[t(384)]-e.left)*s[t(411)],a=(e[t(446)]-e[t(382)])*s[t(411)];this[t(439)].style[t(464)]=r+e.left*s[t(411)]-2+"px",this[t(439)].style[t(382)]=h+e[t(382)]*s[t(411)]-2+"px",this[t(439)][t(396)](t(447),(o+5)[t(416)]()),this[t(439)][t(396)](t(410),(a+5)[t(416)]()),this[t(392)][t(396)]("d",t(366)+(o+2)+" v"+(a+2)+t(372)+(o+2)+" v-"+(a+2)),this._svgPath[t(396)]("d",t(413)+(o+4)+" v"+(a+4)+t(372)+(o+4)+t(418)+(a+4))}}},9904:(t,e,s)=>{"use strict";const i=a7_0x168d0b;s.d(e,{rP:()=>h,bG:()=>o,Jp:()=>a,qv:()=>c});var n=s(1815),r=s(5120);class h extends r.JT{constructor(t,e,s){const i=a7_0x2f01;super(),this[i(452)]=t,this[i(393)]=e,this._value=s,this[i(458)]=i(456),this[i(370)]=this[i(453)](new n.v),this[i(434)]=this[i(370)].event,this[i(441)]=this.register(new n.v),this[i(429)]=this[i(441)][i(380)]}get value(){return this[a7_0x2f01(387)]}set[i(449)](t){const e=i;this._value=t,this[e(441)][e(359)]()}[i(373)](t){const e=i;this[e(387)]=t,this[e(370)].fire(t)}}class o extends h{constructor(){const t=i;super("Blend Mode",[t(445),t(361),"multiply",t(467),"lighten",t(450),t(409),t(369),t(388),t(430),t(379)],t(445))}}class a extends h{constructor(){const t=i;super(t(399),[t(445),t(424),t(361),t(448),t(467),t(400),t(450),t(409),t(369),t(388),t(430),t(379)],"normal")}}class c extends r.JT{constructor(t,e,s,r){const h=i;super(),this.name=t,this[h(387)]=e,this[h(355)]=s,this[h(363)]=r,this[h(458)]=h(459),this[h(370)]=this[h(453)](new n.v),this[h(434)]=this[h(370)][h(380)],this[h(441)]=this.register(new n.v),this.onUpdate=this[h(441)][h(380)]}get value(){return this._value}set[i(449)](t){const e=i;this[e(387)]=t,this[e(441)][e(359)]()}[i(373)](t){const e=i;this[e(387)]=t,this[e(370)][e(359)](t)}}},2996:(t,e,s)=>{"use strict";const i=a7_0x168d0b;s.r(e),s.d(e,{default:()=>v});var n=s(1815),r=s(5120),h=s(3315),o=s(9904);const a=new Float32Array([0,0,0,0]);class c extends r.JT{constructor(t){const e=a7_0x2f01;super(),this[e(440)]=t,this.id="eraser",this[e(376)]=new o.qv(e(391),1,1,1e3),this[e(393)]=[this._brushSizeOption],this[e(431)]={range:void 0},this[e(451)]=this.register(new n.v),this[e(406)]=this[e(451)].event}[i(386)](t){const e=i;return new h.d(t,this[e(440)].imageService,this[e(440)][e(419)],this._outlineModel)}pointerDown(t){const e=i,s=this[e(440)][e(357)];if(!s.currentLayer)return;const n=this[e(440)][e(419)][e(389)](t);if(n){if(s[e(425)](n[0],n[1])){const t=this[e(455)]();u(this._getEdit(),n[0],n[1],a,this._brushSizeOption[e(449)],s,this[e(440)][e(462)]),t[e(374)]()}this[e(405)]=n}}[i(460)](t){const e=i;if(!this[e(440)].imageService[e(364)])return;const s=this[e(440)].viewportService[e(389)](t);this[e(358)](s)}[i(358)](t){const e=i;if(this[e(440)].imageService[e(364)]&&(this[e(431)][e(437)]?.left!==t[0]||this[e(431)][e(437)]?.[e(382)]!==t[1])){if(this._sc[e(357)][e(425)](t[0],t[1])){const s=(this._brushSizeOption[e(449)]-1)/2;this._outlineModel[e(437)]={left:t[0]-Math.floor(s),top:t[1]-Math.floor(s),right:t[0]+Math[e(408)](s)+1,bottom:t[1]+Math[e(408)](s)+1}}else this[e(431)].range=void 0;this[e(451)].fire()}}[i(422)](t){const e=i;if(!this[e(405)])return;const s=this[e(440)][e(357)];if(!s[e(364)])return;const n=this._sc[e(419)].getCoordsFromEvent(t);(s[e(425)](n[0],n[1])||s[e(425)](this._lastCoord[0],this[e(405)][1]))&&this[e(444)](this[e(405)],n,a),this[e(405)]=n}async[i(395)](){const t=i;this[t(440)].imageService[t(364)]&&(this._edit?.[t(420)]("Eraser"),this._edit=void 0),this[t(405)]=void 0}[i(444)](t,e,s){const n=i,r=this._getEdit();(function(t,e,s,n,r,h,o,a,c){const u=i;Math[u(360)](a-h)<Math[u(360)](o-r)?r>o?d(t,e,s,n,o,a,r,h,c):d(t,e,s,n,r,h,o,a,c):h>a?l(t,e,s,n,o,a,r,h,c):l(t,e,s,n,r,h,o,a,c)})(r,this[n(440)].imageService,this._sc[n(462)],s,t[0],t[1],e[0],e[1],this[n(376)][n(449)]),r[n(374)]()}_getEdit(){const t=i;if(!this[t(404)]&&(this[t(404)]=this[t(440)][t(357)].currentLayer?.[t(435)](),!this[t(404)]))throw new Error("Could not create extended edit");return this[t(404)]}}function d(t,e,s,i,n,r,h,o,a){const c=h-n;let d=o-r,l=1;d<0&&(l=-1,d=-d);let v=2*d-c,p=r;for(let r=n;r<=h;r++)u(t,r,p,i,a,e,s),v>0?(p+=l,v+=2*(d-c)):v+=2*d}function l(t,e,s,i,n,r,h,o,a){let c=h-n;const d=o-r;let l=1;c<0&&(l=-1,c=-c);let v=2*c-d,p=n;for(let n=r;n<=o;n++)u(t,p,n,i,a,e,s),v>0?(p+=l,v+=2*(c-d)):v+=2*c}function u(t,e,s,n,r,h,o){const a=i;o.containsCoord(e,s)&&h[a(425)](e,s)&&t[a(398)](e,s,r,!0,n)}const v=c},1674:(t,e,s)=>{"use strict";const i=a7_0x168d0b;s.d(e,{q:()=>n});const n=i(365)}}]);