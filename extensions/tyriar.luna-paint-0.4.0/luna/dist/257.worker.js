const a5_0x2fea=["28477rrnkVT","top","height","set",'" and "',"243131YTSLak","number","7127jkCBpg"," x ","subarray","width",'Invalid dimensions for image "',"ceil","SharedArrayBuffer","121rWuAbG","min","73634rnIADB",'" dimensions are equal',"data","webpackChunkluna","length","selection","left","max","1UEypon","10utSJnn","slice","tolerance","476855CxUkEK","toFixed","targetImage",'Images "',"935708dxEVzu","normal","update","round","39ByroXA","1080451uqVetV","right","abs","sqrt","push","color",'" dimensions differ',"bottom"],a5_0x1d84=function(t,n){return a5_0x2fea[t-=388]},a5_0x3afca2=a5_0x1d84;(function(t,n){const a=a5_0x1d84;for(;;)try{if(606109===-parseInt(a(429))*parseInt(a(391))+parseInt(a(401))*-parseInt(a(414))+parseInt(a(409))+-parseInt(a(405))+parseInt(a(427))+parseInt(a(413))*parseInt(a(422))+-parseInt(a(402))*-parseInt(a(393)))break;t.push(t.shift())}catch(n){t.push(t.shift())}})(a5_0x2fea),(self[a5_0x3afca2(396)]=self[a5_0x3afca2(396)]||[])[a5_0x3afca2(418)]([[257],{257:(t,n,a)=>{"use strict";a.r(n),a.d(n,{run:()=>s});var e=a(517),r=a(166),o=a(3),i=a(742);const s=(t,n,a)=>{const s=a5_0x1d84;(0,i.ap)(a,s(407));const c=a[s(407)][s(395)],u=a[s(407)][s(432)],h=a[s(407)][s(424)],d=a[s(419)],l=4*(a.y*u+a.x),p=c.subarray(l,l+4)[s(403)](),x=a[s(398)]||(0,o.DI)(u,h),M=a[s(404)]*a.tolerance*4,_=(0,r.Qf)(a[s(407)],x);if(n[s(411)](.1),a[s(398)]){const t=Math[s(389)](x[s(421)]+(x[s(421)]-x[s(423)])*(2/8));let a=0;for(let r=x[s(423)];r<x[s(421)];r++){for(let t=x.left;t<x[s(415)];t++)a=4*(r*u+t),f(c,a,p,M)&&(0,e.B)(s(410),c,a,d,0);n[s(411)](+((r-x[s(423)])/t)[s(406)](2)+.1)}}else{const t=Math.ceil(1.25*c[s(397)]);for(let a=0;a<c[s(397)];a+=4)f(c,a,p,M)&&(0,e.B)("normal",c,a,d,0),a%5e3==0&&n.update(+(a/t)[s(406)](2)+.1)}return n.update(.9),{undoData:_,redoData:(0,r.Qf)(a[s(407)],x),range:x}},c=new Int32Array(5);function f(t,n,a,e){return e>0?(c[0]=a[0]-t[n],c[1]=a[1]-t[n+1],c[2]=a[2]-t[n+2],c[3]=a[3]-t[n+3],c[4]=(1+c[0]*c[0])*a[3]/256+(1+c[1]*c[1])*a[3]/256+(1+c[2]*c[2])*a[3]/256+c[3]*c[3],c[4]<=e):t[n]===a[0]&&t[n+1]===a[1]&&t[n+2]===a[2]&&t[n+3]===a[3]}},742:(t,n,a)=>{"use strict";function e(t,n){const a=a5_0x1d84,e=t[n];if(e.width<1||e[a(424)]<1)throw new Error(a(388)+n+'": '+e[a(432)]+a(430)+e.height)}function r(t,n,a){const e=a5_0x1d84,r=t[n],o=t[a];if(r.width===o.width&&r[e(424)]===o[e(424)])throw new Error(e(408)+n+e(426)+a+e(394))}a.d(n,{ap:()=>e,TO:()=>r})},517:(t,n,a)=>{"use strict";const e=a5_0x3afca2;a.d(n,{B:()=>s});const r=new Float32Array(6);let o;const i={normal:(t,n)=>n,darken:(t,n)=>Math[e(392)](t,n),multiply:(t,n)=>t*n,linearBurn:(t,n)=>Math[e(400)](t+n-1,0),lighten:(t,n)=>Math[e(400)](t,n),screen:(t,n)=>1-(1-t)*(1-n),linearDodgeAdd:(t,n)=>Math[e(392)](t+n,1),overlay:(t,n)=>t<.5?2*t*n:1-2*(1-t)*(1-n),softLight:(t,n)=>n<.5?2*t*n+t*t*(1-2*n):Math[e(417)](t)*(2*n-1)+2*t*(1-n),difference:(t,n)=>Math[e(416)](t-n),exclusion:(t,n)=>t+n-2*t*n};function s(t,n,a,s,f,u=n,h=a){const d=e;return r[0]=s[f+3]/255,0===r[0]?(n[a]=u[h],n[a+1]=u[h+1],n[a+2]=u[h+2],void(n[a+3]=u[h+3])):(r[1]=u[h+3]/255,0===r[1]?(n[a]=s[f],n[a+1]=s[f+1],n[a+2]=s[f+2],void(n[a+3]=s[f+3])):(o=i[t],r[3]=o(u[h]/255,s[f]/255),r[4]=o(u[h+1]/255,s[f+1]/255),r[5]=o(u[h+2]/255,s[f+2]/255),r[2]=r[0]+r[1]*(1-r[0]),n[a]=Math[d(412)](c(u[h]/255,r[1],s[f]/255,r[0],r[3])/r[2]*255),n[a+1]=Math[d(412)](c(u[h+1]/255,r[1],s[f+1]/255,r[0],r[4])/r[2]*255),n[a+2]=Math[d(412)](c(u[h+2]/255,r[1],s[f+2]/255,r[0],r[5])/r[2]*255),void(n[a+3]=Math[d(412)](255*r[2]))))}function c(t,n,a,e,r){return(n-n*e)*t+(e-n*e)*a+n*e*r}},166:(t,n,a)=>{"use strict";function e(t,n){const a=a5_0x1d84,e=n[a(421)]-n[a(423)],r=n.right-n[a(399)],o=new Uint8Array(r*e*4);let i=0,s=0;for(let c=0;c<e;c++)s=c+n[a(423)],i=4*(s*t.width+n.left),o[a(425)](t[a(395)][a(431)](i,i+4*r),c*r*4);return o}function r(t,n,a,e,r=!0){const o=a5_0x1d84;if(!r&&n<e&&t<a)return{left:Math[o(412)]((a-t)/2),top:Math.round((e-n)/2),width:t,height:n};const i={left:0,top:0,width:a,height:e};if(n>t){const e=t/n;i[o(399)]=Math[o(412)](a*(.5-e/2)),i[o(432)]=Math[o(412)](a*e)}else if(t>n){const a=n/t;i[o(423)]=Math[o(412)](e*(.5-a/2)),i[o(424)]=Math[o(412)](e*a)}return i}a.d(n,{Qf:()=>e,M_:()=>r})},3:(t,n,a)=>{"use strict";function e(t,n){return{left:t,top:n,right:t+1,bottom:n+1}}function r(t,n){return{left:0,top:0,right:t,bottom:n}}function o(t,n,a){const e=a5_0x1d84;if(function(t){const n=a5_0x1d84;return t[n(399)]===t.right||t.top===t[n(421)]}(t))return t[e(399)]=n,t[e(415)]=n+1,t.top=a,void(t[e(421)]=a+1);t[e(399)]=Math[e(392)](t[e(399)],n),t[e(423)]=Math[e(392)](t.top,a),t[e(415)]=Math[e(400)](t[e(415)],n+1),t[e(421)]=Math[e(400)](t[e(421)],a+1)}function i(t,n,a){const e=a5_0x1d84;return n>=t[e(399)]&&n<t[e(415)]&&a>=t[e(423)]&&a<t[e(421)]}a.d(n,{Re:()=>e,DI:()=>r,Hv:()=>o,RB:()=>i})}}]);