const a13_0x4c14=["_targetY","onUpdate","_originY","viewportService","crop-to-selection","validate","Deselect","bottom","565631NnHKnf","3PNVcVc","now","sign","register","133501vgWrgH","width","_sc","isSelectionTool","49596OYdaEr","webpackChunkluna","_updateSelection","2InsYUh","range","_originX","_targetX","_refreshActionEnabledState","pointerDown","top","pointerUp","right","selection","158591owWTiD","_pointerDownY","_enabled","imageService","Rectangle Selection","abs","174053McAAjW","17034dPdXhr","466376lBSCiJ","commit","pointerDownMove","shiftKey","enabled","height","keyDown","push","selectionService","event","left","actions","_isPointerDown","getCoordsFromEvent","_cropToSelectionAction","offsetX","keyUp","1NFlSyb","name","offsetY","1aTucUE","_onUpdate","_pointerDownStartTime","type","_pointerDownX"],a13_0x51cf=function(t,i){return a13_0x4c14[t-=409]},a13_0x4a7d33=a13_0x51cf;(function(t,i){const s=a13_0x51cf;for(;;)try{if(368070===-parseInt(s(463))-parseInt(s(464))+-parseInt(s(421))*parseInt(s(462))+parseInt(s(446))*-parseInt(s(443))+parseInt(s(439))*parseInt(s(435))+parseInt(s(418))*parseInt(s(434))+parseInt(s(456)))break;t.push(t.shift())}catch(i){t.push(t.shift())}})(a13_0x4c14),(self[a13_0x4a7d33(444)]=self[a13_0x4a7d33(444)]||[])[a13_0x4a7d33(471)]([[40],{6173:(t,i,s)=>{"use strict";const e=a13_0x4a7d33;s.d(i,{f:()=>h});var n=s(1815),o=s(5120);class h extends o.JT{constructor(t,i,s){const e=a13_0x51cf;super(),this[e(419)]=t,this[e(424)]=i,this[e(458)]=s,this[e(422)]=this[e(438)](new n.v),this[e(427)]=this[e(422)][e(410)]}get[e(468)](){return this._enabled}set[e(468)](t){const i=e;this[i(458)]!==t&&(this[i(458)]=t,this[i(422)].fire())}}},3040:(t,i,s)=>{"use strict";const e=a13_0x4a7d33;s.r(i),s.d(i,{default:()=>c});var n=s(5120),o=s(2939),h=s(1003),r=s(6173);class a extends n.JT{constructor(t){const i=a13_0x51cf;super(),this[i(441)]=t,this.id=i(455),this[i(442)]=!0,this[i(448)]=0,this[i(428)]=0,this._pointerDownStartTime=0,this._pointerDownX=0,this[i(457)]=0,this[i(415)]=new r.f("Crop to Selection",i(430),!1),this[i(412)]=[this[i(415)]],this._sc[i(409)][i(427)]((()=>this[i(450)]())),this._refreshActionEnabledState()}[e(470)](t,i){const s=e;this[s(413)]=i,this[s(445)](t)}[e(417)](t,i){const s=e;this._isPointerDown=i,this[s(445)](t)}[e(451)](t){const i=e;this[i(413)]=!0,this._pointerDownStartTime=Date[i(436)](),this._pointerDownX=t[i(416)],this[i(457)]=t[i(420)],(this._sc.selectionService[i(447)]||void 0!==this[i(449)]||void 0!==this._targetY)&&(this[i(449)]=void 0,this[i(426)]=void 0,this[i(441)].selectionService.range=void 0),[this[i(448)],this._originY]=this[i(441)][i(429)][i(414)](t)}[e(453)](t){const i=e;if(this[i(413)]=!1,void 0===this[i(449)]||void 0===this[i(426)]){this[i(441)][i(409)].range=void 0;const t=void 0===this[i(441)][i(409)][i(447)]?i(432):i(460);return void this[i(441)][i(409)][i(465)](t)}const s=Math[i(461)](this[i(425)]-t[i(416)]),n=Math[i(461)](this[i(457)]-t[i(420)]);if(s<10&&n<10&&Date[i(436)]()-this[i(423)]<75){this[i(441)][i(409)][i(447)]=void 0;const t=void 0===this[i(441)][i(409)].range?"Deselect":i(460);return void this[i(441)].selectionService[i(465)](t)}this[i(445)](t);const o=void 0===this[i(441)].selectionService[i(447)]?i(432):"Rectangle Selection";this[i(441)][i(409)][i(465)](o)}[e(466)](t){const i=e;[this[i(449)],this[i(426)]]=this[i(441)][i(429)][i(414)](t),this[i(445)](t)}_updateSelection(t){const i=e;if(!this._isPointerDown||void 0===this[i(449)]||void 0===this[i(426)])return;let s=this._targetX-this[i(448)],n=this[i(426)]-this[i(428)];t[i(467)]&&(Math.abs(s)>Math.abs(n)?s=n*(Math[i(437)](s)!==Math[i(437)](n)?-1:1):n=s*(Math.sign(s)!==Math.sign(n)?-1:1));const r=this[i(441)][i(459)][i(440)],a=this[i(441)][i(459)][i(469)],c=(0,h.Pq)();n<0?(c[i(452)]=(0,o.u)(this._originY+n,a),c[i(433)]=(0,o.u)(this[i(428)]+1,a)):(c[i(433)]=(0,o.u)(this[i(428)]+n+1,a),c[i(452)]=(0,o.u)(this[i(428)],a)),s<0?(c[i(411)]=(0,o.u)(this[i(448)]+s,r),c[i(454)]=(0,o.u)(this._originX+1,r)):(c[i(454)]=(0,o.u)(this[i(448)]+s+1,r),c.left=(0,o.u)(this[i(448)],r)),this._sc[i(409)].range=c,this[i(441)][i(409)][i(431)](r,a)}[e(450)](){const t=e,i=this[t(441)][t(409)].range;this._cropToSelectionAction[t(468)]=!(!i||0===i[t(411)]&&0===i[t(452)]&&i[t(454)]===this[t(441)][t(459)][t(440)]&&i[t(433)]===this[t(441)][t(459)][t(469)])}}const c=a}}]);