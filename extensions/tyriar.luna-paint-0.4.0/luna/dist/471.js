const a6_0xa69c=["1.1","viewportService","range","_svg","push","setAttribute","event","options","_onUpdate","http://www.w3.org/2000/svg","_outlineModel","linearBurn","clientHeight","appendChild","231463DsStzx","_onRequestRender","setValueFromHistoryChange","linearDodgeAdd","data","1115831QFafes","#fff","toString","max","getCoordsFromEvent","470918QgONyX","path","_isPointerDown","#000","top","display","72302hcMuOD","Point","M0.5 0.5 h","get","onUpdate","zoom","clientWidth","register","height","fill","screen","imageService","onRequestRender","exclusion","svg","createDomRenderProgram","createElementNS","bottom","width","append","darken","buttons","_svgPath","currentLayer"," h-","difference","round","_imageService","344500KhDSkA","value","normal","absolute","_model","_svgInnerPath","_container","465424pJXDxZ","31 x 31 Average","lighten","left","onHistoryUpdateValue","Sampling","_viewportService","min","_samplingOption","string","Blend Mode","51 x 51 Average","render","_lastCoord","paletteService","overlay","strokeWidth","none","3 x 3 Average","multiply","containsCoord","_setColor","101 x 101 Average","softLight","_onHistoryUpdateValue","webpackChunkluna","11 x 11 Average","right","fire","name","1716366ISfnfw","style","_sc","version","type","_value","removeChild","_updateOutline"],a6_0xec58=function(t,s){return a6_0xa69c[t-=124]},a6_0x1665d5=a6_0xec58;(function(t,s){const e=a6_0xec58;for(;;)try{if(984072===parseInt(e(177))+parseInt(e(212))+-parseInt(e(139))+parseInt(e(171))+parseInt(e(166))+parseInt(e(205))+parseInt(e(161)))break;t.push(t.shift())}catch(s){t.push(t.shift())}})(a6_0xa69c),(self.webpackChunkluna=self[a6_0x1665d5(134)]||[])[a6_0x1665d5(151)]([[471],{3315:(t,s,e)=>{"use strict";const i=a6_0x1665d5;e.d(s,{d:()=>r});var n=e(5120),o=e(1674);class r extends n.JT{constructor(t,s,e,i){const n=a6_0xec58;super(),this[n(211)]=t,this[n(204)]=s,this[n(218)]=e,this[n(209)]=i,this.order=2,this[n(150)]=document.createElementNS(o.q,n(191)),this[n(150)][n(152)](n(142),n(147)),this[n(150)][n(140)].position=n(208),this._svgInnerPath=document.createElementNS(o.q,"path"),this[n(210)][n(140)].stroke=n(167),this[n(210)][n(140)][n(125)]="1",this[n(210)][n(140)][n(186)]=n(126),this[n(199)]=document[n(193)](o.q,n(172)),this._svgPath[n(140)].stroke=n(174),this[n(199)][n(140)][n(125)]="1",this[n(199)][n(140)][n(186)]=n(126),this[n(150)][n(196)](this[n(199)],this[n(210)]),this[n(211)][n(160)](this[n(150)]),this[n(184)]({dispose:()=>this[n(211)][n(145)](this._svg)})}[i(224)](){const t=i,s=this[t(209)][t(149)],e=this[t(218)];if(!s||e[t(182)]<4)return void(this[t(150)][t(140)].display="none");this._svg[t(140)][t(176)]="block";const n=this[t(204)][t(200)];if(!n)return;const o=Math[t(203)](this[t(211)][t(183)]/2)-n[t(195)]/2*e[t(182)]+e.x*e[t(182)],r=Math[t(203)](this[t(211)][t(159)]/2)-n[t(185)]/2*e.zoom+e.y*e.zoom,h=(s[t(136)]-s[t(215)])*e[t(182)],a=(s[t(194)]-s.top)*e[t(182)];this[t(150)][t(140)][t(215)]=o+s[t(215)]*e.zoom-2+"px",this[t(150)][t(140)][t(175)]=r+s.top*e[t(182)]-2+"px",this[t(150)][t(152)]("width",(h+5).toString()),this[t(150)].setAttribute(t(185),(a+5)[t(168)]()),this[t(210)][t(152)]("d","M1.5 1.5 h"+(h+2)+" v"+(a+2)+t(201)+(h+2)+" v-"+(a+2)),this[t(199)][t(152)]("d",t(179)+(h+4)+" v"+(a+4)+t(201)+(h+4)+" v-"+(a+4))}}},9904:(t,s,e)=>{"use strict";const i=a6_0x1665d5;e.d(s,{rP:()=>r,bG:()=>h,Jp:()=>a,qv:()=>c});var n=e(1815),o=e(5120);class r extends o.JT{constructor(t,s,e){const i=a6_0xec58;super(),this[i(138)]=t,this[i(154)]=s,this[i(144)]=e,this[i(143)]=i(221),this[i(133)]=this[i(184)](new n.v),this[i(216)]=this[i(133)][i(153)],this[i(155)]=this[i(184)](new n.v),this[i(181)]=this[i(155)].event}get[i(206)](){return this[i(144)]}set value(t){const s=i;this[s(144)]=t,this._onUpdate[s(137)]()}[i(163)](t){const s=i;this[s(144)]=t,this[s(133)][s(137)](t)}}class h extends r{constructor(){const t=i;super(t(222),[t(207),t(197),t(128),"linearBurn",t(214),t(187),t(164),t(124),t(132),t(202),"exclusion"],t(207))}}class a extends r{constructor(){const t=i;super(t(222),[t(207),"replace","darken",t(128),t(158),t(214),t(187),"linearDodgeAdd",t(124),t(132),"difference",t(190)],"normal")}}class c extends o.JT{constructor(t,s,e,o){const r=i;super(),this.name=t,this[r(144)]=s,this[r(219)]=e,this.max=o,this[r(143)]="number",this[r(133)]=this[r(184)](new n.v),this[r(216)]=this[r(133)].event,this[r(155)]=this[r(184)](new n.v),this[r(181)]=this[r(155)][r(153)]}get value(){return this[i(144)]}set[i(206)](t){const s=i;this._value=t,this[s(155)][s(137)]()}setValueFromHistoryChange(t){const s=i;this[s(144)]=t,this._onHistoryUpdateValue[s(137)](t)}}},6471:(t,s,e)=>{"use strict";const i=a6_0x1665d5;e.r(s),e.d(s,{default:()=>d});var n=e(1815),o=e(5120),r=e(3315),h=e(9904);const a=new Map([[i(178),0],[i(127),1],["5 x 5 Average",2],[i(135),5],["31 x 31 Average",15],[i(223),25],[i(131),50]]);class c extends o.JT{constructor(t){const s=i;super(),this[s(141)]=t,this.id="colorPicker",this[s(220)]=new h.rP(s(217),[s(178),s(127),"5 x 5 Average",s(135),s(213),s(223),s(131)],s(178)),this[s(154)]=[this[s(220)]],this[s(157)]={range:void 0},this[s(162)]=this[s(184)](new n.v),this[s(189)]=this[s(162)][s(153)]}[i(192)](t){const s=i;return new r.d(t,this._sc[s(188)],this[s(141)][s(148)],this._outlineModel)}pointerDown(t){const s=i;if(!this[s(141)][s(188)][s(200)])return;this._isPointerDown=!0;const e=this[s(141)].viewportService[s(170)](t);this[s(146)](e),this[s(141)].imageService[s(129)](e[0],e[1])&&this[s(130)](e,t),this._lastCoord=e}pointerUp(){const t=i;this[t(141)][t(188)][t(200)]&&(this._isPointerDown=!1,this[t(225)]=void 0)}pointerMove(t){const s=i;if(!this[s(141)][s(188)].currentLayer)return;const e=this[s(141)][s(148)][s(170)](t);this._updateOutline(e),this[s(173)]&&this[s(225)]&&(this[s(141)].imageService[s(129)](e[0],e[1])&&(this._lastCoord[0]!==e[0]||this[s(225)][1]!==e[1])&&this[s(130)](e,t),this._lastCoord=e)}_updateOutline(t){const s=i;if(this[s(141)][s(188)][s(200)]&&(this[s(157)][s(149)]?.[s(215)]!==t[0]||this[s(157)][s(149)]?.[s(175)]!==t[1])){if(this[s(141)][s(188)][s(129)](t[0],t[1])){const e=a[s(180)](this[s(220)][s(206)]);this[s(157)][s(149)]={left:t[0]-e,top:t[1]-e,right:t[0]+e+1,bottom:t[1]+e+1}}else this[s(157)].range=void 0;this[s(162)][s(137)]()}}[i(130)](t,s){const e=i,n=this[e(141)][e(188)][e(200)];if(!n)return;const o=n[e(165)];let r;if(this[e(220)][e(206)]===e(178)){const s=4*(t[1]*n[e(195)]+t[0]);r=new Float32Array([o[s],o[s+1],o[s+2],o[s+3]])}else{const s=a[e(180)](this[e(220)][e(206)]);let i=0,h=0,c=0,d=0;const l=Math[e(169)](t[0]-s,0),u=Math[e(169)](t[1]-s,0),p=Math[e(219)](t[0]+s,n[e(195)]-1),v=Math.min(t[1]+s,n[e(185)]-1);let _=0;for(let t=u;t<=v;t++)for(let s=l;s<=p;s++)_=4*(t*n[e(195)]+s),i+=o[_],h+=o[_+1],c+=o[_+2],d+=o[_+3];const g=(p-l+1)*(v-u+1);r=new Float32Array([Math.round(i/g),Math.round(h/g),Math[e(203)](c/g),Math[e(203)](d/g)])}1&s.buttons?this[e(141)][e(226)].primary=r:2&s[e(198)]&&(this[e(141)][e(226)].secondary=r)}}const d=c},1674:(t,s,e)=>{"use strict";const i=a6_0x1665d5;e.d(s,{q:()=>n});const n=i(156)}}]);