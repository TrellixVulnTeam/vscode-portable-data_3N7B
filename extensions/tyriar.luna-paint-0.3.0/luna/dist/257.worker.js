const a5_0x20f8=["subarray","337481OoxMYR","386132MMstQf","number","521507BXRipl","top","809711rttxbb","normal","toFixed",'" dimensions differ',"data","left","selection","right",'" dimensions are equal',"set","targetImage","81cITYCg","update","abs","1BPakDm","ceil",'Images "',"418478PfBabE"," x ","length","bottom",'Invalid dimensions for image "',"max",'" and "',"min","round","color","3671jHJwxT","webpackChunkluna","1606036CAtCaw","height","SharedArrayBuffer","width","1ptZbqN"],a5_0x50b7=function(t,n){return a5_0x20f8[t-=364]},a5_0x3f8a60=a5_0x50b7;(function(t,n){const e=a5_0x50b7;for(;;)try{if(454798===-parseInt(e(386))-parseInt(e(387))-parseInt(e(389))+-parseInt(e(378))*parseInt(e(402))+-parseInt(e(391))*-parseInt(e(365))+-parseInt(e(384))*parseInt(e(368))+parseInt(e(380)))break;t.push(t.shift())}catch(n){t.push(t.shift())}})(a5_0x20f8),(self[a5_0x3f8a60(379)]=self[a5_0x3f8a60(379)]||[]).push([[257],{257:(t,n,e)=>{"use strict";e.r(n),e.d(n,{run:()=>s});var a=e(517),r=e(166),o=e(3),i=e(742);const s=(t,n,e)=>{const s=a5_0x50b7;(0,i.ap)(e,s(401));const h=e[s(401)][s(395)],c=e[s(401)][s(383)],u=e[s(401)][s(381)],l=e[s(377)],d=4*(e.y*c+e.x),b=h[s(385)](d,d+4).slice(),p=e.selection||(0,o.DI)(c,u),x=(0,r.Qf)(e.targetImage,p);if(n[s(403)](.1),e[s(397)]){const t=Math.ceil(p.bottom+(p.bottom-p[s(390)])*(2/8));let e=0;for(let r=p.top;r<p.bottom;r++){for(let t=p[s(396)];t<p[s(398)];t++)e=4*(r*c+t),f(h,e,b)&&(0,a.B)(s(392),h,e,l,0);n.update(+((r-p[s(390)])/t)[s(393)](2)+.1)}}else{const t=Math[s(366)](1.25*h.length);for(let e=0;e<h[s(370)];e+=4)f(h,e,b)&&(0,a.B)(s(392),h,e,l,0),e%5e3==0&&n[s(403)](+(e/t)[s(393)](2)+.1)}return n[s(403)](.9),{undoData:x,redoData:(0,r.Qf)(e.targetImage,p),range:p}};function f(t,n,e){return t[n]===e[0]&&t[n+1]===e[1]&&t[n+2]===e[2]&&t[n+3]===e[3]}},742:(t,n,e)=>{"use strict";function a(t,n){const e=a5_0x50b7,a=t[n];if(a.width<1||a[e(381)]<1)throw new Error(e(372)+n+'": '+a[e(383)]+e(369)+a.height)}function r(t,n,e){const a=a5_0x50b7,r=t[n],o=t[e];if(r.width===o[a(383)]&&r.height===o[a(381)])throw new Error(a(367)+n+a(374)+e+a(399))}e.d(n,{ap:()=>a,TO:()=>r})},517:(t,n,e)=>{"use strict";const a=a5_0x3f8a60;e.d(n,{B:()=>s});const r=new Float32Array(6);let o;const i={normal:(t,n)=>n,darken:(t,n)=>Math[a(375)](t,n),multiply:(t,n)=>t*n,linearBurn:(t,n)=>Math[a(373)](t+n-1,0),lighten:(t,n)=>Math.max(t,n),screen:(t,n)=>1-(1-t)*(1-n),linearDodgeAdd:(t,n)=>Math[a(375)](t+n,1),overlay:(t,n)=>t<.5?2*t*n:1-2*(1-t)*(1-n),softLight:(t,n)=>n<.5?2*t*n+t*t*(1-2*n):Math.sqrt(t)*(2*n-1)+2*t*(1-n),difference:(t,n)=>Math[a(364)](t-n),exclusion:(t,n)=>t+n-2*t*n};function s(t,n,e,s,h,c=n,u=e){const l=a;return r[0]=s[h+3]/255,0===r[0]?(n[e]=c[u],n[e+1]=c[u+1],n[e+2]=c[u+2],void(n[e+3]=c[u+3])):(r[1]=c[u+3]/255,0===r[1]?(n[e]=s[h],n[e+1]=s[h+1],n[e+2]=s[h+2],void(n[e+3]=s[h+3])):(o=i[t],r[3]=o(c[u]/255,s[h]/255),r[4]=o(c[u+1]/255,s[h+1]/255),r[5]=o(c[u+2]/255,s[h+2]/255),r[2]=r[0]+r[1]*(1-r[0]),n[e]=Math[l(376)](f(c[u]/255,r[1],s[h]/255,r[0],r[3])/r[2]*255),n[e+1]=Math[l(376)](f(c[u+1]/255,r[1],s[h+1]/255,r[0],r[4])/r[2]*255),n[e+2]=Math.round(f(c[u+2]/255,r[1],s[h+2]/255,r[0],r[5])/r[2]*255),void(n[e+3]=Math[l(376)](255*r[2]))))}function f(t,n,e,a,r){return(n-n*a)*t+(a-n*a)*e+n*a*r}},166:(t,n,e)=>{"use strict";function a(t,n){const e=a5_0x50b7,a=n[e(371)]-n[e(390)],r=n[e(398)]-n[e(396)],o=new Uint8Array(r*a*4);let i=0,s=0;for(let f=0;f<a;f++)s=f+n[e(390)],i=4*(s*t[e(383)]+n.left),o[e(400)](t[e(395)][e(385)](i,i+4*r),f*r*4);return o}function r(t,n,e,a,r=!0){const o=a5_0x50b7;if(!r&&n<a&&t<e)return{left:Math.round((e-t)/2),top:Math[o(376)]((a-n)/2),width:t,height:n};const i={left:0,top:0,width:e,height:a};if(n>t){const a=t/n;i[o(396)]=Math[o(376)](e*(.5-a/2)),i[o(383)]=Math[o(376)](e*a)}else if(t>n){const e=n/t;i[o(390)]=Math.round(a*(.5-e/2)),i[o(381)]=Math[o(376)](a*e)}return i}e.d(n,{Qf:()=>a,M_:()=>r})},3:(t,n,e)=>{"use strict";function a(t,n){return{left:t,top:n,right:t+1,bottom:n+1}}function r(t,n){return{left:0,top:0,right:t,bottom:n}}function o(t,n,e){const a=a5_0x50b7;if(function(t){const n=a5_0x50b7;return t[n(396)]===t[n(398)]||t[n(390)]===t.bottom}(t))return t[a(396)]=n,t.right=n+1,t.top=e,void(t[a(371)]=e+1);t[a(396)]=Math[a(375)](t[a(396)],n),t[a(390)]=Math.min(t[a(390)],e),t[a(398)]=Math[a(373)](t[a(398)],n+1),t.bottom=Math.max(t.bottom,e+1)}function i(t,n,e){const a=a5_0x50b7;return n>=t[a(396)]&&n<t.right&&e>=t[a(390)]&&e<t[a(371)]}e.d(n,{Re:()=>a,DI:()=>r,Hv:()=>o,RB:()=>i})}}]);