const a6_0x7c2e=["requestRender","push","_outlineModel","Blend Mode","Eraser","_updateOutline","containsCoord","style","setAttribute","order","_onRequestRender","_onHistoryUpdateValue","stroke","787316PgmlTs","pointerUp","string","softLight","_viewportService","width","exclusion","right","_svg","Could not create extended edit","_sc","onUpdate","drawCircle","min"," h-","version","fire","2540hUTkCr","strokeWidth","value","path","http://www.w3.org/2000/svg","pointerDown","getCoordsFromEvent","onHistoryUpdateValue","left","round","_value","top","event","lighten","createElementNS","linearBurn","commit","overlay","setValueFromHistoryChange","linearDodgeAdd","510077CiHnuG","height","currentLayer","#000","abs","multiply","_svgInnerPath","max","1.1","onRequestRender","clientWidth","display","removeChild","options","_drawLine","pointerDownMove","none","_container","normal","toString","_lastCoord","1HaKszL","viewportService","svg","darken","_svgPath","302997SsxuPp","zoom","88409IBdCzN","floor","range","block","screen","_brushSizeOption","difference","_getEdit","pointerMove","render","absolute","selectionService","_onUpdate","_imageService","#fff","_edit","register","211606prUFqq","replace","1tcoDtd","createDomRenderProgram","appendChild","2142JPvpJS","webpackChunkluna","210zRawMp","bottom"," v-","imageService"],a6_0x4456=function(t,s){return a6_0x7c2e[t-=185]},a6_0x4df2b8=a6_0x4456;(function(t,s){const e=a6_0x4456;for(;;)try{if(256153===parseInt(e(238))*-parseInt(e(236))-parseInt(e(186))+parseInt(e(272))+-parseInt(e(212))*-parseInt(e(233))+parseInt(e(231))+parseInt(e(207))*-parseInt(e(214))+parseInt(e(255)))break;t.push(t.shift())}catch(s){t.push(t.shift())}})(a6_0x7c2e),(self.webpackChunkluna=self[a6_0x4df2b8(237)]||[])[a6_0x4df2b8(243)]([[996],{3315:(t,s,e)=>{"use strict";const i=a6_0x4df2b8;e.d(s,{d:()=>o});var n=e(5120),r=e(1674);class o extends n.JT{constructor(t,s,e,i){const n=a6_0x4456;super(),this[n(203)]=t,this[n(227)]=s,this[n(259)]=e,this._model=i,this[n(251)]=2,this[n(263)]=document[n(286)](r.q,n(209)),this._svg[n(250)](n(270),n(194)),this[n(263)][n(249)].position=n(224),this._svgInnerPath=document[n(286)](r.q,n(275)),this[n(192)].style.stroke=n(228),this[n(192)].style[n(273)]="1",this._svgInnerPath[n(249)].fill="none",this[n(211)]=document[n(286)](r.q,n(275)),this[n(211)].style[n(254)]=n(189),this[n(211)].style[n(273)]="1",this[n(211)].style.fill="none",this._svg.append(this[n(211)],this[n(192)]),this[n(203)][n(235)](this[n(263)]),this[n(230)]({dispose:()=>this[n(203)][n(198)](this[n(263)])})}[i(223)](){const t=i,s=this._model[t(216)],e=this[t(259)];if(!s||e.zoom<4)return void(this[t(263)][t(249)][t(197)]=t(202));this[t(263)][t(249)][t(197)]=t(217);const n=this[t(227)][t(188)];if(!n)return;const r=Math[t(281)](this[t(203)][t(196)]/2)-n[t(260)]/2*e[t(213)]+e.x*e[t(213)],o=Math[t(281)](this[t(203)].clientHeight/2)-n[t(187)]/2*e.zoom+e.y*e[t(213)],h=(s[t(262)]-s.left)*e[t(213)],a=(s[t(239)]-s[t(283)])*e[t(213)];this[t(263)][t(249)][t(280)]=r+s.left*e[t(213)]-2+"px",this._svg[t(249)][t(283)]=o+s[t(283)]*e[t(213)]-2+"px",this[t(263)][t(250)](t(260),(h+5).toString()),this[t(263)].setAttribute("height",(a+5)[t(205)]()),this[t(192)][t(250)]("d","M1.5 1.5 h"+(h+2)+" v"+(a+2)+" h-"+(h+2)+t(240)+(a+2)),this._svgPath[t(250)]("d","M0.5 0.5 h"+(h+4)+" v"+(a+4)+t(269)+(h+4)+t(240)+(a+4))}}},9904:(t,s,e)=>{"use strict";const i=a6_0x4df2b8;e.d(s,{rP:()=>o,bG:()=>h,Jp:()=>a,qv:()=>c});var n=e(1815),r=e(5120);class o extends r.JT{constructor(t,s,e){const i=a6_0x4456;super(),this.name=t,this[i(199)]=s,this._value=e,this.type=i(257),this[i(253)]=this.register(new n.v),this[i(279)]=this[i(253)][i(284)],this._onUpdate=this[i(230)](new n.v),this[i(266)]=this[i(226)][i(284)]}get[i(274)](){return this[i(282)]}set value(t){const s=i;this[s(282)]=t,this[s(226)][s(271)]()}[i(290)](t){const s=i;this[s(282)]=t,this._onHistoryUpdateValue[s(271)](t)}}class h extends o{constructor(){const t=i;super(t(245),[t(204),t(210),t(191),t(287),t(285),"screen","linearDodgeAdd",t(289),t(258),"difference",t(261)],t(204))}}class a extends o{constructor(){const t=i;super(t(245),["normal",t(232),t(210),t(191),t(287),"lighten",t(218),t(185),"overlay",t(258),t(220),t(261)],"normal")}}class c extends r.JT{constructor(t,s,e,r){const o=i;super(),this.name=t,this[o(282)]=s,this[o(268)]=e,this[o(193)]=r,this.type="number",this[o(253)]=this.register(new n.v),this[o(279)]=this[o(253)][o(284)],this._onUpdate=this[o(230)](new n.v),this.onUpdate=this._onUpdate[o(284)]}get[i(274)](){return this._value}set[i(274)](t){const s=i;this[s(282)]=t,this[s(226)].fire()}setValueFromHistoryChange(t){const s=i;this[s(282)]=t,this._onHistoryUpdateValue[s(271)](t)}}},2996:(t,s,e)=>{"use strict";const i=a6_0x4df2b8;e.r(s),e.d(s,{default:()=>p});var n=e(1815),r=e(5120),o=e(3315),h=e(9904);const a=new Float32Array([0,0,0,0]);class c extends r.JT{constructor(t){const s=a6_0x4456;super(),this[s(265)]=t,this.id="eraser",this[s(219)]=new h.qv("Brush Size",1,1,1e3),this[s(199)]=[this[s(219)]],this._outlineModel={range:void 0},this[s(252)]=this[s(230)](new n.v),this[s(195)]=this[s(252)].event}[i(234)](t){const s=i;return new o.d(t,this[s(265)][s(241)],this[s(265)].viewportService,this._outlineModel)}[i(277)](t){const s=i,e=this[s(265)][s(241)];if(!e[s(188)])return;const n=this[s(265)][s(208)][s(278)](t);if(n){if(e[s(248)](n[0],n[1])){const t=this._getEdit();u(this[s(221)](),n[0],n[1],a,this[s(219)].value,e,this._sc[s(225)]),t[s(242)]()}this._lastCoord=n}}[i(222)](t){const s=i;if(!this[s(265)][s(241)].currentLayer)return;const e=this._sc.viewportService[s(278)](t);this[s(247)](e)}[i(247)](t){const s=i;if(this[s(265)][s(241)][s(188)]&&(this[s(244)][s(216)]?.[s(280)]!==t[0]||this[s(244)].range?.[s(283)]!==t[1])){if(this[s(265)].imageService[s(248)](t[0],t[1])){const e=(this[s(219)][s(274)]-1)/2;this[s(244)][s(216)]={left:t[0]-Math[s(215)](e),top:t[1]-Math[s(215)](e),right:t[0]+Math.ceil(e)+1,bottom:t[1]+Math.ceil(e)+1}}else this[s(244)][s(216)]=void 0;this[s(252)][s(271)]()}}[i(201)](t){const s=i;if(!this[s(206)])return;const e=this._sc[s(241)];if(!e[s(188)])return;const n=this._sc.viewportService[s(278)](t);(e[s(248)](n[0],n[1])||e[s(248)](this[s(206)][0],this[s(206)][1]))&&this[s(200)](this[s(206)],n,a),this[s(206)]=n}async[i(256)](){const t=i;this._sc.imageService[t(188)]&&(this[t(229)]?.[t(288)](t(246)),this._edit=void 0),this[t(206)]=void 0}[i(200)](t,s,e){const n=i,r=this._getEdit();(function(t,s,e,n,r,o,h,a,c){const u=i;Math[u(190)](a-o)<Math[u(190)](h-r)?r>h?d(t,s,e,n,h,a,r,o,c):d(t,s,e,n,r,o,h,a,c):o>a?l(t,s,e,n,h,a,r,o,c):l(t,s,e,n,r,o,h,a,c)})(r,this[n(265)][n(241)],this[n(265)][n(225)],e,t[0],t[1],s[0],s[1],this[n(219)][n(274)]),r[n(242)]()}[i(221)](){const t=i;if(!this[t(229)]&&(this[t(229)]=this[t(265)][t(241)][t(188)]?.createExtendedEdit(),!this[t(229)]))throw new Error(t(264));return this[t(229)]}}function d(t,s,e,i,n,r,o,h,a){const c=o-n;let d=h-r,l=1;d<0&&(l=-1,d=-d);let p=2*d-c,v=r;for(let r=n;r<=o;r++)u(t,r,v,i,a,s,e),p>0?(v+=l,p+=2*(d-c)):p+=2*d}function l(t,s,e,i,n,r,o,h,a){let c=o-n;const d=h-r;let l=1;c<0&&(l=-1,c=-c);let p=2*c-d,v=n;for(let n=r;n<=h;n++)u(t,v,n,i,a,s,e),p>0?(v+=l,p+=2*(c-d)):p+=2*c}function u(t,s,e,n,r,o,h){const a=i;h.containsCoord(s,e)&&o[a(248)](s,e)&&t[a(267)](s,e,r,!0,n)}const p=c},1674:(t,s,e)=>{"use strict";const i=a6_0x4df2b8;e.d(s,{q:()=>n});const n=i(276)}}]);