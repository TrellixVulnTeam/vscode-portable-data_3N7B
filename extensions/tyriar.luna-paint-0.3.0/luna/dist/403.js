const a9_0x55db=["state","ctrlKey","_setVisible","455034FZAjMA","viewportService","classList","imageService","pointerDown","webpackChunkluna","1NVdtSF","push","right","pointerMove","onStateChange","_onStateChange","left","zoom","_elementContainer","clientHeight","height","key","bottomright","currentLayer","ArrowDown","style","467948xmKeZW","topleft","display","offsetX","createDomRenderProgram","pointerDownMove","set","_renderer","removeChild","get","min","_imageService","topright","selectionService","appendChild","110tXgCcc","_directionalMoveZones","ArrowUp","_directionalMoveElements","_selectionService","4711327DtZvqr","ArrowRight","clientWidth","779802RdSRnC","bottom","ArrowLeft","_cursorOrigin","getCoordsFromEvent","round","_sc","width","setTopLeft","move-handle","1166TAUpYH","slice","event","order","selectAll","move","register","_container","6113hypviC","Move Selection","bottomleft","pointerUp","offsetY","1217563iBKGLD","top","415jVMaWU","range","max","_originalSelection","_isCursorDown","_isVisible","render","moveSelection","isSelectionTool","_cursorCurrent","onUpdate","createElement"],a9_0x5a9e=function(t,e){return a9_0x55db[t-=125]},a9_0x417ef1=a9_0x5a9e;(function(t,e){const s=a9_0x5a9e;for(;;)try{if(634660===parseInt(s(156))*-parseInt(s(182))-parseInt(s(204))-parseInt(s(164))+-parseInt(s(125))*parseInt(s(187))+parseInt(s(189))*-parseInt(s(174))-parseInt(s(141))+parseInt(s(161)))break;t.push(t.shift())}catch(e){t.push(t.shift())}})(a9_0x55db),(self[a9_0x417ef1(209)]=self.webpackChunkluna||[])[a9_0x417ef1(126)]([[403],{403:(t,e,s)=>{"use strict";const i=a9_0x417ef1;s.r(e),s.d(e,{default:()=>c});var o=s(1815),n=s(5120),r=s(1003);class h extends n.JT{constructor(t){const e=a9_0x5a9e;super(),this[e(170)]=t,this.id=e(196),this[e(197)]=!0,this.state=e(179),this[e(193)]=!1,this[e(130)]=this[e(180)](new o.v),this[e(129)]=this[e(130)][e(176)]}[i(208)](t){const e=i;this[e(193)]=!0,!this[e(170)][e(154)].range&&this[e(170)].selectionService.selectAll(),this[e(167)]=this._sc[e(205)][e(168)](t),this[e(198)]=this[e(167)][e(175)](),this[e(192)]=this._sc[e(154)][e(190)]}[i(185)](t){const e=i;this[e(193)]=!1,this[e(170)][e(154)][e(190)]&&this[e(170)][e(154)].commit(e(183),"moveSelection")}[i(128)](t){const e=i;if(this._renderer&&!this._isCursorDown){const s=this[e(148)].getPointerState(t);this[e(201)]!==s&&(this[e(201)]=s,this[e(130)].fire())}}[i(146)](t){const e=i;if(!this[e(170)][e(154)].range||!this[e(167)]||!this[e(192)])return;this[e(198)]=this[e(170)].viewportService[e(168)](t);const s=this[e(198)][0]-this[e(167)][0],o=this[e(198)][1]-this[e(167)][1];if(this.state===e(179))return void this[e(170)][e(154)][e(172)](this[e(192)][e(131)]+s,this._originalSelection[e(188)]+o);const n=(0,r.BN)(this[e(192)]);switch(this[e(201)]){case e(142):n.left+=s,n[e(188)]+=o;break;case e(153):n[e(127)]+=s,n[e(188)]+=o;break;case e(184):n[e(131)]+=s,n[e(165)]+=o;break;case e(137):n[e(127)]+=s,n[e(165)]+=o;break;case"top":n[e(188)]+=o;break;case"bottom":n[e(165)]+=o;break;case"left":n.left+=s;break;case"right":n.right+=s}this[e(170)][e(154)][e(190)]=(0,r.FJ)(n)}keyDown(t){const e=i;if(!this[e(170)][e(207)])return;let s=this._sc[e(154)][e(190)];!s&&(this[e(170)].selectionService[e(178)](),s=this._sc[e(154)][e(190)]);const o=t[e(202)]?10:1;switch(t[e(136)]){case e(158):this[e(170)][e(154)][e(172)](s.left,s[e(188)]-o);break;case e(139):this[e(170)][e(154)][e(172)](s.left,s[e(188)]+o);break;case e(166):this._sc[e(154)][e(172)](s[e(131)]-o,s.top);break;case e(162):this[e(170)][e(154)][e(172)](s[e(131)]+o,s[e(188)])}}[i(145)](t){const e=i;return this[e(148)]=new a(t,this[e(170)].selectionService,this[e(170)][e(205)],this[e(170)][e(207)]),this._renderer}}const c=h;class a extends n.JT{constructor(t,e,s,o){const n=i;super(),this[n(181)]=t,this._selectionService=e,this._viewportService=s,this[n(152)]=o,this[n(177)]=2,this[n(159)]=new Map,this[n(157)]=new Map,this[n(194)]=!0,this[n(133)]=document[n(200)]("div");const h=["topleft",n(153),n(184),n(137),n(188),n(165),"left","right"];for(const t of h){const e=document[n(200)]("div");e[n(206)].add(n(173)),this[n(133)].appendChild(e),this[n(159)][n(147)](t,e),this[n(157)][n(147)](t,(0,r.Pq)())}this._container[n(155)](this[n(133)]),this.register({dispose:()=>{const t=n;this[t(181)][t(149)](this[t(133)])}}),this[n(160)][n(199)]((()=>this[n(203)](void 0!==this[n(160)][n(190)]))),this[n(203)](void 0!==this[n(160)][n(190)])}[i(203)](t){const e=i;t!==this._isVisible&&(this[e(133)][e(140)][e(143)]=t?"":"none",this[e(194)]=t)}[i(195)](){const t=i,e=this._selectionService[t(190)];if(!e)return;const s=this[t(152)][t(138)];if(!s)return;const o=this._viewportService,n=Math[t(169)](this[t(181)][t(163)]/2)-s[t(171)]/2*o[t(132)],r=Math[t(169)](this[t(181)][t(134)]/2)-s[t(135)]/2*o[t(132)],h=n+(o.x+e[t(131)])*o[t(132)],c=r+(o.y+e[t(188)])*o[t(132)],a=n+(o.x+e[t(127)])*o[t(132)],l=r+(o.y+e[t(165)])*o[t(132)],p=Math[t(169)]((h+a)/2),f=Math.round((c+l)/2),d=10*window.devicePixelRatio,_={left:Math.min(h+d,Math[t(191)](h,p-d)),top:Math[t(151)](c+d,Math[t(191)](c,f-d)),right:Math[t(191)](a-d,Math[t(151)](a,p+d)),bottom:Math.max(l-d,Math[t(151)](l,f+d))},v={left:h-d,top:c-d,right:a+d,bottom:l+d},g=this._directionalMoveZones.get("topleft");g[t(131)]=v.left,g[t(127)]=_.left,g[t(188)]=v.top,g[t(165)]=_[t(188)];const u=this[t(159)][t(150)](t(142));u[t(140)].left=h+"px",u[t(140)][t(188)]=c+"px";const x=this[t(157)][t(150)]("topright");x[t(131)]=_[t(127)],x[t(127)]=v.right,x.top=v[t(188)],x[t(165)]=_[t(188)];const m=this[t(159)].get(t(153));m[t(140)][t(131)]=a+"px",m[t(140)][t(188)]=c+"px";const b=this[t(157)][t(150)](t(184));b[t(131)]=v[t(131)],b.right=_[t(131)],b[t(188)]=_[t(165)],b.bottom=v[t(165)];const w=this[t(159)][t(150)](t(184));w[t(140)].left=h+"px",w[t(140)][t(188)]=l+"px";const S=this[t(157)][t(150)]("bottomright");S[t(131)]=_.right,S[t(127)]=v[t(127)],S.top=_[t(165)],S[t(165)]=v[t(165)];const M=this[t(159)][t(150)](t(137));M[t(140)].left=a+"px",M[t(140)][t(188)]=l+"px";const k=this[t(157)][t(150)](t(188));k.left=_[t(131)],k[t(127)]=_[t(127)],k[t(188)]=v[t(188)],k[t(165)]=_[t(188)];const C=this[t(159)].get(t(188));C[t(140)][t(131)]=p+"px",C.style[t(188)]=c+"px";const y=this[t(157)][t(150)](t(165));y[t(131)]=_[t(131)],y[t(127)]=_[t(127)],y[t(188)]=_[t(165)],y.bottom=v[t(165)];const I=this[t(159)][t(150)](t(165));I[t(140)][t(131)]=p+"px",I[t(140)][t(188)]=l+"px";const A=this[t(157)][t(150)](t(131));A[t(131)]=v.left,A[t(127)]=_[t(131)],A[t(188)]=_[t(188)],A[t(165)]=_[t(165)];const D=this[t(159)].get(t(131));D[t(140)][t(131)]=h+"px",D[t(140)][t(188)]=f+"px";const Z=this[t(157)][t(150)](t(127));Z[t(131)]=_[t(127)],Z[t(127)]=v[t(127)],Z[t(188)]=_.top,Z[t(165)]=_.bottom;const L=this[t(159)][t(150)](t(127));L.style.left=a+"px",L[t(140)].top=f+"px"}getPointerState(t){const e=i;for(const[s,i]of this._directionalMoveZones)if(l(i,t[e(144)],t[e(186)]))return s;return e(179)}}function l(t,e,s){const o=i;return e>=t[o(131)]&&e<t[o(127)]&&s>=t[o(188)]&&s<t[o(165)]}}}]);