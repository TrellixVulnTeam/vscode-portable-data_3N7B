const a13_0x1c8f=["_lengthInfo","_resizeStrokeB"," 0z","Set Line Blend Mode","offsetX","paletteService","round","temporaryLayer","_pointA","getInfo","onRequestRender","svg","ArrowLeft","primary","Set Line Brush Size","lighten","stroke","min","setAttribute","taskWorkerService","forceSolid","_downPointB"," pixels tall","sin","_renderer","createDomRenderProgram","allowUnchecking","difference","text","type","isVisible","setColors","currentState","angle","zone","onHistoryAction","333070WfrlTG","_svgPath","pow","_sizeInfo","webpackChunkluna","clientWidth","fire","getPointerState","ArrowUp","sqrt","block","_value","classList","primaryColor","rgba","_angleInfo","devicePixelRatio","visible","310045jKDoRo","onTemporaryLayerRegistered","_setState","move","onHistoryUpdateValue","onCommit","Enable","append","linearBurn","max","_syncOutlineModelToLayer","step","_setPointPosition","normal","169651TnLTqf","2FfManf","Brush Size","snapToPixelGrid","startsWith","Disable","key","new","screen","_brushSizeOption","_onUpdate","Line top left position is x=","secondaryColor","softLight","_topLeft","_cursorInfo","_onHistoryUpdateValue","order","altKey","top","_pointB","register","event","pointerDownMove","resize-stroke-b-ns","strokeWidth","setValueFromHistoryChange","_refreshInfo","info","display","size","length","textContent"," Line Smoothing","_updateOutline","clientHeight","resize-stroke-b-ew","_getCoords","_elementContainer","registerTemporaryLayer","state","imageService","resize-stroke-b-nwse","_getClosestSnapDegrees","_container","getDetailedInfo","floor","height","_smoothingOption","point","bottom","buttons","path","pointerDown","_finish","div","multiply","_clearLineLayer","join","left","replace","_updateBlendMode","Adjust Line","overlay","transparent","deserialize","right","Shift Line","value","push","getColorFromPointerEvent","_updateSmoothing","Line angle is ","_angle","12995PnCfNq","_setupActiveTemporaryLayer","getCoordsFromEvent"," pixels wide by ","add","resize-stroke-a-nesw","87425anZqfH","_topLeftInfo","_isShiftDown","Smoothing","_downCoord","18719KCCUwU","createElementNS","createElement","smoothing","abs","_resizeStrokeA","_imageService","dispose","_cursorCoord","127613rdhQpU","pointA","number","width","range","slice","ArrowRight","resize-stroke-a-ns","_svg","configService","name","reduce","_getTopLeft","Move Line","taskService","Blend Mode","l0 ","none","map","_hideCursorInfo","_getLineLength","ArrowDown","62fcbDhr","_range","_onOptionsChange","_updateCursorInfo","boolean","_shiftPoints","viewportService","style","_downPointA","isValid","setVisible","string","_element","resize-stroke-a-ew","_blendModeOption","render","resize-stroke-b-nesw","_viewportService","Line is ","onUpdate","cos","line","options","topLeft","keyDown","_lineLayerOwner","toString","element","var(--luna-focusColor)","_onRequestRender","triggerRequestRender","_color","currentLayer","offsetY"," pixels long","blendMode","zoom","historyService","secondary","move-point-a","move-handle","removeChild","lineLayer","55DuSpoR","_model","_getAngle","_onStateChange","appendChild","move-point-b","_sc","Draw Line","onBeforeRunLayerTask","pointerUp","_updateBrushSize","shiftKey","_isVisible","_outlineModel","pointerMove","onStateChange","pointB","commit","metaKey"],a13_0x3acb=function(t,s){return a13_0x1c8f[t-=364]},a13_0x285483=a13_0x3acb;(function(t,s){const i=a13_0x3acb;for(;;)try{if(797717===-parseInt(i(550))+-parseInt(i(551))*-parseInt(i(518))+parseInt(i(384))+parseInt(i(378))*parseInt(i(420))+parseInt(i(389))*-parseInt(i(463))+parseInt(i(398))+parseInt(i(536)))break;t.push(t.shift())}catch(s){t.push(t.shift())}})(a13_0x1c8f),(self[a13_0x285483(522)]=self[a13_0x285483(522)]||[]).push([[844],{7571:(t,s,i)=>{"use strict";const e=a13_0x285483;i.d(s,{P:()=>n});var h=i(5120);class n extends h.JT{constructor(t,s){const i=a13_0x3acb;super(),this._container=t,this._model=s,this[i(567)]=2,this[i(432)]=document[i(391)]("div"),this[i(432)][i(530)].add("cursor-info"),this[i(594)].appendChild(this[i(432)]),this.register({dispose:()=>this[i(594)].removeChild(this._element)})}[e(435)](){const t=e;this[t(432)].style[t(579)]=this[t(464)][t(512)]?t(528):t(415),this[t(432)][t(427)][t(609)]=this[t(464)].x+"px",this[t(432)][t(427)].top=this[t(464)].y+"px",this[t(432)][t(582)]=this[t(464)].text}}},566:(t,s,i)=>{"use strict";const e=a13_0x285483;i.d(s,{d:()=>r,I:()=>a});var h=i(1019),n=i(5120),o=i(1674);class r extends n.JT{constructor(t,s,i,e){const h=a13_0x3acb;super(),this[h(594)]=t,this._imageService=s,this[h(437)]=i,this[h(464)]=e,this[h(567)]=2,this[h(406)]=document.createElementNS(o.q,h(493)),this._svgPath=document[h(390)](o.q,h(602)),this[h(519)][h(427)][h(498)]=h(448),this[h(519)][h(427)].fill=h(368),this[h(519)][h(427)][h(575)]="1",this[h(406)][h(543)](this[h(519)]),this._container.prepend(this[h(406)]),this.register({dispose:()=>this[h(594)][h(461)](this[h(406)])})}[e(435)](){const t=e,s=this[t(437)];if(!this[t(464)][t(429)]||!this._imageService[t(452)])return void(this[t(406)][t(427)].display=t(415));if(this[t(406)][t(427)][t(579)]=t(528),!this[t(464)].forceSolid&&this[t(464)][t(575)]<=1&&s[t(456)]>=3){const i=[];(0,h.j)(void 0,this._model.x1,this[t(464)].y1,this[t(464)].x2,this._model.y2,((t,s)=>i.push([t,s])),!1,this._model[t(575)]);const e=[];let n=0;for(;n<i[t(581)]-1;n++){const s=i[n];let h=n;if(s[0]===i[h+1][0]){for(;h+1<i.length&&s[0]===i[h+1][0];)h++;e[t(373)]([s[0],s[1],1,h-n+1])}else if(s[1]===i[h+1][1]){for(;h+1<i[t(581)]&&s[1]===i[h+1][1];)h++;e[t(373)]([s[0],s[1],h-n+1,1])}else e[t(373)]([s[0],s[1],1,1]);n=h}n===i[t(581)]-1&&e[t(373)]([i[n][0],i[n][1],1,1]);const o=Math.round(this[t(594)][t(523)]/2)-this[t(395)].width/2*s.zoom+s.x*s[t(456)],r=Math[t(488)](this._container[t(585)]/2)-this[t(395)].height/2*s.zoom+s.y*s[t(456)];let a="";for(const i of e)a+="M"+(o+i[0]*s.zoom)+" "+(r+i[1]*s[t(456)]),a+="l"+i[2]*s[t(456)]+" 0",a+=t(414)+i[3]*s[t(456)],a+="l-"+i[2]*s[t(456)]+t(484);return this[t(406)][t(500)](t(401),this._container[t(523)].toString()),this[t(406)][t(500)]("height",this._container[t(585)][t(446)]()),void this[t(519)][t(500)]("d",a)}this[t(406)][t(427)][t(579)]=t(528);const i=Math[t(488)](this[t(594)][t(523)]/2)-this._imageService[t(401)]/2*s[t(456)]+s.x*s[t(456)],n=Math.round(this[t(594)][t(585)]/2)-this[t(395)].height/2*s[t(456)]+s.y*s.zoom,o=i+(this[t(464)].x1+.5)*s.zoom,r=n+(this._model.y1+.5)*s[t(456)],a=i+(this._model.x2+.5)*s[t(456)],c=n+(this[t(464)].y2+.5)*s.zoom;if(this[t(406)][t(500)](t(401),this[t(594)].clientWidth[t(446)]()),this[t(406)][t(500)]("height",this[t(594)][t(585)].toString()),s[t(456)]>=3){const i=(0,h.X)(o,r,a,c,this._model[t(575)],s.zoom);this[t(519)].setAttribute("d","M"+i[t(416)]((t=>t.x+","+t.y))[t(608)](" L")+"z")}else this[t(519)][t(500)]("d","M"+o+","+r+" L"+a+","+c)}}class a{constructor(){const t=e;this[t(429)]=!1,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.strokeWidth=1,this[t(502)]=!1}}},9865:(t,s,i)=>{"use strict";i.d(s,{q:()=>n});var e=i(1815),h=i(5120);class n extends h.JT{constructor(){const t=a13_0x3acb;super(...arguments),this._onUpdate=this[t(571)](new e.v),this[t(439)]=this[t(560)][t(572)]}}},9904:(t,s,i)=>{"use strict";const e=a13_0x285483;i.d(s,{FV:()=>r,rP:()=>a,tv:()=>c,Jp:()=>l,X5:()=>u,qv:()=>d});var h=i(1815),n=i(5120),o=i(2939);class r extends n.JT{constructor(t,s,i,e=!0){const n=a13_0x3acb;super(),this.name=t,this.hasImage=s,this[n(529)]=i,this[n(508)]=e,this[n(511)]=n(424),this._onHistoryUpdateValue=this[n(571)](new h.v),this[n(540)]=this._onHistoryUpdateValue[n(572)],this._onUpdate=this[n(571)](new h.v),this[n(439)]=this[n(560)][n(572)]}get value(){return this._value}set[e(372)](t){const s=e;this[s(529)]=t,this[s(560)][s(524)]()}[e(576)](t){this._value=t,this._onHistoryUpdateValue.fire(t)}}class a extends n.JT{constructor(t,s,i){const n=e;super(),this.name=t,this[n(442)]=s,this._value=i,this[n(511)]=n(431),this[n(566)]=this[n(571)](new h.v),this[n(540)]=this[n(566)][n(572)],this[n(560)]=this[n(571)](new h.v),this[n(439)]=this[n(560)].event}get value(){return this[e(529)]}set[e(372)](t){const s=e;this[s(529)]=t,this[s(560)][s(524)]()}setValueFromHistoryChange(t){const s=e;this[s(529)]=t,this[s(566)][s(524)](t)}}class c extends n.JT{constructor(t,s,i){const n=e;super(),this[n(408)]=t,this[n(442)]=s,this._value=i,this[n(511)]="string-combo",this[n(566)]=this[n(571)](new h.v),this[n(540)]=this._onHistoryUpdateValue.event,this[n(560)]=this[n(571)](new h.v),this[n(439)]=this._onUpdate[n(572)]}get[e(372)](){return this[e(529)]}set value(t){const s=e;this._value=t,this[s(560)][s(524)]()}[e(576)](t){const s=e;this[s(529)]=t,this._onHistoryUpdateValue[s(524)](t)}}class l extends a{constructor(){const t=e;super(t(413),["normal",t(364),"darken",t(606),t(544),t(497),"screen","linearDodgeAdd",t(367),t(563),t(509),"exclusion"],t(549))}}class u extends n.JT{constructor(t,s,i,n){const o=e;super(),this.name=t,this._value=s,this[o(499)]=i,this.max=n,this.type=o(400),this[o(566)]=this[o(571)](new h.v),this.onHistoryUpdateValue=this._onHistoryUpdateValue.event,this._onUpdate=this[o(571)](new h.v),this[o(439)]=this[o(560)][o(572)]}get value(){const t=e;return(0,o.u)(this._value,this[t(545)],this[t(499)])}set[e(372)](t){const s=e;this[s(529)]=t,this[s(560)][s(524)]()}[e(576)](t){const s=e;this[s(529)]=t,this._onHistoryUpdateValue[s(524)](t)}}class d extends u{constructor(t,s,i,h){const n=e;super(t,s,i,h),this[n(511)]="number"}get[e(372)](){const t=e;return(0,o.u)(this[t(529)],this[t(545)],this[t(499)])}set value(t){const s=e;this[s(529)]=Math[s(596)](t),this[s(560)].fire()}}},2844:(t,s,i)=>{"use strict";const e=a13_0x285483;i.r(s),i.d(s,{default:()=>m});var h=i(8752),n=i(1815),o=i(1019),r=i(5120),a=i(2939),c=i(7896),l=i(1003),u=i(9455);function d(t){if(void 0!==t)return{x:t.x,y:t.y}}var _=i(2811),y=i(7571),p=i(566),x=i(9865),f=i(9904);const g=[-180,-165,-150,-135,-120,-105,-90,-75,-60,-45,-30,-15,0,15,30,45,60,75,90,105,120,135,150,165,180];class v extends r.JT{constructor(t){const s=a13_0x3acb;super(),this[s(469)]=t,this.id=s(441),this[s(590)]=s(557),this[s(397)]=[0,0],this[s(386)]=!1,this._outlineModel=new p.I,this[s(434)]=new f.Jp,this[s(598)]=new f.FV(s(387),!0,!0),this[s(559)]=new f.X5(s(552),1,0,1e3),this[s(442)]=[this[s(434)],this._smoothingOption,this[s(559)]],this._topLeftInfo=new M,this[s(521)]=new w,this[s(482)]=new L,this[s(533)]=new S,this[s(578)]=[this[s(385)],this[s(521)],this[s(482)],this[s(533)]],this[s(449)]=this[s(571)](new n.v),this[s(492)]=this[s(449)][s(572)],this[s(466)]=this[s(571)](new n.v),this[s(478)]=this[s(466)][s(572)],this[s(565)]={x:0,y:0,text:"",isVisible:!1},this[s(571)](this._sc[s(591)].onLayerChange((()=>this[s(604)]()))),this.register(this[s(469)][s(412)][s(471)]((()=>this[s(604)]()))),this[s(571)]({dispose:()=>this._finish()}),this.register(this._sc[s(426)].onUpdate((()=>this[s(417)]()))),this[s(476)][s(502)]=this[s(598)][s(372)],this[s(571)](this[s(469)][s(487)][s(439)]((()=>this._updateColors()))),this[s(571)](this[s(434)][s(439)]((()=>this[s(365)]()))),this[s(571)](this[s(598)][s(439)]((()=>this[s(375)]()))),this.register(this[s(559)].onUpdate((()=>this[s(473)]()))),this[s(571)](this[s(469)][s(591)][s(537)]((t=>this._setupActiveTemporaryLayer(t)))),this._sc.imageService.currentLayer?.[s(489)]&&this[s(379)](this[s(469)][s(591)].currentLayer.temporaryLayer)}[e(379)](t){const s=e;"line"===t[s(511)]&&(this[s(462)]=t,this.register(this[s(462)][s(541)]((()=>this[s(607)]()))),this[s(571)](this[s(462)][s(517)]((()=>{const t=s;this[t(422)](),this[t(577)](),this[t(584)](null,!1),this[t(546)]()}))),this.register(this[s(462)].onHistoryUnset((()=>this[s(607)]()))),this[s(506)]?.[s(430)](!0),this._onRequestRender[s(524)]())}[e(422)](){const t=e;this.lineLayer&&(this._blendModeOption[t(576)](this.lineLayer[t(514)][t(455)]),this[t(559)][t(576)](this[t(462)][t(514)][t(575)]),this[t(598)][t(576)](this.lineLayer[t(514)][t(392)]),(!(0,h.WC)(this[t(469)][t(487)][t(495)][t(532)],this[t(462)][t(514)][t(531)])||!(0,h.WC)(this[t(469)].paletteService.secondary.rgba,this.lineLayer.currentState[t(562)]))&&this[t(469)].paletteService[t(513)](this[t(462)][t(514)].primaryColor,this.lineLayer[t(514)][t(562)]))}[e(473)](){const t=e,s=this[t(559)][t(372)];this[t(462)]&&this.lineLayer.currentState[t(575)]!==s&&(this[t(476)][t(575)]=s,this[t(462)][t(514)][t(575)]=s,this[t(462)][t(547)](t(496),!0),this[t(462)].triggerRequestRender())}_updateColors(){const t=e;if(!this[t(462)])return;const s=this[t(469)][t(487)][t(495)][t(532)],i=this._sc[t(487)].secondary[t(532)];(0,h.WC)(this[t(462)][t(514)][t(531)],s)&&(0,h.WC)(this.lineLayer[t(514)][t(562)],i)||(this[t(462)].currentState[t(531)]=s,this[t(462)][t(514)][t(562)]=i,this.lineLayer[t(547)]("Set Line Color",!0),this[t(462)][t(450)]())}_updateBlendMode(){const t=e,s=this[t(434)][t(372)];this[t(462)]&&this[t(462)][t(514)][t(455)]!==s&&(this[t(462)][t(514)].blendMode=s,this[t(462)][t(547)](t(485)),this[t(462)][t(450)]())}_updateSmoothing(){const t=e,s=this[t(598)][t(372)];this[t(462)]&&this.lineLayer[t(514)][t(392)]!==s&&(this[t(476)][t(502)]=s,this[t(462)][t(514)][t(392)]=s,this[t(462)][t(547)](t(s?542:555)+t(583)),this.lineLayer[t(450)]())}async _finish(){const t=e;await(this[t(462)]?.[t(480)]()),this[t(607)]()}[e(607)](){const t=e;this[t(462)]=void 0,this[t(506)]?.[t(430)](!1),this._outlineModel[t(429)]=!1,this[t(577)](),this[t(449)][t(524)]()}[e(507)](t){const s=e;return this[s(506)]=new C(t,this,this[s(469)][s(426)],this._sc[s(591)]),this[s(506)][s(430)](!!this[s(462)]),[new y.P(t,this._cursorInfo),new p.d(t,this[s(469)][s(591)],this[s(469)][s(426)],this[s(476)]),this[s(506)]]}async[e(603)](t){const s=e,i=this[s(469)][s(591)].currentLayer;if(!i)return;if(this[s(451)]=this._sc[s(487)][s(374)](t),!this[s(451)])return;if(this._downCoord=this[s(587)](t),this.state!==s(557))return this[s(428)]=d(this[s(462)]?.[s(514)].pointA),void(this[s(503)]=d(this.lineLayer?.[s(514)][s(479)]));this[s(397)]=[...this[s(388)]];const h=!(1&t[s(601)]);this.lineLayer=new _.B(i,{invertColors:h},{primaryColor:this[s(469)][s(487)][s(495)].rgba,secondaryColor:this[s(469)].paletteService[s(458)][s(532)],pointA:{x:this[s(388)][0],y:this._downCoord[1]},pointB:{x:this._cursorCoord[0],y:this[s(397)][1]},blendMode:this[s(434)].value,smoothing:this._smoothingOption.value,strokeWidth:this[s(559)].value},this[s(469)][s(457)],this[s(469)].selectionService,this._sc[s(501)]),this[s(584)](t,!0),await i[s(589)](this[s(462)])}_getCoords(t){const s=e;if(this[s(598)][s(372)]&&!this._sc[s(407)].config[s(553)]){const s=this._sc.viewportService.getFineCoordsFromEvent(t);return s[0]-=.5,s[1]-=.5,s}return this[s(469)][s(426)][s(380)](t)}[e(573)](t){const s=e;this._downCoord&&this[s(451)]&&this._sc[s(591)].currentLayer&&this[s(584)](t,!0)}async[e(472)](t,s){const i=e;if(this[i(590)]===i(557)&&s)return this[i(462)]&&this._sc[i(591)][i(452)]?.unregisterTemporaryLayer(this[i(462)]),this[i(462)]?.[i(396)](),void this[i(607)]();if(!this[i(388)]||!this[i(462)]||!this[i(451)])return;let h;switch(this[i(590)]){case i(557):h=i(470);break;case"move":h=i(411);break;default:h=i(366)}this[i(462)].currentState[i(399)].x=this._outlineModel.x1,this[i(462)].currentState[i(399)].y=this._outlineModel.y1,this.lineLayer[i(514)][i(479)].x=this[i(476)].x2,this[i(462)][i(514)][i(479)].y=this[i(476)].y2,this.lineLayer[i(547)](h),this[i(388)]=void 0,this[i(477)](t,!1)}async[e(477)](t,s){const i=e;this[i(565)].x=t[i(486)],this[i(565)].y=t[i(453)],this._cursorCoord=this[i(587)](t),s&&t[i(474)]?this._updateCursorInfo():this[i(565)][i(512)]&&this[i(417)](),!s&&this[i(506)]&&this._setState(this._renderer[i(525)](t,this[i(559)][i(372)],this._sc[i(426)][i(456)]))}[e(538)](t){const s=e;this[s(590)]!==t&&(this[s(590)]=t,this[s(466)][s(524)]())}[e(444)](t,s){const i=e;if(!this[i(386)]&&t[i(474)]&&(this[i(386)]=!0,this[i(584)](t,s)),this.lineLayer&&!s&&["ArrowUp",i(494),i(419),i(404)].includes(t.key)){const s=(c.V5?t[i(481)]:t.ctrlKey)?10:1;switch(t[i(556)]){case i(526):this[i(425)](0,-s);break;case i(419):this[i(425)](0,s);break;case i(494):this[i(425)](-s,0);break;case i(404):this[i(425)](s,0)}this[i(462)][i(547)](i(371)),this[i(462)][i(450)]()}this[i(577)]()}[e(425)](t,s){const i=e;this.lineLayer&&(this.lineLayer.currentState.pointA.x+=t,this.lineLayer[i(514)][i(399)].y+=s,this[i(462)][i(514)][i(479)].x+=t,this[i(462)][i(514)][i(479)].y+=s,this[i(476)].x1+=t,this[i(476)].y1+=s,this[i(476)].x2+=t,this[i(476)].y2+=s)}keyUp(t,s){const i=e;!t[i(474)]&&(this[i(386)]=!1,this[i(584)](t,s)),this[i(577)]()}_updateOutline(t,s){const i=e,h=this[i(462)]?.[i(514)][i(399)],n=this.lineLayer?.[i(514)][i(479)];if(!(s&&this._downCoord&&h&&n))return(!h||!n)&&(this[i(476)][i(429)]=!1),void this._refreshInfo();if(this[i(590)][i(554)]("resize-stroke")){const t=(h.x+n.x)/2,s=(h.y+n.y)/2;let e=2*Math.sqrt(Math.pow(t-this._cursorCoord[0],2)+Math.pow(s-this._cursorCoord[1],2));return e=!this._smoothingOption[i(372)]||this._sc[i(407)].config[i(553)]?Math.max(Math.round(e),1):(0,a.s)(e,2),this._brushSizeOption[i(372)]=e,this._brushSizeOption[i(576)](e),void this[i(577)]()}let o=this[i(590)]===i(468)?[n.x,n.y]:[h.x,h.y];const r=this[i(590)]===i(468)?[h.x,h.y]:[n.x,n.y];if(this[i(386)]&&this[i(590)]!==i(539)){const t=this[i(465)](r,o),s=(0,u.Ht)(this[i(593)](t)),e=Math[i(527)](Math.pow(r[0]-o[0],2)+Math[i(520)](r[1]-o[1],2));o=[r[0]+e*Math[i(440)](s),r[1]-e*Math.sin(s)],!this[i(598)].value&&(o[0]=Math.round(o[0]),o[1]=Math[i(488)](o[1]))}if(this[i(476)].x1=r[0],this[i(476)].y1=r[1],t[i(568)])switch(this[i(590)]){case i(557):this[i(476)].x1=2*this[i(388)][0]-o[0],this[i(476)].y1=2*this[i(388)][1]-o[1];break;case"move-point-a":this[i(503)]&&(this[i(476)].x1=2*this[i(503)].x-o[0],this[i(476)].y1=2*this[i(503)].y-o[1]);break;case i(468):this[i(428)]&&(this[i(476)].x1=2*this[i(428)].x-o[0],this._outlineModel.y1=2*this._downPointA.y-o[1])}if(this[i(476)].x2=o[0],this[i(476)].y2=o[1],this[i(476)][i(575)]=this[i(559)].value,this[i(476)][i(429)]=!0,this[i(462)])switch(this[i(590)]){case"new":case i(459):this[i(462)][i(514)][i(399)].x=this[i(397)][0],this[i(462)][i(514)][i(399)].y=this[i(397)][1];break;case i(468):this.lineLayer.currentState[i(479)].x=this[i(397)][0],this.lineLayer.currentState.pointB.y=this[i(397)][1];break;case"move":this._downPointA&&this._downPointB&&(this[i(462)][i(514)][i(399)].x=this[i(428)].x+this[i(397)][0]-this[i(388)][0],this[i(462)][i(514)][i(399)].y=this._downPointA.y+this._cursorCoord[1]-this[i(388)][1],this[i(462)].currentState[i(479)].x=this[i(503)].x+this[i(397)][0]-this[i(388)][0],this[i(462)][i(514)][i(479)].y=this[i(503)].y+this[i(397)][1]-this[i(388)][1])}this._onRequestRender[i(524)](),this[i(423)](),this[i(577)]()}[e(423)](){const t=e;this[t(388)]&&this[t(397)]&&this[t(462)]&&this[t(590)]!==t(539)&&(this[t(377)]=this[t(465)]([this[t(462)][t(514)][t(479)].x,this[t(462)][t(514)].pointB.y],[this.lineLayer[t(514)][t(399)].x,this[t(462)][t(514)][t(399)].y]),this[t(386)]&&(this[t(377)]=this._getClosestSnapDegrees(this[t(377)])),this[t(565)][t(510)]=this[t(377)]+"°",this._cursorInfo[t(512)]=this[t(386)],this[t(449)][t(524)]())}_getAngle(t,s){return(0,a.s)((0,u.AM)(t[0],t[1],s[0],s[1]),1)}[e(593)](t){const s=e;return g[s(409)](((i,e)=>Math[s(393)](e-t)<Math.abs(i-t)?e:i))}[e(417)](){const t=e;this[t(565)].isVisible=!1,this._onRequestRender[t(524)]()}[e(577)](){const t=e;this[t(462)]?(this[t(385)].topLeft=this[t(410)](),this._sizeInfo.range=(0,l.tH)(this[t(462)][t(514)][t(399)].x,this[t(462)].currentState[t(399)].y,this[t(462)][t(514)].pointB.x,this.lineLayer[t(514)][t(479)].y),this[t(482)][t(402)]=this[t(521)][t(402)],this._angleInfo[t(515)]=this._angle):(this[t(385)][t(443)]=void 0,this[t(521)][t(402)]=void 0,this[t(482)][t(402)]=void 0,this[t(533)][t(515)]=void 0)}[e(410)](){const t=e;if(!this[t(462)])return;const s=this[t(462)][t(514)],i=s[t(399)].x<s.pointB.x?s[t(399)]:s[t(479)],h=s[t(399)].y<s[t(479)].y?s[t(399)]:s[t(479)];return{x:i.x,y:h.y}}[e(546)](){const t=e;this.lineLayer&&(this[t(476)][t(502)]=this.lineLayer.currentState[t(392)],this[t(476)][t(575)]=this[t(462)].currentState[t(575)],this[t(476)].x1=this[t(462)][t(514)][t(399)].x,this._outlineModel.y1=this[t(462)][t(514)][t(399)].y,this[t(476)].x2=this[t(462)][t(514)][t(479)].x,this[t(476)].y2=this[t(462)][t(514)][t(479)].y,this._outlineModel[t(429)]=!0)}serialize(){return{state:this[e(590)],hasLineLayer:!!this.lineLayer}}[e(369)](t){const s=e;t.hasLineLayer?(this._renderer?.[s(430)](!0),this[s(546)]()):this[s(607)](),this._setState(t.state),this[s(422)](),this[s(577)]()}}const m=v;class M extends x.q{constructor(){const t=e;super(...arguments),this[t(511)]="topleft"}set[e(443)](t){const s=e;var i,h;h=t,!(!(i=this[s(564)])&&!h||i&&h&&i.x===h.x&&i.y===h.y)&&(this[s(564)]=t,this._onUpdate[s(524)]())}get[e(535)](){return!!this[e(564)]}[e(491)](){const t=e;return this[t(564)]?(0,a.s)(this[t(564)].x,2)+", "+(0,a.s)(this[t(564)].y,2):""}[e(595)](){const t=e;return this[t(564)]?t(561)+(0,a.s)(this[t(564)].x,2)+" y="+(0,a.s)(this[t(564)].y,2):""}}class w extends x.q{constructor(){const t=e;super(...arguments),this[t(511)]=t(580)}get range(){return this._range}set[e(402)](t){const s=e;this[s(421)]!==t&&(this[s(421)]=t,this[s(560)][s(524)]())}get[e(535)](){return!!this[e(421)]}[e(491)](){const t=e;return this[t(421)]?(0,a.s)((0,l.Oq)(this[t(421)])-1,2)+" x "+(0,a.s)((0,l.rY)(this._range)-1,2):""}[e(595)](){const t=e;if(!this[t(421)])return"";const s=(0,a.s)((0,l.Oq)(this._range)-1,2),i=(0,a.s)((0,l.rY)(this._range)-1,2);return"Line is "+s+t(381)+i+t(504)}}class L extends x.q{constructor(){const t=e;super(...arguments),this[t(511)]=t(581)}set[e(402)](t){const s=e;this._range!==t&&(this[s(421)]=t,this[s(560)][s(524)]())}get[e(535)](){return!!this._range}getInfo(){const t=e,s=this[t(418)]();return void 0===s?"":s[t(446)]()}[e(595)](){const t=e,s=this[t(418)]();return void 0===s?"":t(438)+s+t(454)}[e(418)](){const t=e;if(!this[t(421)])return;const s=(0,l.Oq)(this[t(421)])-1,i=(0,l.rY)(this[t(421)])-1,h=Math[t(527)](Math[t(520)](s,2)+Math[t(520)](i,2));return(0,a.s)(h,2)}}class S extends x.q{constructor(){const t=e;super(...arguments),this[t(511)]=t(515)}set[e(515)](t){const s=e;this[s(377)]!==t&&(this[s(377)]=t,this._onUpdate[s(524)]())}get[e(535)](){return void 0!==this[e(377)]}[e(491)](){return void 0===this[e(377)]?"":this._angle+"°"}[e(595)](){const t=e;return void 0===this[t(377)]?"":t(376)+this[t(377)]+"°"}}function b(){const t=e;return{point:{x:-1,y:-1},element:document.createElement(t(605)),zone:(0,l.Pq)()}}class C extends r.JT{constructor(t,s,i,h){const n=e;super(),this._container=t,this[n(445)]=s,this._viewportService=i,this._imageService=h,this[n(567)]=2,this[n(490)]=b(),this[n(570)]=b(),this[n(394)]=b(),this[n(483)]=b(),this[n(475)]=!0,this[n(588)]=document.createElement(n(605)),this[n(490)].element.classList[n(382)](n(460)),this[n(570)][n(447)].classList[n(382)](n(460)),this._resizeStrokeA[n(447)][n(530)][n(382)](n(460)),this._resizeStrokeB[n(447)][n(530)][n(382)](n(460)),this._elementContainer[n(543)](this[n(490)][n(447)],this[n(570)][n(447)],this[n(394)][n(447)],this[n(483)][n(447)]),this[n(594)][n(467)](this[n(588)]),this[n(571)]({dispose:()=>{this[n(594)].removeChild(this._elementContainer)}})}[e(430)](t){const s=e;t!==this[s(475)]&&(this[s(588)].style[s(579)]=t?"":"none",this[s(475)]=t)}[e(435)](){const t=e;if(!this[t(445)].lineLayer)return;const s=this[t(395)].currentLayer;if(!s)return;const i=this[t(445)][t(462)][t(514)][t(399)],h=this[t(445)].lineLayer.currentState[t(479)],n=this._viewportService,r=Math[t(488)](this[t(594)].clientWidth/2)-s[t(401)]/2*n[t(456)],a=Math[t(488)](this[t(594)].clientHeight/2)-s[t(597)]/2*n[t(456)];this._setPointPosition(this[t(490)],r+(n.x+i.x+.5)*n[t(456)],a+(n.y+i.y+.5)*n[t(456)]),this[t(548)](this[t(570)],r+(n.x+h.x+.5)*n[t(456)],a+(n.y+h.y+.5)*n[t(456)]);const c=(0,o.X)(this[t(490)][t(599)].x,this[t(490)][t(599)].y,this._pointB[t(599)].x,this[t(570)][t(599)].y,this[t(445)][t(462)][t(514)].strokeWidth,n[t(456)]);this[t(548)](this._resizeStrokeA,(c[1].x+c[2].x)/2,(c[1].y+c[2].y)/2),this[t(548)](this[t(483)],(c[3].x+c[0].x)/2,(c[3].y+c[0].y)/2)}[e(548)](t,s,i){const h=e,n=10*window[h(534)];t[h(599)].x=s,t.point.y=i,t[h(516)][h(609)]=t[h(599)].x-n,t[h(516)][h(370)]=t.point.x+n,t.zone[h(569)]=t.point.y-n,t[h(516)][h(600)]=t[h(599)].y+n,t[h(447)][h(427)].left=t[h(599)].x+"px",t[h(447)][h(427)].top=t.point.y+"px"}[e(525)](t,s,i){const h=e;if(!this[h(445)][h(462)])return h(557);if(k(this[h(490)][h(516)],t.offsetX,t[h(453)]))return h(459);if(k(this._pointB[h(516)],t[h(486)],t[h(453)]))return h(468);if(this[h(490)]&&this[h(570)]){if(k(this[h(394)][h(516)],t[h(486)],t[h(453)])){const t=((0,u.AM)(this[h(490)][h(599)].x,this[h(490)][h(599)].y,this[h(570)][h(599)].x,this[h(570)].point.y)+180)%180;return t<22.5?h(405):t<67.5?"resize-stroke-a-nwse":h(t<112.5?433:t<157.5?383:405)}if(k(this._resizeStrokeB[h(516)],t[h(486)],t.offsetY)){const t=((0,u.AM)(this[h(490)][h(599)].x,this[h(490)].point.y,this[h(570)][h(599)].x,this[h(570)][h(599)].y)+180)%180;return h(t<22.5?574:t<67.5?592:t<112.5?586:t<157.5?436:574)}}const n=(0,o.X)(this[h(490)][h(599)].x,this[h(490)][h(599)].y,this._pointB.point.x,this[h(570)].point.y,s,i),r=Math[h(488)]((0,u.hu)(n[0].x,n[0].y,n[1].x,n[1].y,n[2].x,n[2].y,n[3].x,n[3].y)),a=Math[h(488)](2*((0,u.ku)(n[0].x,n[0].y,n[1].x,n[1].y,t.offsetX,t[h(453)])+(0,u.ku)(n[1].x,n[1].y,n[2].x,n[2].y,t[h(486)],t[h(453)])+(0,u.ku)(n[2].x,n[2].y,n[3].x,n[3].y,t.offsetX,t[h(453)])+(0,u.ku)(n[3].x,n[3].y,n[0].x,n[0].y,t[h(486)],t[h(453)])));return h(a<=r?539:557)}}function k(t,s,i){const h=e;return s>=t.left&&s<t[h(370)]&&i>=t[h(569)]&&i<t[h(600)]}},1019:(t,s,i)=>{"use strict";i.d(s,{X:()=>h,j:()=>n});var e=i(9455);function h(t,s,i,h,n,o){const r=a13_0x3acb,a=(0,e.zz)(t,s,i,h),c=.5*o*n*Math[r(505)](a),l=.5*o*n*Math[r(440)](a);return[{x:t-c,y:s-l},{x:t+c,y:s+l},{x:i+c,y:h+l},{x:i-c,y:h-l}]}function n(t,s,i,e,h,n,u,d=1){u?function(t,s,i,e,h,n,o){const r=a13_0x3acb;o<1&&(t=l(t,o));const u=Math[r(393)](h-i)>Math[r(393)](e-s);let d=0;u&&(d=s,s=i,i=d,d=e,e=h,h=d),s>e&&(d=s,s=e,e=d,d=i,i=h,h=d);const _=e-s;let y=(h-i)/_;0===_&&(y=1);let p=Math.round(s),x=i+y*(p-s),f=c(s+.5);const g=p,v=Math[r(596)](x);let m=a(x)*f;u?(n(v,g,l(t,c(x)*f)),m>0&&n(v+1,g,l(t,m))):(n(g,v,l(t,c(x)*f)),m>0&&n(g,v+1,l(t,m)));let M=x+y;p=Math[r(488)](e),x=h+y*(p-e),f=a(e+.5);const w=p,L=Math[r(596)](x);if(m=a(x)*f,u?(n(L,w,l(t,c(x)*f)),m>0&&n(L+1,w,l(t,a(x)*f))):(n(w,L,l(t,c(x)*f)),m>0&&n(w,L+1,l(t,a(x)*f))),u)for(let s=g+1;s<w;s++)n(Math[r(596)](M),s,l(t,c(M))),m=a(M),m>0&&n(Math.floor(M)+1,s,l(t,m)),M+=y;else for(let s=g+1;s<w;s++)n(s,Math.floor(M),l(t,c(M))),m=a(M),m>0&&n(s,Math[r(596)](M)+1,l(t,m)),M+=y}(t,s,i,e,h,n,d):function(t,s,i,e,h,n,a){const c=a13_0x3acb;a<1&&(t=l(t,a)),Math.abs(h-i)<Math[c(393)](e-s)?s>e?o(t,e,h,s,i,n):o(t,s,i,e,h,n):i>h?r(t,e,h,s,i,n):r(t,s,i,e,h,n)}(t,s,i,e,h,n,d)}function o(t,s,i,e,h,n){const o=e-s;let r=h-i,a=1;r<0&&(a=-1,r=-r);let c=2*r-o,l=i;for(let i=s;i<=e;i++)n(i,l,t),c>0?(l+=a,c+=2*(r-o)):c+=2*r}function r(t,s,i,e,h,n){let o=e-s;const r=h-i;let a=1;o<0&&(a=-1,o=-o);let c=2*o-r,l=s;for(let s=i;s<=h;s++)n(l,s,t),c>0?(l+=a,c+=2*(o-r)):c+=2*o}function a(t){return t%1}function c(t){return 1-t%1}function l(t,s){const i=a13_0x3acb;if(void 0===t)return;const e=t[i(403)](0);return e[3]=Math[i(488)](e[3]*s),e}},1674:(t,s,i)=>{"use strict";i.d(s,{q:()=>e});const e="http://www.w3.org/2000/svg"},9455:(t,s,i)=>{"use strict";function e(t,s,i,e){return 180*h(t,s,i,e)/Math.PI}function h(t,s,i,e){let h=-Math.atan2(e-s,i-t);return-180===h&&(h=180),h}function n(t){return t*Math.PI/180}function o(t,s,i,e,h,n){const o=a13_0x3acb,r=Math[o(527)](Math[o(520)](t-i,2)+Math[o(520)](s-e,2)),a=Math.sqrt(Math[o(520)](i-h,2)+Math[o(520)](e-n,2)),c=Math.sqrt(Math.pow(h-t,2)+Math[o(520)](n-s,2)),l=(r+a+c)/2;return Math[o(527)](l*(l-r)*(l-a)*(l-c))}function r(t,s,i,e,h,n,r,a){return o(t,s,i,e,h,n)+o(i,e,h,n,r,a)+o(h,n,r,a,t,s)+o(r,a,t,s,i,e)}i.d(s,{AM:()=>e,zz:()=>h,Ht:()=>n,ku:()=>o,hu:()=>r})}}]);