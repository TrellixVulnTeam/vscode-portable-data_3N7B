const a17_0x19ba=["Set Rectangle Outline Size","_topLeftInfo"," y=","softLight","position","Fill and outline","blendMode","_cursorOriginalRectangle","_range","topright","hasImage","_rectangleOrigin","ellipse","Fill","bottom","_outlineModel","629351wtvbse","flipX","floor","_rectangleOtherPoint","Move Rectangle","state","top","range","string-combo","_cursorOrigin","_updateOutlineSize","_onStateChange","prepend","left","event","_elementContainer","Outline Size","selectionService","add","_model","rectangle","Blend Mode","viewportService","Rectangle size is ","rightTriangle","serialize","keyDown","primaryColor","setAttribute","_updateRectangle","version","path","getPointerState","svg","multiply","_getStyleString","Style","_value","_getStyleValue","_onUpdate","rectLayer","devicePixelRatio","triangle","_onHistoryUpdateValue","sign","_updateStyle","deserialize","createDomRenderProgram","pointerMove","block","setValueFromHistoryChange","key","currentState","_outlineSizeOption","834321OUZHyt","linearBurn","_clearRectLayer","then","_sizeInfo","registerTemporaryLayer","darken","Draw Rectangle","getOutlineSvgPath","primary","rgba","Set Rectangle Style","_onRequestRender","topleft","removeChild","bottomleft","_isVisible","webpackChunkluna","display","clientWidth","_renderer","277056hqpJNf","default","createElement","var(--luna-focusColor)","getDetailedInfo","_viewportService","step","971730uKewzQ"," pixels wide by ","offsetY","onStateChange","paletteService","_directionalMoveElements","keyUp","_refreshInfo","secondaryColor","_setState","_updateBlendMode","onRequestRender","Outline","value","Resize Rectangle","transparent","stroke","ArrowDown","_directionalMoveZones","absolute","MoveImageRangeRenderer","_sc","bottomright","getInfo","imageService","commit","style","round","taskWorkerService","325741rDujve","onUpdate","max","_onOptionsChange","unregisterTemporaryLayer","_getRange","bind","boolean","size","type","fire","onLayerChange","difference","_finish","div","shape","none","createElementNS","visible","offsetX","_blendModeOption","order","1vVsJnd","897677Viauap","1.1","_createRange","zoom","_updateColors","taskService","ArrowLeft","_allowNewState","_setupActiveTemporaryLayer","3PrRFqn","_svgPath2","Shift Rectangle","ArrowUp","setVisible","Set Rectangle Color","options","clientHeight","208353FtFtbW","outlineSize","set","height","pointerDown","number","shiftKey","1yLuLUs","exclusion","width"," x ","ArrowRight","_container","_svgPath","overlay","normal","new","altKey","triggerRequestRender","move-handle","appendChild","_svg","min","onHistoryAction","_getLayer","setRange","register","_imageService","onHistoryUpdateValue","toString","fill","ctrlKey","historyService","name","diamond","currentLayer","secondary","_cursorCurrent","hasRectLayer","onHistoryUnset","move","linearDodgeAdd","get","strokeWidth","_styleOption","abs","classList","getCoordsFromEvent"," pixels tall","render","right","Set Rectangle Blend Mode"],a17_0x4423=function(t,s){return a17_0x19ba[t-=151]},a17_0x154e9f=a17_0x4423;(function(t,s){const e=a17_0x4423;for(;;)try{if(491799===-parseInt(e(303))-parseInt(e(362))+parseInt(e(282))*parseInt(e(361))+parseInt(e(339))*-parseInt(e(152))+parseInt(e(160))+-parseInt(e(228))*-parseInt(e(167))+parseInt(e(310)))break;t.push(t.shift())}catch(s){t.push(t.shift())}})(a17_0x19ba),(self[a17_0x154e9f(299)]=self[a17_0x154e9f(299)]||[]).push([[440,504],{3315:(t,s,e)=>{"use strict";const i=a17_0x154e9f;e.d(s,{d:()=>c});var h=e(5120),r=e(1003),n=e(1674);let o,a;class c extends h.JT{constructor(t,s,e,i){const h=a17_0x4423;super(),this._container=t,this[h(187)]=s,this[h(308)]=e,this[h(247)]=i,this[h(360)]=2,this[h(181)]=document[h(356)](n.q,h(261)),this[h(181)][h(256)](h(258),h(363)),this._svg[h(336)][h(216)]=h(329),this[h(173)]=document[h(356)](n.q,h(259)),this[h(173)][h(336)][h(326)]=h(306),this._svgPath.style[h(190)]=h(325),this[h(173)][h(336)][h(203)]="1",this[h(153)]=document[h(356)](n.q,h(259)),this[h(153)][h(336)].stroke=h(306),this[h(153)][h(336)][h(190)]=h(325),this[h(153)].style[h(203)]="1",this[h(181)].append(this[h(173)],this[h(153)]),this[h(172)][h(240)](this[h(181)]),this[h(186)]({dispose:()=>this[h(172)][h(296)](this._svg)})}async[i(209)](){const t=i,s=this[t(247)][t(235)],h=this[t(308)];if(!s)return void(this[t(181)][t(336)][t(300)]=t(355));if(this._svg.style.display=t(277),!this[t(187)].currentLayer)return;if(o!==this._model[t(354)]){let s;switch(o=this[t(247)][t(354)],o){case t(194):s=e.e(727)[t(285)](e[t(345)](e,727));break;case t(224):s=e.e(459)[t(285)](e.bind(e,8459));break;case t(270):s=e.e(12)[t(285)](e[t(345)](e,4012));break;case t(252):s=e.e(243).then(e[t(345)](e,6243));break;default:s=void 0}a=s?new Promise((async e=>{const i=t;e(new((await s)[i(304)]))})):s}const n=await a,c=Math.round(this[t(172)].clientWidth/2)-this[t(187)][t(169)]/2*h.zoom+h.x*h[t(365)],l=Math[t(337)](this._container[t(159)]/2)-this[t(187)][t(163)]/2*h.zoom+h.y*h[t(365)],u=(0,r.Oq)(s)*h[t(365)],p=(0,r.rY)(s)*h[t(365)];this[t(181)][t(336)].left=c+s[t(241)]*h[t(365)]-2+"px",this._svg[t(336)][t(234)]=l+s[t(234)]*h[t(365)]-2+"px",this[t(181)][t(256)]("width",(u+5)[t(189)]()),this[t(181)][t(256)](t(163),(p+5)[t(189)]()),this._svgPath[t(256)]("d","M2.5 2.5 h"+u+" v"+p+" h"+-u+" v"+-p),n?.[t(290)]?(this[t(153)][t(336)][t(300)]=t(277),this._svgPath2[t(256)]("d",n[t(290)](u,p,this[t(247)][t(229)],this._model.flipY))):this[t(153)][t(336)][t(300)]="none"}}},9865:(t,s,e)=>{"use strict";e.d(s,{q:()=>r});var i=e(1815),h=e(5120);class r extends h.JT{constructor(){const t=a17_0x4423;super(...arguments),this._onUpdate=this[t(186)](new i.v),this[t(340)]=this[t(267)].event}}},9904:(t,s,e)=>{"use strict";const i=a17_0x154e9f;e.d(s,{FV:()=>o,rP:()=>a,tv:()=>c,Jp:()=>l,X5:()=>u,qv:()=>p});var h=e(1815),r=e(5120),n=e(2939);class o extends r.JT{constructor(t,s,e,i=!0){const r=a17_0x4423;super(),this[r(193)]=t,this[r(222)]=s,this[r(265)]=e,this.allowUnchecking=i,this[r(348)]=r(346),this[r(271)]=this[r(186)](new h.v),this[r(188)]=this[r(271)][r(242)],this._onUpdate=this[r(186)](new h.v),this[r(340)]=this[r(267)][r(242)]}get[i(323)](){return this[i(265)]}set value(t){const s=i;this._value=t,this._onUpdate[s(349)]()}[i(278)](t){const s=i;this[s(265)]=t,this[s(271)][s(349)](t)}}class a extends r.JT{constructor(t,s,e){const r=i;super(),this[r(193)]=t,this.options=s,this[r(265)]=e,this[r(348)]="string",this[r(271)]=this[r(186)](new h.v),this[r(188)]=this[r(271)][r(242)],this[r(267)]=this[r(186)](new h.v),this.onUpdate=this[r(267)][r(242)]}get[i(323)](){return this[i(265)]}set[i(323)](t){const s=i;this._value=t,this[s(267)].fire()}setValueFromHistoryChange(t){const s=i;this[s(265)]=t,this._onHistoryUpdateValue[s(349)](t)}}class c extends r.JT{constructor(t,s,e){const r=i;super(),this[r(193)]=t,this[r(158)]=s,this[r(265)]=e,this[r(348)]=r(236),this._onHistoryUpdateValue=this[r(186)](new h.v),this[r(188)]=this[r(271)][r(242)],this[r(267)]=this.register(new h.v),this.onUpdate=this[r(267)][r(242)]}get value(){return this[i(265)]}set[i(323)](t){const s=i;this[s(265)]=t,this[s(267)][s(349)]()}setValueFromHistoryChange(t){const s=i;this[s(265)]=t,this[s(271)][s(349)](t)}}class l extends a{constructor(){const t=i;super(t(249),[t(175),"replace",t(288),"multiply",t(283),"lighten","screen",t(201),t(174),t(215),"difference",t(168)],t(175))}}class u extends r.JT{constructor(t,s,e,r){const n=i;super(),this[n(193)]=t,this._value=s,this.min=e,this.max=r,this[n(348)]=n(165),this[n(271)]=this[n(186)](new h.v),this[n(188)]=this[n(271)].event,this[n(267)]=this[n(186)](new h.v),this[n(340)]=this._onUpdate[n(242)]}get value(){const t=i;return(0,n.u)(this[t(265)],this[t(341)],this[t(182)])}set value(t){const s=i;this[s(265)]=t,this[s(267)][s(349)]()}[i(278)](t){const s=i;this[s(265)]=t,this[s(271)][s(349)](t)}}class p extends u{constructor(t,s,e,h){const r=i;super(t,s,e,h),this[r(348)]=r(165)}get value(){const t=i;return(0,n.u)(this._value,this[t(341)],this[t(182)])}set value(t){const s=i;this[s(265)]=Math[s(230)](t),this[s(267)][s(349)]()}}},504:(t,s,e)=>{"use strict";const i=a17_0x154e9f;e.r(s),e.d(s,{MoveImageRangeRenderer:()=>n});var h=e(5120),r=e(1003);class n extends h.JT{constructor(t,s,e,i,h){const n=a17_0x4423;super(),this[n(172)]=t,this[n(344)]=s,this[n(369)]=e,this._viewportService=i,this._imageService=h,this[n(360)]=2,this._directionalMoveElements=new Map,this[n(328)]=new Map,this[n(298)]=!0,this._elementContainer=document[n(305)](n(353));const o=[n(295),n(221),n(297),n(332),n(234),n(226),n(241),"right"];for(const t of o){const s=document[n(305)]("div");s[n(206)][n(246)](n(179),t),this[n(243)].appendChild(s),this._directionalMoveElements[n(162)](t,s),this[n(328)][n(162)](t,(0,r.Pq)())}this[n(172)][n(180)](this[n(243)]),this[n(186)]({dispose:()=>{const t=n;this[t(172)].removeChild(this[t(243)])}})}[i(156)](t){const s=i;t!==this[s(298)]&&(this[s(243)][s(336)].display=t?"":s(355),this[s(298)]=t)}[i(185)](t){}[i(209)](){const t=i,s=this[t(344)]();if(!s)return;const e=this[t(187)][t(195)];if(!e)return;const h=this[t(308)],r=Math[t(337)](this[t(172)][t(301)]/2)-e[t(169)]/2*h[t(365)],n=Math[t(337)](this._container.clientHeight/2)-e[t(163)]/2*h[t(365)],o=r+(h.x+s[t(241)])*h[t(365)],a=n+(h.y+s[t(234)])*h[t(365)],c=r+(h.x+s[t(210)])*h[t(365)],l=n+(h.y+s[t(226)])*h.zoom,u=Math.round((o+c)/2),p=Math[t(337)]((a+l)/2),d=10*window[t(269)],g={left:Math[t(182)](o+d,Math[t(341)](o,u-d)),top:Math[t(182)](a+d,Math[t(341)](a,p-d)),right:Math[t(341)](c-d,Math[t(182)](c,u+d)),bottom:Math.max(l-d,Math[t(182)](l,p+d))},_={left:o-d,top:a-d,right:c+d,bottom:l+d},v=this[t(328)].get(t(295));v[t(241)]=_.left,v[t(210)]=g.left,v[t(234)]=_.top,v[t(226)]=g[t(234)];const y=this[t(315)][t(202)](t(295));y[t(336)][t(241)]=o+"px",y.style[t(234)]=a+"px";const f=this[t(328)].get(t(221));f[t(241)]=g[t(210)],f[t(210)]=_[t(210)],f.top=_[t(234)],f[t(226)]=g.top;const m=this._directionalMoveElements[t(202)](t(221));m[t(336)][t(241)]=c+"px",m[t(336)][t(234)]=a+"px";const w=this[t(328)][t(202)](t(297));w[t(241)]=_[t(241)],w[t(210)]=g[t(241)],w[t(234)]=g[t(226)],w[t(226)]=_[t(226)];const b=this[t(315)].get(t(297));b.style.left=o+"px",b[t(336)].top=l+"px";const M=this[t(328)][t(202)](t(332));M[t(241)]=g[t(210)],M.right=_.right,M.top=g[t(226)],M[t(226)]=_.bottom;const x=this[t(315)][t(202)](t(332));x[t(336)][t(241)]=c+"px",x[t(336)][t(234)]=l+"px";const S=this[t(328)][t(202)](t(234));S[t(241)]=g[t(241)],S[t(210)]=g[t(210)],S.top=_[t(234)],S[t(226)]=g.top;const R=this[t(315)][t(202)]("top");R[t(336)][t(241)]=u+"px",R[t(336)][t(234)]=a+"px";const L=this[t(328)][t(202)](t(226));L.left=g[t(241)],L.right=g[t(210)],L.top=g[t(226)],L.bottom=_[t(226)];const C=this._directionalMoveElements.get(t(226));C[t(336)][t(241)]=u+"px",C[t(336)].top=l+"px";const O=this[t(328)][t(202)]("left");O[t(241)]=_[t(241)],O[t(210)]=g[t(241)],O.top=g[t(234)],O.bottom=g.bottom;const k=this[t(315)][t(202)]("left");k[t(336)][t(241)]=o+"px",k[t(336)].top=p+"px";const q=this[t(328)].get(t(210));q[t(241)]=g.right,q[t(210)]=_.right,q[t(234)]=g[t(234)],q[t(226)]=g[t(226)];const I=this._directionalMoveElements[t(202)](t(210));I[t(336)][t(241)]=c+"px",I.style.top=p+"px"}getPointerState(t){const s=i;if(!this[s(344)]())return this[s(369)]?s(176):s(200);for(const[e,i]of this[s(328)])if((0,r.RB)(i,t.offsetX,t[s(312)]))return e;const e=this._directionalMoveZones[s(202)](s(295)),h=this[s(328)].get("bottomright"),n={left:e[s(241)],top:e[s(234)],right:h[s(210)],bottom:h.bottom};return(0,r.RB)(n,t[s(358)],t[s(312)])?s(200):this._allowNewState?"new":s(200)}}},7440:(t,s,e)=>{"use strict";const i=a17_0x154e9f;e.r(s),e.d(s,{default:()=>_});var h=e(8752),r=e(1815),n=e(5120),o=e(7896),a=e(1003),c=e(807),l=e(3315),u=e(9865),p=e(9904),d=e(504);class g extends n.JT{constructor(t){const s=a17_0x4423;super(),this[s(331)]=t,this.id=s(248),this[s(233)]=s(176),this._outlineModel=new v((()=>this.rectLayer)),this[s(359)]=new p.Jp,this._styleOption=new p.rP(s(264),[s(322),s(225),s(217)],s(322)),this[s(281)]=new p.qv(s(244),1,1,1e3),this[s(158)]=[this[s(359)],this[s(204)],this[s(281)]],this._sizeInfo=new y,this[s(213)]=new f,this.info=[this[s(213)],this._sizeInfo],this[s(294)]=this[s(186)](new r.v),this[s(321)]=this._onRequestRender[s(242)],this[s(239)]=this.register(new r.v),this[s(313)]=this[s(239)][s(242)],this.register(this[s(331)][s(314)][s(340)]((()=>this[s(366)]()))),this[s(186)](this[s(204)][s(340)]((()=>this[s(273)]()))),this[s(186)](this[s(281)][s(340)]((()=>this[s(238)]()))),this[s(186)](this._blendModeOption.onUpdate((()=>this[s(320)]()))),this[s(186)](this[s(331)][s(334)][s(350)]((()=>this[s(352)]()))),this[s(186)](this[s(331)][s(367)].onBeforeRunLayerTask((()=>this._finish()))),this[s(186)]({dispose:()=>this[s(352)]()}),this[s(186)](this._sc[s(334)].onTemporaryLayerRegistered((t=>this._setupActiveTemporaryLayer(t)))),this._sc[s(334)].currentLayer?.temporaryLayer&&this[s(151)](this[s(331)].imageService[s(195)].temporaryLayer)}[i(151)](t){const s=i;t[s(348)]===s(248)&&(this[s(268)]=t,this.register(this[s(268)].onCommit((()=>this._clearRectLayer()))),this[s(186)](this.rectLayer[s(183)]((()=>{const t=s;this._onOptionsChange(),this[t(317)]()}))),this[s(186)](this[s(268)][s(199)]((()=>this[s(284)]()))),this._rectangleOrigin=[this[s(268)].currentState[s(235)][s(241)],this[s(268)][s(280)][s(235)][s(234)]],this[s(231)]=[this[s(268)][s(280)][s(235)][s(210)],this[s(268)][s(280)][s(235)][s(226)]],this[s(302)]?.[s(156)](!0),this[s(294)].fire())}[i(254)](t,s){const e=i;if(this[e(257)](t,s),this[e(268)]&&!s&&[e(155),e(368),e(327),e(171)].includes(t[e(279)])){const s=(0,a.BN)(this.rectLayer[e(280)].range),i=(o.V5?t.metaKey:t[e(191)])?10:1;switch(t.key){case"ArrowUp":(0,a.Hd)(s,s[e(241)],s[e(234)]-i);break;case e(327):(0,a.Hd)(s,s[e(241)],s.top+i);break;case e(368):(0,a.Hd)(s,s.left-i,s[e(234)]);break;case e(171):(0,a.Hd)(s,s.left+i,s[e(234)])}this[e(268)][e(280)].range=s,this[e(268)].step(e(154))}}[i(316)](t,s){this._updateRectangle(t,s)}async[i(164)](t){const s=i,e=this[s(331)][s(334)].currentLayer;if(!e)return;const h=!(1&t.buttons),r=this._sc[s(250)][s(207)](t);if(this[s(237)]=r,this[s(197)]=r,!r)return;if(this[s(233)]!==s(176))return this[s(219)]=(0,a.BN)(this[s(268)]?.[s(280)][s(235)]),void(this[s(219)]&&(("top"===this.state||this[s(233)]===s(295)||"topright"===this[s(233)])&&(this[s(237)][1]=this._cursorOriginalRectangle.top),(this.state===s(226)||this[s(233)]===s(297)||"bottomright"===this[s(233)])&&(this[s(237)][1]=this[s(219)].bottom-1),(this[s(233)]===s(241)||this[s(233)]===s(295)||this[s(233)]===s(297))&&(this[s(237)][0]=this._cursorOriginalRectangle[s(241)]),("right"===this.state||this.state===s(221)||"bottomright"===this[s(233)])&&(this._cursorOrigin[0]=this[s(219)][s(210)]-1)));await this[s(352)](),this[s(223)]=r,this._rectangleOtherPoint=r;const n=this[s(364)](this[s(223)],this[s(231)]);this[s(219)]=(0,a.BN)(n),this[s(268)]=new c.F(e,{invertColors:h},{primaryColor:this._sc[s(314)][s(291)][s(292)],secondaryColor:this._sc[s(314)][s(196)][s(292)],blendMode:this[s(359)].value,range:n,outlineSize:this[s(281)][s(323)],style:this._getStyleValue()},this[s(331)][s(192)],this._sc[s(245)],this[s(331)][s(338)]),this[s(317)](),await e[s(287)](this[s(268)]),this._renderer?.setVisible(!1),this[s(268)][s(178)]()}async pointerUp(t,s){const e=i;if("new"===this.state&&(s||this._cursorCurrent?.[0]===this[e(237)]?.[0]&&this[e(197)]?.[1]===this[e(237)]?.[1]))return this[e(268)]&&this[e(331)][e(334)][e(195)]?.[e(343)](this.rectLayer),this[e(268)]?.dispose(),void this[e(284)]();if(this[e(268)]){let t;switch(this[e(233)]){case"new":t=e(289);break;case"move":t=e(232);break;case e(295):case e(221):case e(297):case e(332):case e(234):case e(241):case e(210):case"bottom":t=e(324)}this[e(268)].step(t)}this[e(302)]?.[e(156)](!0),this[e(276)](t,!1)}pointerDownMove(t){const s=i;if(!(this[s(223)]&&this[s(231)]&&this[s(237)]&&this._cursorOriginalRectangle))return;if(!this[s(331)][s(334)][s(195)])return;const e=this._sc[s(250)][s(207)](t);if(this[s(197)]&&e[0]===this[s(197)][0]&&e[1]===this[s(197)][1])return;if(this[s(197)]=e,!this[s(268)])return;const h=this[s(197)][0]-this[s(237)][0],r=this[s(197)][1]-this._cursorOrigin[1];switch(this[s(233)]){case s(176):return this[s(231)]=e,void this._updateRectangle(t,!0);case s(200):{const t=(0,a.BN)(this._cursorOriginalRectangle);t[s(241)]+=h,t[s(234)]+=r,t[s(210)]+=h,t[s(226)]+=r,(0,a.FJ)(t),this[s(268)][s(280)].range=t;break}default:{let e;if(!t[s(166)]||this[s(233)]!==s(295)&&this[s(233)]!==s(221)&&this[s(233)]!==s(297)&&this.state!==s(332))e=(0,a.BN)(this[s(219)]),("top"===this.state||this[s(233)]===s(295)||this.state===s(221))&&(e[s(234)]+=r,e.bottom<=e.top&&e[s(234)]++,t.altKey&&(e[s(226)]-=r)),(this[s(233)]===s(226)||"bottomleft"===this[s(233)]||this.state===s(332))&&(e[s(226)]+=r,e.bottom<=e[s(234)]&&e[s(226)]--,t[s(177)]&&(e[s(234)]-=r)),(this[s(233)]===s(241)||"topleft"===this[s(233)]||this.state===s(297))&&(e[s(241)]+=h,e.right<=e[s(241)]&&e[s(241)]++,t[s(177)]&&(e[s(210)]-=h)),(this.state===s(210)||this[s(233)]===s(221)||this[s(233)]===s(332))&&(e[s(210)]+=h,e[s(210)]<=e[s(241)]&&e[s(210)]--,t[s(177)]&&(e[s(241)]-=h));else{const i=(0,a.n3)(this._cursorOriginalRectangle);let n;switch(e=(0,a.BN)(this[s(219)]),this[s(233)]){case s(295):n=(1/i*-h-r)/2,e[s(241)]-=Math.round(n*i),e[s(234)]-=Math[s(337)](n),t[s(177)]&&(e.right+=Math.round(n*i),e[s(226)]+=Math[s(337)](n));break;case s(221):n=(h*(1/i)-r)/2,e[s(210)]+=Math[s(337)](n*i),e.top-=Math[s(337)](n),t[s(177)]&&(e.left-=Math[s(337)](n*i),e[s(226)]+=Math.round(n));break;case s(297):n=(1/i*-h+r)/2,e[s(241)]-=Math.round(n*i),e[s(226)]+=Math[s(337)](n),t[s(177)]&&(e[s(210)]+=Math[s(337)](n*i),e[s(234)]-=Math.round(n));break;case s(332):n=(h*(1/i)+r)/2,e[s(210)]+=Math.round(n*i),e.bottom+=Math.round(n),t.altKey&&(e[s(241)]-=Math[s(337)](n*i),e[s(234)]-=Math.round(n))}}this[s(268)][s(280)][s(235)]=(0,a.FJ)(e);break}}this[s(317)](),this[s(268)][s(178)]()}[i(276)](t,s){const e=i;this[e(302)]&&!s&&this[e(319)](this[e(302)][e(260)](t))}[i(257)](t,s){const e=i;if(!(s&&this[e(268)]&&this[e(223)]&&this[e(231)]&&this.state===e(176)))return;let h=this[e(223)][0]-this[e(231)][0],r=this[e(223)][1]-this[e(231)][1];t[e(166)]&&(Math[e(205)](h)>Math[e(205)](r)?h=r*(Math[e(272)](h)!==Math.sign(r)?-1:1):r=h*(Math[e(272)](h)!==Math[e(272)](r)?-1:1));const n=t[e(177)]?[this[e(223)][0]+h,this._rectangleOrigin[1]+r]:this[e(223)];this[e(268)][e(280)][e(235)]=this[e(364)](n,[this._rectangleOrigin[0]-h,this[e(223)][1]-r]),this[e(317)](),this[e(268)][e(178)]()}_updateColors(){const t=i;if(!this[t(268)])return;const s=this[t(331)][t(314)][t(291)][t(292)],e=this[t(331)].paletteService.secondary[t(292)];(0,h.WC)(this[t(268)].currentState.primaryColor,s)&&(0,h.WC)(this[t(268)][t(280)][t(318)],e)||(this[t(268)][t(280)].primaryColor=s,this.rectLayer[t(280)][t(318)]=e,this[t(268)][t(309)](t(157),!0),this[t(268)][t(178)]())}[i(273)](){const t=i,s=this[t(266)]();this[t(268)]&&this.rectLayer[t(280)][t(336)]!==s&&(this.rectLayer[t(280)][t(336)]=s,this[t(268)][t(309)](t(293)),this[t(268)][t(178)]())}_getStyleValue(){const t=i;switch(this[t(204)][t(323)]){case t(322):return 1;case t(225):return 2;case"Fill and outline":return 3}}_getStyleString(t){const s=i;switch(t){case 1:return"Outline";case 2:return s(225);case 3:return s(217)}}[i(238)](){const t=i,s=this[t(281)][t(323)];this[t(268)]&&this.rectLayer[t(280)][t(161)]!==s&&(this[t(268)][t(280)][t(161)]=s,this[t(268)].step(t(212),!0),this[t(268)].triggerRequestRender())}_updateBlendMode(){const t=i,s=this[t(359)].value;this[t(268)]&&this[t(268)][t(280)][t(218)]!==s&&(this[t(268)].currentState[t(218)]=s,this[t(268)][t(309)](t(211)),this[t(268)].triggerRequestRender())}[i(342)](){const t=i;this[t(268)]&&(this[t(359)][t(278)](this[t(268)].currentState[t(218)]),this[t(281)][t(278)](this[t(268)][t(280)][t(161)]),this[t(204)][t(278)](this[t(263)](this[t(268)].currentState[t(336)])),(!(0,h.WC)(this[t(331)].paletteService[t(291)].rgba,this[t(268)][t(280)][t(255)])||!(0,h.WC)(this[t(331)][t(314)].secondary[t(292)],this[t(268)][t(280)].secondaryColor))&&this[t(331)][t(314)].setColors(this[t(268)][t(280)][t(255)],this.rectLayer[t(280)].secondaryColor))}async[i(352)](){const t=i;await(this[t(268)]?.[t(335)]()),this._clearRectLayer()}[i(284)](){const t=i;this.rectLayer=void 0,this[t(219)]=void 0,this._renderer?.[t(156)](!1),this[t(317)](),this[t(294)][t(349)]()}_createRange(t,s){return(0,a.tH)(t[0],t[1],s[0],s[1])}[i(317)](){const t=i;this[t(286)][t(235)]=this.rectLayer?.currentState[t(235)],this._topLeftInfo[t(235)]=this[t(268)]?.[t(280)][t(235)]}[i(319)](t){const s=i;this[s(233)]!==t&&(this.state=t,this[s(239)][s(349)]())}[i(275)](t){const s=i;return this[s(302)]=new(d[s(330)])(t,(()=>this[s(268)]?.[s(280)].range),!0,this[s(331)][s(250)],this[s(331)][s(334)]),this[s(302)][s(156)](this[s(233)]!==s(176)),[this[s(302)],new l.d(t,this[s(331)][s(334)],this[s(331)].viewportService,this[s(227)])]}[i(253)](){const t=i;return{state:this.state,hasRectLayer:!!this[t(268)]}}[i(274)](t){const s=i;t[s(198)]?this[s(302)]?.setVisible(!0):this[s(284)](),this._setState(t[s(233)]),this._onOptionsChange(),this[s(317)]()}}const _=g;class v{constructor(t){this[i(184)]=t}get[i(235)](){const t=i;return this._getLayer()?.currentState[t(235)]}}class y extends u.q{constructor(){const t=i;super(...arguments),this[t(348)]=t(347)}get[i(235)](){return this[i(220)]}set[i(235)](t){const s=i;this[s(220)]=t,this[s(267)][s(349)]()}get[i(357)](){return!!this[i(220)]}[i(333)](){const t=i;if(!this._range)return"";const s=(0,a.Oq)(this[t(220)]),e=(0,a.rY)(this[t(220)]);return s+t(170)+e}[i(307)](){const t=i;if(!this._range)return"";const s=(0,a.Oq)(this[t(220)]),e=(0,a.rY)(this[t(220)]);return t(251)+s+t(311)+e+t(208)}}class f extends u.q{constructor(){const t=i;super(...arguments),this[t(348)]="topleft"}get[i(235)](){return this[i(220)]}set range(t){const s=i;this[s(220)]=t,this[s(267)][s(349)]()}get[i(357)](){return!!this._range}[i(333)](){const t=i;return this[t(220)]?this[t(220)][t(241)]+", "+this[t(220)][t(234)]:""}[i(307)](){const t=i;return this[t(220)]?"Rectangle top left position is x="+this._range[t(241)]+t(214)+this[t(220)][t(234)]:""}}},1674:(t,s,e)=>{"use strict";e.d(s,{q:()=>i});const i="http://www.w3.org/2000/svg"}}]);