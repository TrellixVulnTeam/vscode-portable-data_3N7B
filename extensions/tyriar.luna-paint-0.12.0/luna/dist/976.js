const a9_0x5612=["1003823xqttfQ","1724QdOGVp","range","historyService","webpackChunkluna","executeOnAllLayers","_sc","bottom","_originX","113691xKNHHW","sign","getCoordsFromEvent","pointerDown","width","2455444AjFHDr","_originY","isSelectionTool","10PJqTCp","1912138jPIvce","viewportService","createCompositeEntry","left","shiftKey","right","taskService","pointerDownMove","_targetY","selectionService","_updateSelection","crop","9ddfVde","Rectangle Selection","pointerUp","validate","altKey","139651IOKCWs","imageService","commit","1UcjSbv","_targetX","127YiHPAA","741953HYFoYB","keyDown"],a9_0x1172=function(t,i){return a9_0x5612[t-=312]},a9_0x7d6aad=a9_0x1172;(function(t,i){const s=a9_0x1172;for(;;)try{if(998311===parseInt(s(312))*-parseInt(s(317))-parseInt(s(315))-parseInt(s(335))+parseInt(s(318))*-parseInt(s(314))+parseInt(s(334))*parseInt(s(352))+parseInt(s(347))*parseInt(s(326))+parseInt(s(331)))break;t.push(t.shift())}catch(i){t.push(t.shift())}})(a9_0x5612),(self[a9_0x7d6aad(321)]=self[a9_0x7d6aad(321)]||[]).push([[976],{3976:(t,i,s)=>{"use strict";const e=a9_0x7d6aad;s.r(i),s.d(i,{default:()=>h});var o=s(5120),a=s(2939),n=s(1003);class r extends o.JT{constructor(t){const i=a9_0x1172;super(),this[i(323)]=t,this.id=i(346),this[i(333)]=!0,this._originX=0,this[i(332)]=0}[e(316)](t,i){this[e(345)](t,i)}keyUp(t,i){this[e(345)](t,i)}[e(329)](t){const i=e;(this[i(323)].selectionService[i(319)]||void 0!==this[i(313)]||void 0!==this[i(343)])&&(this._targetX=void 0,this[i(343)]=void 0,this[i(323)].selectionService[i(319)]=void 0),[this._originX,this[i(332)]]=this[i(323)][i(336)][i(328)](t)}async[e(349)](t,i){const s=e;if(i||void 0===this._targetX||void 0===this[s(343)]){this[s(323)][s(344)].range=void 0;const t=void 0===this._sc.selectionService.range?"Deselect":s(348);this._sc.selectionService[s(354)](t)}else this[s(345)](t,!1),this[s(323)][s(320)][s(337)]("Crop",(async()=>{const t=s;await this._sc[t(341)][t(322)]("layer/cropToSelection",{selection:this[t(323)][t(344)][t(319)]}),this[t(323)][t(336)].fitToWindow()}))}[e(342)](t){const i=e;[this[i(313)],this._targetY]=this[i(323)][i(336)][i(328)](t),this[i(345)](t,!0)}_updateSelection(t,i){const s=e;if(!i||void 0===this[s(313)]||void 0===this._targetY)return;let o=this._targetX-this[s(325)],r=this._targetY-this[s(332)];t[s(339)]&&(Math.abs(o)>Math.abs(r)?o=r*(Math[s(327)](o)!==Math[s(327)](r)?-1:1):r=o*(Math[s(327)](o)!==Math.sign(r)?-1:1));const h=this[s(323)][s(353)][s(330)],c=this[s(323)][s(353)].height,_=(0,n.Pq)();r<0?(_.top=(0,a.u)(this._originY+r,c),_[s(324)]=(0,a.u)(this._originY+1+(t[s(351)]?-r:0),c)):(_[s(324)]=(0,a.u)(this[s(332)]+r+1,c),_.top=(0,a.u)(this._originY+(t[s(351)]?-r:0),c)),o<0?(_[s(338)]=(0,a.u)(this[s(325)]+o,h),_[s(340)]=(0,a.u)(this[s(325)]+1+(t.altKey?-o:0),h)):(_[s(340)]=(0,a.u)(this._originX+o+1,h),_.left=(0,a.u)(this[s(325)]+(t[s(351)]?-o:0),h)),this._sc[s(344)][s(319)]=_,this[s(323)][s(344)][s(350)](h,c)}}const h=r}}]);