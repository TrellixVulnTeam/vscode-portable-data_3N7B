const a9_0x40d2=["start","set","buffer","resultIndex","height","8LNmchd","116551GdDnFT","pow","width","subarray","max","17TzVBwX","Unrecognized array type","ceil","213124SOSgKn",'Range "',"destImage",'Images "',"length","update","yStart","toFixed","min","number","bAmount",'" and "',"top"," must be contained within ","bIndex","right","left","3krteue",")->(","floor","replace","end","sqrt","210151Hvqiqd","SharedArrayBuffer","data","aAmount","839342hBJLDw","962501VnHQrs","5233qevjhv","push","isInteger","webpackChunkluna","bottom","round","aIndex",'Invalid dimensions for image "','" dimensions are equal',"sourceImage","1bzeYbe"," x ","normal","yEnd","abs","454061LzDMRT","1HpnPGv"],a9_0x5879=function(t,n){return a9_0x40d2[t-=108]},a9_0x122472=a9_0x5879;(function(t,n){const r=a9_0x5879;for(;;)try{if(658238==-parseInt(r(131))*parseInt(r(132))+parseInt(r(124))*parseInt(r(119))-parseInt(r(167))+parseInt(r(140))*-parseInt(r(157))-parseInt(r(108))+parseInt(r(125))*parseInt(r(109))+-parseInt(r(163))*-parseInt(r(137)))break;t.push(t.shift())}catch(n){t.push(t.shift())}})(a9_0x40d2),(self[a9_0x122472(112)]=self.webpackChunkluna||[])[a9_0x122472(110)]([[424],{424:(t,n,r)=>{"use strict";r.r(n),r.d(n,{run:()=>f});var e=r(517),a=r(166),o=r(742),i=r(979),s=r(888);const f=async(t,n,r)=>{const f=a9_0x5879;(0,o.ap)(r,"sourceImage"),(0,o.ap)(r,"destImage"),(0,o.TO)(r,f(118),f(142));const c=r[f(118)],u=r[f(142)],h=(0,a.M_)(c[f(134)],c[f(130)],u[f(134)],u.height),d=h[f(134)]>=c[f(134)]&&h[f(130)]>=c[f(130)]?s.k:i.g,l={data:new Uint8Array(h[f(134)]*h[f(130)]*4),width:h[f(134)],height:h[f(130)]},x={id:-1,yStart:t[f(126)]-h.top,yEnd:t.end-h.top,xStart:-1,xEnd:-1};(x.yEnd>=0||x[f(146)]<h.height)&&d(c,l,x);let w=0,y=0;const p=new Uint8Array([204,204,204,255]),I=new Uint8Array([255,255,255,255]);let M;for(let n=t.start;n<t[f(161)];n++)for(let t=h[f(156)];t<h[f(156)]+h[f(134)];t++)w=4*(n*u[f(134)]+t),y=4*((n-h[f(152)])*h.width+t-h[f(156)]),255===u.data[w+3]?(u.data[w]=l[f(165)][y],u[f(165)][w+1]=l[f(165)][y+1],u[f(165)][w+2]=l[f(165)][y+2],u[f(165)][w+3]=l[f(165)][y+3]):(M=(Math.floor((t-h[f(156)])/10%2)+Math[f(159)]((n-h[f(152)])/10%2))%2<1?p:I,(0,e.B)(f(121),u[f(165)],w,l[f(165)],y,M,0))}},742:(t,n,r)=>{"use strict";r.d(n,{ap:()=>a,TO:()=>o,zg:()=>i});var e=r(3);function a(t,n){const r=a9_0x5879,e=t[n];if(e[r(134)]<1||e[r(130)]<1)throw new Error(r(116)+n+'": '+e[r(134)]+r(120)+e[r(130)])}function o(t,n,r){const e=a9_0x5879,a=t[n],o=t[r];if(a[e(134)]===o.width&&a[e(130)]===o[e(130)])throw new Error(e(143)+n+e(151)+r+e(117))}function i(t,n,r){const a=a9_0x5879,o=t[n];if(!(0,e.ur)(r,o))throw new Error(a(141)+n+'" '+(0,e.PW)(o)+a(153)+(0,e.PW)(r))}},979:(t,n,r)=>{"use strict";r.d(n,{g:()=>s});var e=r(371),a=r(525);const o={aIndex:0,bIndex:0,aAmount:0,bAmount:0,resultIndex:0};let i=0;function s(t,n,r,i=(0,a.t)(r)){const s=a9_0x5879,u=n[s(134)],h=n[s(130)],d=new Float32Array(u);if(u<t[s(134)]){const n=(t[s(134)]-1)/2,r=-(u-1)/2,e=t[s(134)]/u;for(let t=0;t<u;t++)d[t]=n+(t+r)*e}else for(let n=0;n<u;n++)d[n]=n/(u-1)*(t[s(134)]-1);const l=new Float32Array(h);if(h<t[s(130)]){const n=(t[s(130)]-1)/2,r=-(h-1)/2,e=t.height/h;for(let t=0;t<h;t++)l[t]=n+(t+r)*e}else for(let n=0;n<h;n++)l[n]=n/(h-1)*(t[s(130)]-1);let x=0,w=0,y=0,p=0,I=0,M=0,m=0,A=0;const g=new Uint8Array(4),_=new Uint8Array(4),b=r[s(122)]-r[s(146)];for(let a=r[s(146)];a<r.yEnd;a++){for(y=0;y<u;y++)x=d[y],w=l[a],p=4*(a*u+y),x===~~x?w===~~w?(I=4*(w*t[s(134)]+x),(0,e.Yr)(n.data,p,t[s(165)],I)):(m=Math[s(159)](w),A=Math.ceil(w),o[s(115)]=4*(m*t.width+x),o[s(154)]=4*(A*t.width+x),o[s(166)]=(A-w)/(A-m),o[s(150)]=1-o[s(166)],o.resultIndex=p,c(t[s(165)],t[s(165)],n[s(165)])):w===~~w?(f(t,x,w,Math[s(159)](x),Math.ceil(x),g),(0,e.Yr)(n.data,p,g,0)):(m=Math[s(159)](w),A=Math[s(139)](w),M=Math[s(159)](x),f(t,x,m,M,0,g),f(t,x,A,M,0,_),o[s(115)]=0,o[s(154)]=0,o[s(166)]=(A-w)/(A-m),o.bAmount=1-o[s(166)],o[s(129)]=p,c(g,_,n[s(165)]));i[s(145)](+((a-r[s(146)])/b)[s(147)](2))}}function f(t,n,r,e,a,i){const s=a9_0x5879;o.aIndex=4*(r*t.width+e),o[s(154)]=o.aIndex+4,o[s(150)]=n%1,o[s(166)]=1-o[s(150)],o[s(129)]=0,c(t[s(165)],t.data,i)}function c(t,n,r){const e=a9_0x5879;if(0===n[o[e(154)]+3])0===t[o[e(115)]+3]?(r[o.resultIndex]=0,r[o[e(129)]+1]=0,r[o[e(129)]+2]=0,r[o.resultIndex+3]=0):(r[o[e(129)]]=t[o[e(115)]+0],r[o[e(129)]+1]=t[o[e(115)]+1],r[o.resultIndex+2]=t[o[e(115)]+2],r[o.resultIndex+3]=t[o[e(115)]+3]*o[e(166)]);else if(0===t[o.aIndex+3])r[o[e(129)]]=n[o.bIndex+0],r[o[e(129)]+1]=n[o[e(154)]+1],r[o[e(129)]+2]=n[o.bIndex+2],r[o.resultIndex+3]=n[o[e(154)]+3]*o.bAmount;else for(i=0;i<4;i++)r[o[e(129)]+i]=t[o.aIndex+i]*o[e(166)]+n[o.bIndex+i]*o[e(150)]}},888:(t,n,r)=>{"use strict";r.d(n,{k:()=>a});var e=r(525);function a(t,n,r,a=(0,e.t)(r)){const o=a9_0x5879,i=n[o(134)],s=n[o(130)],f=new Uint32Array(i);for(let n=0;n<i;n++)f[n]=(n+.5)/i*t[o(134)];const c=new Uint32Array(s);for(let n=0;n<s;n++)c[n]=Math[o(159)]((n+.5)/s*t[o(130)])*t.width;let u=0,h=0,d=0,l=0;const x=t[o(165)];for(let t=r[o(146)];t<r.yEnd;t++){for(d=4*c[t],h=0;h<i;h++)u=4*(t*i+h),l=d+4*f[h],n[o(165)][u]=x[l],n[o(165)][u+1]=x[l+1],n[o(165)][u+2]=x[l+2],n[o(165)][u+3]=x[l+3];a[o(145)](+(t/s)[o(147)](1))}}},371:(t,n,r)=>{"use strict";const e=a9_0x122472;function a(t,n=2*t[e(144)]){const r=e;let a;if(t instanceof Float32Array)a=new Float32Array(n);else if(t instanceof Uint8Array)a=new Uint8Array(n);else if(t instanceof Uint16Array)a=new Uint16Array(n);else{if(!(t instanceof Uint32Array))throw new Error(r(138));a=new Uint32Array(n)}return a.set(t),a}function o(t,n,r=!1){const a=e;return n<Math[a(133)](2,8)?r?new Uint8Array(new SharedArrayBuffer(t)):new Uint8Array(t):n<Math[a(133)](2,16)?r?new Uint16Array(new SharedArrayBuffer(2*t)):new Uint16Array(t):r?new Uint32Array(new SharedArrayBuffer(4*t)):new Uint32Array(t)}function i(t,n,r,e){t[n]=r[e],t[n+1]=r[e+1],t[n+2]=r[e+2],t[n+3]=r[e+3]}r.d(n,{Rs:()=>a,X$:()=>o,Yr:()=>i})},517:(t,n,r)=>{"use strict";const e=a9_0x122472;r.d(n,{B:()=>f});var a=r(371);const o=new Float32Array(6);let i;const s={normal:(t,n)=>n,darken:(t,n)=>Math.min(t,n),multiply:(t,n)=>t*n,linearBurn:(t,n)=>Math[e(136)](t+n-1,0),lighten:(t,n)=>Math[e(136)](t,n),screen:(t,n)=>1-(1-t)*(1-n),linearDodgeAdd:(t,n)=>Math[e(148)](t+n,1),overlay:(t,n)=>t<.5?2*t*n:1-2*(1-t)*(1-n),softLight:(t,n)=>n<.5?2*t*n+t*t*(1-2*n):Math[e(162)](t)*(2*n-1)+2*t*(1-n),difference:(t,n)=>Math[e(123)](t-n),exclusion:(t,n)=>t+n-2*t*n};function f(t,n,r,f,u,h=n,d=r){const l=e;if(t!==l(160)){if(o[0]=f[u+3]/255,0===o[0])return n[r]=h[d],n[r+1]=h[d+1],n[r+2]=h[d+2],void(n[r+3]=h[d+3]);if(o[1]=h[d+3]/255,0===o[1])return n[r]=f[u],n[r+1]=f[u+1],n[r+2]=f[u+2],void(n[r+3]=f[u+3]);i=s[t],o[3]=i(h[d]/255,f[u]/255),o[4]=i(h[d+1]/255,f[u+1]/255),o[5]=i(h[d+2]/255,f[u+2]/255),o[2]=o[0]+o[1]*(1-o[0]),n[r]=Math[l(114)](c(h[d]/255,o[1],f[u]/255,o[0],o[3])/o[2]*255),n[r+1]=Math.round(c(h[d+1]/255,o[1],f[u+1]/255,o[0],o[4])/o[2]*255),n[r+2]=Math[l(114)](c(h[d+2]/255,o[1],f[u+2]/255,o[0],o[5])/o[2]*255),n[r+3]=Math[l(114)](255*o[2])}else(0,a.Yr)(n,r,f,u)}function c(t,n,r,e,a){return(n-n*e)*t+(e-n*e)*r+n*e*a}},166:(t,n,r)=>{"use strict";r.d(n,{Qf:()=>a,M_:()=>o});var e=r(3);function a(t,n){const r=a9_0x5879,a=(0,e.Oq)(n),o=(0,e.rY)(n),i=new Uint8Array(a*o*4);let s=0,f=0;for(let e=0;e<o;e++)f=e+n[r(152)],s=4*(f*t[r(134)]+n[r(156)]),i[r(127)](t.data[r(135)](s,s+4*a),e*a*4);return i}function o(t,n,r,e,a=!0){const o=a9_0x5879;if(!a&&n<e&&t<r)return{left:Math[o(114)]((r-t)/2),top:Math[o(114)]((e-n)/2),width:t,height:n};const i={left:0,top:0,width:r,height:e};if(n>t){const e=t/n;i[o(156)]=Math[o(114)](r*(.5-e/2)),i[o(134)]=Math[o(114)](r*e)}else if(t>n){const r=n/t;i[o(152)]=Math[o(114)](e*(.5-r/2)),i[o(130)]=Math[o(114)](e*r)}return i}},3:(t,n,r)=>{"use strict";function e(t){const n=a9_0x5879;if(t)return{left:t[n(156)],top:t[n(152)],right:t[n(155)],bottom:t.bottom}}function a(t,n){return{left:t,top:n,right:t+1,bottom:n+1}}function o(t,n){return{left:0,top:0,right:t,bottom:n}}function i(t,n,r,e){const a=a9_0x5879,o=function(t){const n=a9_0x5879;if(t[n(156)]>t[n(155)]){const r=t.right;t[n(155)]=t[n(156)],t.left=r}if(t[n(152)]>t[n(113)]){const r=t[n(113)];t.bottom=t.top,t[n(152)]=r}if(t.right<t.left){const r=t.left;t[n(156)]=t[n(155)],t.right=r}if(t.bottom<t[n(152)]){const r=t.top;t[n(152)]=t[n(113)],t[n(113)]=r}return t}({left:t,top:n,right:r,bottom:e});return o[a(155)]++,o.bottom++,o}function s(t){const n=a9_0x5879;return t[n(156)]=Math[n(159)](t[n(156)]),t[n(155)]=Math[n(139)](t[n(155)]),t[n(152)]=Math.floor(t[n(152)]),t[n(113)]=Math[n(139)](t[n(113)]),t}function f(t,n,r){const e=a9_0x5879;if(function(t){const n=a9_0x5879;return t.left===t[n(155)]||t.top===t[n(113)]}(t))return t[e(156)]=n,t[e(155)]=n+1,t[e(152)]=r,void(t[e(113)]=r+1);t[e(156)]=Math[e(148)](t[e(156)],n),t.top=Math.min(t[e(152)],r),t.right=Math[e(136)](t[e(155)],n+1),t[e(113)]=Math[e(136)](t[e(113)],r+1)}function c(t,n,r){const e=a9_0x5879;return n>=t[e(156)]&&n<t[e(155)]&&r>=t[e(152)]&&r<t.bottom}function u(t,n){const r=a9_0x5879;return n[r(156)]>=t.left&&n[r(155)]<=t.right&&n.top>=t[r(152)]&&n.bottom<=t.bottom}function h(t){const n=a9_0x5879;return"("+t[n(156)]+","+t[n(152)]+n(158)+t.right+","+t[n(113)]+")"}function d(t){const n=a9_0x5879;return t[n(155)]-t[n(156)]}function l(t){const n=a9_0x5879;return t[n(113)]-t[n(152)]}r.d(n,{BN:()=>e,Re:()=>a,DI:()=>o,tH:()=>i,kq:()=>s,Hv:()=>f,RB:()=>c,ur:()=>u,PW:()=>h,Oq:()=>d,rY:()=>l})}}]);