const a8_0x144f=["getOutlineSvgPath","rightTriangle","append","multiply","setAttribute","prepend","number","screen","_onUpdate","Point","_svgPath2","width","_setColor","http://www.w3.org/2000/svg","version","createDomRenderProgram","Sampling","top","removeChild","type","display","flipX","11 x 11 Average","_value","5mJktkP","733689wGpCMw","get","_imageService","hasImage","triangle","zoom","style","round","max","51 x 51 Average","ellipse","clientWidth","value","then","transparent","_svg","viewportService","options","386510uwHPjv","createReadonlyRgbaColor","difference","string","strokeWidth","order","data","_onHistoryUpdateValue","height","onUpdate","min","paletteService","imageService","primary","overlay","name","Blend Mode","_outlineModel","_container","normal","none","render","left","onRequestRender","8leiHbp","linearDodgeAdd","path","fill","_svgPath","74049BZilQu","_lastCoord","absolute","setValueFromHistoryChange","colorPicker","allowUnchecking","register","_sc","buttons","event","_model","svg","containsCoord","_updateOutline","string-combo","5 x 5 Average","default","webpackChunkluna","secondary","_samplingOption","boolean","replace","diamond","3 x 3 Average","pointerMove","fire","range","softLight","var(--luna-focusColor)","createElementNS","stroke","currentLayer","59181nzHoiU","exclusion","598842CLKmKf","block","linearBurn","31 x 31 Average","toString","_onRequestRender","_viewportService","darken","shape","clientHeight","flipY","101 x 101 Average","2454073TFbjsI","522508Iehvgl","onHistoryUpdateValue","bind","push"],a8_0x585a=function(t,s){return a8_0x144f[t-=254]},a8_0x282200=a8_0x585a;(function(t,s){const e=a8_0x585a;for(;;)try{if(369243===-parseInt(e(342))+parseInt(e(341))*-parseInt(e(298))+parseInt(e(261))*-parseInt(e(266))+parseInt(e(313))+-parseInt(e(360))+-parseInt(e(300))+parseInt(e(312)))break;t.push(t.shift())}catch(s){t.push(t.shift())}})(a8_0x144f),(self[a8_0x282200(283)]=self[a8_0x282200(283)]||[])[a8_0x282200(316)]([[471],{3315:(t,s,e)=>{"use strict";const i=a8_0x282200;e.d(s,{d:()=>c});var n=e(5120),h=e(1003),r=e(1674);let o,a;class c extends n.JT{constructor(t,s,e,i){const n=a8_0x585a;super(),this[n(255)]=t,this._imageService=s,this._viewportService=e,this[n(276)]=i,this[n(365)]=2,this[n(357)]=document[n(295)](r.q,n(277)),this._svg[n(321)](n(331),"1.1"),this[n(357)][n(348)].position=n(268),this[n(265)]=document.createElementNS(r.q,"path"),this[n(265)][n(348)][n(296)]=n(294),this._svgPath.style[n(264)]="transparent",this[n(265)][n(348)][n(364)]="1",this._svgPath2=document[n(295)](r.q,n(263)),this._svgPath2[n(348)].stroke="var(--luna-focusColor)",this[n(327)].style[n(264)]=n(356),this[n(327)][n(348)][n(364)]="1",this[n(357)][n(319)](this[n(265)],this[n(327)]),this[n(255)][n(322)](this[n(357)]),this[n(272)]({dispose:()=>this[n(255)][n(335)](this[n(357)])})}async[i(258)](){const t=i,s=this[t(276)].range,n=this[t(306)];if(!s)return void(this[t(357)][t(348)][t(337)]=t(257));if(this[t(357)].style[t(337)]=t(301),!this[t(344)].currentLayer)return;if(o!==this._model[t(308)]){let s;switch(o=this[t(276)][t(308)],o){case t(288):s=e.e(727).then(e[t(315)](e,727));break;case t(352):s=e.e(459).then(e[t(315)](e,8459));break;case t(346):s=e.e(12).then(e.bind(e,4012));break;case t(318):s=e.e(243)[t(355)](e[t(315)](e,6243));break;default:s=void 0}a=s?new Promise((async e=>{const i=t;e(new((await s)[i(282)]))})):s}const r=await a,c=Math[t(349)](this[t(255)][t(353)]/2)-this._imageService[t(328)]/2*n[t(347)]+n.x*n.zoom,l=Math[t(349)](this[t(255)][t(309)]/2)-this[t(344)][t(368)]/2*n[t(347)]+n.y*n[t(347)],u=(0,h.Oq)(s)*n.zoom,d=(0,h.rY)(s)*n[t(347)];this._svg[t(348)][t(259)]=c+s[t(259)]*n[t(347)]-2+"px",this[t(357)][t(348)][t(334)]=l+s[t(334)]*n[t(347)]-2+"px",this[t(357)][t(321)](t(328),(u+5)[t(304)]()),this[t(357)][t(321)](t(368),(d+5).toString()),this[t(265)][t(321)]("d","M2.5 2.5 h"+u+" v"+d+" h"+-u+" v"+-d),r?.[t(317)]?(this._svgPath2[t(348)][t(337)]="block",this[t(327)][t(321)]("d",r[t(317)](u,d,this[t(276)][t(338)],this[t(276)][t(310)]))):this[t(327)].style.display=t(257)}}},9904:(t,s,e)=>{"use strict";const i=a8_0x282200;e.d(s,{FV:()=>o,rP:()=>a,tv:()=>c,Jp:()=>l,X5:()=>u,qv:()=>d});var n=e(1815),h=e(5120),r=e(2939);class o extends h.JT{constructor(t,s,e,i=!0){const h=a8_0x585a;super(),this[h(375)]=t,this[h(345)]=s,this[h(340)]=e,this[h(271)]=i,this[h(336)]=h(286),this[h(367)]=this[h(272)](new n.v),this.onHistoryUpdateValue=this._onHistoryUpdateValue[h(275)],this[h(325)]=this[h(272)](new n.v),this[h(369)]=this._onUpdate.event}get[i(354)](){return this._value}set value(t){const s=i;this[s(340)]=t,this[s(325)][s(291)]()}[i(269)](t){const s=i;this[s(340)]=t,this[s(367)].fire(t)}}class a extends h.JT{constructor(t,s,e){const h=i;super(),this.name=t,this[h(359)]=s,this._value=e,this.type=h(363),this[h(367)]=this.register(new n.v),this.onHistoryUpdateValue=this[h(367)][h(275)],this[h(325)]=this[h(272)](new n.v),this[h(369)]=this[h(325)][h(275)]}get value(){return this._value}set[i(354)](t){const s=i;this._value=t,this[s(325)][s(291)]()}[i(269)](t){const s=i;this[s(340)]=t,this[s(367)].fire(t)}}class c extends h.JT{constructor(t,s,e){const h=i;super(),this[h(375)]=t,this[h(359)]=s,this[h(340)]=e,this[h(336)]=h(280),this[h(367)]=this[h(272)](new n.v),this[h(314)]=this[h(367)][h(275)],this._onUpdate=this[h(272)](new n.v),this.onUpdate=this[h(325)].event}get[i(354)](){return this[i(340)]}set[i(354)](t){const s=i;this[s(340)]=t,this[s(325)][s(291)]()}setValueFromHistoryChange(t){const s=i;this._value=t,this[s(367)].fire(t)}}class l extends a{constructor(){const t=i;super("Blend Mode",[t(256),t(287),t(307),t(320),"linearBurn","lighten",t(324),"linearDodgeAdd",t(374),"softLight",t(362),t(299)],t(256))}}class u extends h.JT{constructor(t,s,e,h){const r=i;super(),this[r(375)]=t,this._value=s,this[r(370)]=e,this[r(350)]=h,this[r(336)]=r(323),this[r(367)]=this[r(272)](new n.v),this[r(314)]=this[r(367)][r(275)],this[r(325)]=this.register(new n.v),this.onUpdate=this[r(325)][r(275)]}get[i(354)](){const t=i;return(0,r.u)(this[t(340)],this[t(350)],this[t(370)])}set value(t){const s=i;this[s(340)]=t,this[s(325)].fire()}[i(269)](t){const s=i;this._value=t,this[s(367)][s(291)](t)}}class d extends u{constructor(t,s,e,n){const h=i;super(t,s,e,n),this.type=h(323)}get[i(354)](){const t=i;return(0,r.u)(this[t(340)],this[t(350)],this[t(370)])}set[i(354)](t){const s=i;this[s(340)]=Math.floor(t),this._onUpdate[s(291)]()}}},6471:(t,s,e)=>{"use strict";const i=a8_0x282200;e.r(s),e.d(s,{default:()=>u});var n=e(8752),h=e(1815),r=e(5120),o=e(3315),a=e(9904);const c=new Map([["Point",0],[i(289),1],[i(281),2],[i(339),5],["31 x 31 Average",15],[i(351),25],[i(311),50]]);class l extends r.JT{constructor(t){const s=i;super(),this[s(273)]=t,this.id=s(270),this[s(285)]=new a.rP(s(333),[s(326),s(289),s(281),s(339),s(303),s(351),"101 x 101 Average"],s(326)),this[s(359)]=[this[s(285)]],this._outlineModel={range:void 0},this[s(305)]=this.register(new h.v),this[s(260)]=this[s(305)].event}[i(332)](t){const s=i;return new o.d(t,this[s(273)][s(372)],this[s(273)][s(358)],this[s(254)])}pointerDown(t){const s=i;if(!this[s(273)][s(372)].currentLayer)return;const e=this[s(273)][s(358)].getCoordsFromEvent(t);this[s(279)](e),this[s(273)][s(372)].containsCoord(e[0],e[1])&&this[s(329)](e,t),this[s(267)]=e}pointerUp(){const t=i;this[t(273)][t(372)][t(297)]&&(this[t(267)]=void 0)}[i(290)](t,s){const e=i;if(!this[e(273)].imageService[e(297)])return;const n=this._sc[e(358)].getCoordsFromEvent(t);this[e(279)](n),s&&this[e(267)]&&(this[e(273)][e(372)][e(278)](n[0],n[1])&&(this[e(267)][0]!==n[0]||this[e(267)][1]!==n[1])&&this[e(329)](n,t),this[e(267)]=n)}[i(279)](t){const s=i;if(this._sc[s(372)][s(297)]&&(this[s(254)][s(292)]?.[s(259)]!==t[0]||this[s(254)][s(292)]?.[s(334)]!==t[1])){if(this[s(273)][s(372)].containsCoord(t[0],t[1])){const e=c[s(343)](this[s(285)][s(354)]);this[s(254)].range={left:t[0]-e,top:t[1]-e,right:t[0]+e+1,bottom:t[1]+e+1}}else this[s(254)][s(292)]=void 0;this._onRequestRender[s(291)]()}}[i(329)](t,s){const e=i,h=this._sc[e(372)][e(297)];if(!h)return;const r=h[e(366)];let o;if(this[e(285)][e(354)]===e(326)){const s=4*(t[1]*h.width+t[0]);o=n.m4[e(361)](r[s],r[s+1],r[s+2],r[s+3])}else{const s=c[e(343)](this[e(285)].value);let i=0,a=0,l=0,u=0;const d=Math[e(350)](t[0]-s,0),v=Math[e(350)](t[1]-s,0),p=Math[e(370)](t[0]+s,h[e(328)]-1),g=Math[e(370)](t[1]+s,h[e(368)]-1);let _=0;for(let t=v;t<=g;t++)for(let s=d;s<=p;s++)_=4*(t*h[e(328)]+s),i+=r[_],a+=r[_+1],l+=r[_+2],u+=r[_+3];const f=(p-d+1)*(g-v+1);o=n.m4[e(361)](Math[e(349)](i/f),Math[e(349)](a/f),Math.round(l/f),Math.round(u/f))}1&s[e(274)]?this._sc[e(371)][e(373)].rgba=o:2&s[e(274)]&&(this[e(273)][e(371)][e(284)].rgba=o)}}const u=l},1674:(t,s,e)=>{"use strict";const i=a8_0x282200;e.d(s,{q:()=>n});const n=i(330)}}]);