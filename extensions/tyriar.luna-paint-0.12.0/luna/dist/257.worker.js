const a8_0x50b7=["round","width","Unrecognized array type",'" and "','Range "',"max","bottom","update","ceil","subarray","color","left","316435cFiRjs","right","slice","2ptDHZt","length","push","set",")->(","targetImage",'": ',"tolerance","top","17XWYWZe","min","136234zSHOca","5839BMnltJ","isInteger","webpackChunkluna","281556HqFReA","abs","sqrt","SharedArrayBuffer","pow","data","1evRAuv",'Invalid dimensions for image "',"179355RRkkuv",'Images "',"replace"," x "," must be contained within ","selection","16573yTHdJe","239006jicIau","height"],a8_0x2918=function(t,n){return a8_0x50b7[t-=289]},a8_0x45ed63=a8_0x2918;(function(t,n){const r=a8_0x2918;for(;;)try{if(183455===parseInt(r(315))+parseInt(r(325))*parseInt(r(301))+-parseInt(r(334))+-parseInt(r(316))*parseInt(r(313))+parseInt(r(319))+-parseInt(r(304))*parseInt(r(333))+-parseInt(r(327)))break;t.push(t.shift())}catch(n){t.push(t.shift())}})(a8_0x50b7),(self[a8_0x45ed63(318)]=self[a8_0x45ed63(318)]||[])[a8_0x45ed63(306)]([[257],{257:(t,n,r)=>{"use strict";r.r(n),r.d(n,{run:()=>s});var e=r(517),o=r(166),a=r(3),i=r(742);const s=async(t,n,r)=>{const s=a8_0x2918;(0,i.ap)(r,"targetImage");const c=r[s(309)][s(324)],u=r[s(309)][s(290)],h=r[s(309)][s(335)],l=r[s(299)],d=4*(r.y*u+r.x),p=c[s(298)](d,d+4)[s(303)](),x=r.selection||(0,a.DI)(u,h),M=r.tolerance*r[s(311)]*4,g=(0,o.Qf)(r.targetImage,x);if(n[s(296)](.1),r[s(332)]){const t=Math.ceil(x[s(295)]+(0,a.rY)(x)*(2/8));let o=0;for(let a=x.top;a<x[s(295)];a++){for(let t=x[s(300)];t<x[s(302)];t++)o=4*(a*u+t),f(c,o,p,M)&&(0,e.B)(r.blendMode,c,o,l,0);n[s(296)](+((a-x[s(312)])/t).toFixed(2)+.1)}}else{const t=Math[s(297)](1.25*c[s(305)]);for(let o=0;o<c[s(305)];o+=4)f(c,o,p,M)&&(0,e.B)(r.blendMode,c,o,l,0),o%5e3==0&&n.update(+(o/t).toFixed(2)+.1)}return n[s(296)](.9),{undoData:g,redoData:(0,o.Qf)(r[s(309)],x),range:x}},c=new Int32Array(5);function f(t,n,r,e){return e>0?(c[0]=r[0]-t[n],c[1]=r[1]-t[n+1],c[2]=r[2]-t[n+2],c[3]=r[3]-t[n+3],c[4]=(1+c[0]*c[0])*r[3]/256+(1+c[1]*c[1])*r[3]/256+(1+c[2]*c[2])*r[3]/256+c[3]*c[3],c[4]<=e):t[n]===r[0]&&t[n+1]===r[1]&&t[n+2]===r[2]&&t[n+3]===r[3]}},742:(t,n,r)=>{"use strict";r.d(n,{ap:()=>o,TO:()=>a,zg:()=>i});var e=r(3);function o(t,n){const r=a8_0x2918,e=t[n];if(e[r(290)]<1||e[r(335)]<1)throw new Error(r(326)+n+r(310)+e[r(290)]+r(330)+e[r(335)])}function a(t,n,r){const e=a8_0x2918,o=t[n],a=t[r];if(o[e(290)]===a[e(290)]&&o.height===a.height)throw new Error(e(328)+n+e(292)+r+'" dimensions are equal')}function i(t,n,r){const o=a8_0x2918,a=t[n];if(!(0,e.ur)(r,a))throw new Error(o(293)+n+'" '+(0,e.PW)(a)+o(331)+(0,e.PW)(r))}},371:(t,n,r)=>{"use strict";const e=a8_0x45ed63;function o(t,n=2*t[e(305)]){const r=e;let o;if(t instanceof Float32Array)o=new Float32Array(n);else if(t instanceof Uint8Array)o=new Uint8Array(n);else if(t instanceof Uint16Array)o=new Uint16Array(n);else{if(!(t instanceof Uint32Array))throw new Error(r(291));o=new Uint32Array(n)}return o[r(307)](t),o}function a(t,n,r=!1){return n<Math[e(323)](2,8)?r?new Uint8Array(new SharedArrayBuffer(t)):new Uint8Array(t):n<Math.pow(2,16)?r?new Uint16Array(new SharedArrayBuffer(2*t)):new Uint16Array(t):r?new Uint32Array(new SharedArrayBuffer(4*t)):new Uint32Array(t)}function i(t,n,r,e){t[n]=r[e],t[n+1]=r[e+1],t[n+2]=r[e+2],t[n+3]=r[e+3]}r.d(n,{Rs:()=>o,X$:()=>a,Yr:()=>i})},517:(t,n,r)=>{"use strict";const e=a8_0x45ed63;r.d(n,{B:()=>c});var o=r(371);const a=new Float32Array(6);let i;const s={normal:(t,n)=>n,darken:(t,n)=>Math.min(t,n),multiply:(t,n)=>t*n,linearBurn:(t,n)=>Math[e(294)](t+n-1,0),lighten:(t,n)=>Math[e(294)](t,n),screen:(t,n)=>1-(1-t)*(1-n),linearDodgeAdd:(t,n)=>Math[e(314)](t+n,1),overlay:(t,n)=>t<.5?2*t*n:1-2*(1-t)*(1-n),softLight:(t,n)=>n<.5?2*t*n+t*t*(1-2*n):Math[e(321)](t)*(2*n-1)+2*t*(1-n),difference:(t,n)=>Math[e(320)](t-n),exclusion:(t,n)=>t+n-2*t*n};function c(t,n,r,c,u,h=n,l=r){const d=e;if(t!==d(329)){if(a[0]=c[u+3]/255,0===a[0])return n[r]=h[l],n[r+1]=h[l+1],n[r+2]=h[l+2],void(n[r+3]=h[l+3]);if(a[1]=h[l+3]/255,0===a[1])return n[r]=c[u],n[r+1]=c[u+1],n[r+2]=c[u+2],void(n[r+3]=c[u+3]);i=s[t],a[3]=i(h[l]/255,c[u]/255),a[4]=i(h[l+1]/255,c[u+1]/255),a[5]=i(h[l+2]/255,c[u+2]/255),a[2]=a[0]+a[1]*(1-a[0]),n[r]=Math[d(289)](f(h[l]/255,a[1],c[u]/255,a[0],a[3])/a[2]*255),n[r+1]=Math[d(289)](f(h[l+1]/255,a[1],c[u+1]/255,a[0],a[4])/a[2]*255),n[r+2]=Math.round(f(h[l+2]/255,a[1],c[u+2]/255,a[0],a[5])/a[2]*255),n[r+3]=Math[d(289)](255*a[2])}else(0,o.Yr)(n,r,c,u)}function f(t,n,r,e,o){return(n-n*e)*t+(e-n*e)*r+n*e*o}},166:(t,n,r)=>{"use strict";r.d(n,{Qf:()=>o,M_:()=>a});var e=r(3);function o(t,n){const r=a8_0x2918,o=(0,e.Oq)(n),a=(0,e.rY)(n),i=new Uint8Array(o*a*4);let s=0,c=0;for(let e=0;e<a;e++)c=e+n.top,s=4*(c*t[r(290)]+n.left),i[r(307)](t.data[r(298)](s,s+4*o),e*o*4);return i}function a(t,n,r,e,o=!0){const a=a8_0x2918;if(!o&&n<e&&t<r)return{left:Math[a(289)]((r-t)/2),top:Math.round((e-n)/2),width:t,height:n};const i={left:0,top:0,width:r,height:e};if(n>t){const e=t/n;i.left=Math[a(289)](r*(.5-e/2)),i[a(290)]=Math.round(r*e)}else if(t>n){const r=n/t;i[a(312)]=Math.round(e*(.5-r/2)),i[a(335)]=Math[a(289)](e*r)}return i}},3:(t,n,r)=>{"use strict";function e(t){const n=a8_0x2918;if(t)return{left:t.left,top:t[n(312)],right:t[n(302)],bottom:t[n(295)]}}function o(t,n){return{left:t,top:n,right:t+1,bottom:n+1}}function a(t,n){return{left:0,top:0,right:t,bottom:n}}function i(t,n,r,e){const o=a8_0x2918,a=function(t){const n=a8_0x2918;if(t.left>t.right){const r=t[n(302)];t[n(302)]=t[n(300)],t[n(300)]=r}if(t[n(312)]>t.bottom){const r=t[n(295)];t[n(295)]=t[n(312)],t.top=r}if(t[n(302)]<t[n(300)]){const r=t[n(300)];t[n(300)]=t[n(302)],t.right=r}if(t[n(295)]<t.top){const r=t[n(312)];t[n(312)]=t[n(295)],t[n(295)]=r}return t}({left:t,top:n,right:r,bottom:e});return a[o(302)]++,a.bottom++,a}function s(t){const n=a8_0x2918;return t.left=Math.floor(t[n(300)]),t[n(302)]=Math.ceil(t[n(302)]),t[n(312)]=Math.floor(t[n(312)]),t.bottom=Math[n(297)](t[n(295)]),t}function c(t,n,r){const e=a8_0x2918;if(function(t){const n=a8_0x2918;return t[n(300)]===t[n(302)]||t.top===t.bottom}(t))return t.left=n,t[e(302)]=n+1,t.top=r,void(t[e(295)]=r+1);t[e(300)]=Math[e(314)](t[e(300)],n),t[e(312)]=Math[e(314)](t[e(312)],r),t.right=Math[e(294)](t[e(302)],n+1),t[e(295)]=Math[e(294)](t[e(295)],r+1)}function f(t,n,r){const e=a8_0x2918;return n>=t[e(300)]&&n<t[e(302)]&&r>=t[e(312)]&&r<t.bottom}function u(t,n){const r=a8_0x2918;return n.left>=t[r(300)]&&n[r(302)]<=t.right&&n[r(312)]>=t[r(312)]&&n.bottom<=t[r(295)]}function h(t){const n=a8_0x2918;return"("+t[n(300)]+","+t[n(312)]+n(308)+t[n(302)]+","+t[n(295)]+")"}function l(t){const n=a8_0x2918;return t[n(302)]-t[n(300)]}function d(t){const n=a8_0x2918;return t.bottom-t[n(312)]}r.d(n,{BN:()=>e,Re:()=>o,DI:()=>a,tH:()=>i,kq:()=>s,Hv:()=>c,RB:()=>f,ur:()=>u,PW:()=>h,Oq:()=>l,rY:()=>d})}}]);