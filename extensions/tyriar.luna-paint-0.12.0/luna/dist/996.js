const a10_0xf726=["155291fEhIcH","onRequestRender","var(--luna-focusColor)","pointerMove","1FLrTbJ","abs","fire","toString","_updateOutline","normal","softLight","round","overlay","darken","ellipse","clientWidth","setAttribute","allowUnchecking","157625UnMBYC","path","getOutlineSvgPath","containsCoord","top","_outlineModel","_svg","register","ceil","difference","814000obIExG","flipY","496391yGcwtY","prepend","linearDodgeAdd","then","eraser","version","viewportService","_brushSizeOption","drawCircle","flipX","createDomRenderProgram","createExtendedEdit","lighten","sqrt","shape","2843666ZNrgJL","options","width","order","exclusion","_lastCoord","_sc","_onHistoryUpdateValue","string-combo","diamond","imageService","currentLayer","pointerUp","string","5081OVMmSM","transparent","pow","_edit","webpackChunkluna","_viewportService","_container","onHistoryUpdateValue","svg","type","stroke","_imageService","replace","screen","style","pointerDownMove","event","max","left","_onRequestRender","1fqdARG","bind","block","name","multiply","triangle","2RdMJYZ","clientHeight","zoom","display","onUpdate","_drawLine","value","getCoordsFromEvent","number","Blend Mode","_svgPath","default","setValueFromHistoryChange","floor","requestRender","_onUpdate","createElementNS","strokeWidth","_svgPath2","http://www.w3.org/2000/svg","fill","none","boolean","Could not create extended edit","_getEdit","range","height","_setPixel","1115179xYZJwp","hasImage","position","absolute","selectionService","min","_value","_model"],a10_0x2470=function(t,s){return a10_0xf726[t-=235]},a10_0x5d7273=a10_0x2470;(function(t,s){const e=a10_0x2470;for(;;)try{if(935256===parseInt(e(310))+-parseInt(e(272))+-parseInt(e(308))+parseInt(e(298))*-parseInt(e(244))+-parseInt(e(280))*parseInt(e(284))+-parseInt(e(339))*parseInt(e(238))+parseInt(e(325)))break;t.push(t.shift())}catch(s){t.push(t.shift())}})(a10_0xf726),(self[a10_0x5d7273(343)]=self[a10_0x5d7273(343)]||[]).push([[996],{3315:(t,s,e)=>{"use strict";e.d(s,{d:()=>a});var i=e(5120),n=e(1003),h=e(1674);let o,r;class a extends i.JT{constructor(t,s,e,i){const n=a10_0x2470;super(),this[n(345)]=t,this[n(350)]=s,this[n(344)]=e,this[n(279)]=i,this[n(328)]=2,this[n(304)]=document[n(260)](h.q,n(347)),this[n(304)][n(296)](n(315),"1.1"),this[n(304)][n(353)][n(274)]=n(275),this[n(254)]=document.createElementNS(h.q,n(299)),this[n(254)][n(353)][n(349)]=n(282),this[n(254)][n(353)].fill=n(340),this[n(254)][n(353)][n(261)]="1",this._svgPath2=document[n(260)](h.q,n(299)),this[n(262)][n(353)].stroke=n(282),this[n(262)][n(353)][n(264)]=n(340),this[n(262)].style.strokeWidth="1",this[n(304)].append(this._svgPath,this._svgPath2),this[n(345)][n(311)](this._svg),this[n(305)]({dispose:()=>this[n(345)].removeChild(this[n(304)])})}async render(){const t=a10_0x2470,s=this[t(279)][t(269)],i=this[t(344)];if(!s)return void(this[t(304)][t(353)][t(247)]=t(265));if(this[t(304)][t(353)].display=t(240),!this[t(350)][t(336)])return;if(o!==this[t(279)][t(324)]){let s;switch(o=this[t(279)][t(324)],o){case t(334):s=e.e(727)[t(313)](e.bind(e,727));break;case t(294):s=e.e(459)[t(313)](e.bind(e,8459));break;case t(243):s=e.e(12)[t(313)](e[t(239)](e,4012));break;case"rightTriangle":s=e.e(243)[t(313)](e.bind(e,6243));break;default:s=void 0}r=s?new Promise((async e=>{const i=t;e(new((await s)[i(255)]))})):s}const h=await r,a=Math[t(291)](this[t(345)][t(295)]/2)-this[t(350)][t(327)]/2*i[t(246)]+i.x*i[t(246)],c=Math[t(291)](this._container[t(245)]/2)-this[t(350)][t(270)]/2*i[t(246)]+i.y*i[t(246)],u=(0,n.Oq)(s)*i.zoom,l=(0,n.rY)(s)*i.zoom;this._svg[t(353)].left=a+s.left*i[t(246)]-2+"px",this[t(304)].style[t(302)]=c+s[t(302)]*i[t(246)]-2+"px",this[t(304)].setAttribute(t(327),(u+5)[t(287)]()),this[t(304)].setAttribute(t(270),(l+5)[t(287)]()),this[t(254)][t(296)]("d","M2.5 2.5 h"+u+" v"+l+" h"+-u+" v"+-l),h?.getOutlineSvgPath?(this[t(262)][t(353)].display=t(240),this[t(262)][t(296)]("d",h[t(300)](u,l,this[t(279)][t(319)],this[t(279)][t(309)]))):this[t(262)][t(353)][t(247)]=t(265)}}},9904:(t,s,e)=>{"use strict";const i=a10_0x5d7273;e.d(s,{FV:()=>r,rP:()=>a,tv:()=>c,Jp:()=>u,X5:()=>l,qv:()=>d});var n=e(1815),h=e(5120),o=e(2939);class r extends h.JT{constructor(t,s,e,i=!0){const h=a10_0x2470;super(),this.name=t,this[h(273)]=s,this._value=e,this[h(297)]=i,this[h(348)]=h(266),this[h(332)]=this[h(305)](new n.v),this[h(346)]=this[h(332)].event,this._onUpdate=this[h(305)](new n.v),this[h(248)]=this[h(259)][h(355)]}get value(){return this[a10_0x2470(278)]}set[i(250)](t){const s=i;this[s(278)]=t,this[s(259)][s(286)]()}setValueFromHistoryChange(t){const s=i;this[s(278)]=t,this[s(332)].fire(t)}}class a extends h.JT{constructor(t,s,e){const h=i;super(),this[h(241)]=t,this.options=s,this[h(278)]=e,this[h(348)]=h(338),this[h(332)]=this.register(new n.v),this.onHistoryUpdateValue=this[h(332)].event,this._onUpdate=this[h(305)](new n.v),this[h(248)]=this._onUpdate.event}get value(){return this[i(278)]}set value(t){const s=i;this[s(278)]=t,this[s(259)][s(286)]()}setValueFromHistoryChange(t){const s=i;this[s(278)]=t,this[s(332)][s(286)](t)}}class c extends h.JT{constructor(t,s,e){const h=i;super(),this[h(241)]=t,this[h(326)]=s,this[h(278)]=e,this[h(348)]=h(333),this[h(332)]=this[h(305)](new n.v),this[h(346)]=this._onHistoryUpdateValue[h(355)],this._onUpdate=this[h(305)](new n.v),this.onUpdate=this[h(259)].event}get value(){return this._value}set value(t){const s=i;this[s(278)]=t,this._onUpdate[s(286)]()}[i(256)](t){const s=i;this[s(278)]=t,this[s(332)][s(286)](t)}}class u extends a{constructor(){const t=i;super(t(253),["normal",t(351),t(293),t(242),"linearBurn",t(322),t(352),t(312),t(292),"softLight","difference",t(329)],"normal")}}class l extends h.JT{constructor(t,s,e,h){const o=i;super(),this[o(241)]=t,this[o(278)]=s,this[o(277)]=e,this.max=h,this.type=o(252),this[o(332)]=this[o(305)](new n.v),this[o(346)]=this[o(332)].event,this[o(259)]=this[o(305)](new n.v),this[o(248)]=this[o(259)][o(355)]}get[i(250)](){const t=i;return(0,o.u)(this[t(278)],this[t(235)],this.min)}set[i(250)](t){const s=i;this._value=t,this._onUpdate[s(286)]()}[i(256)](t){const s=i;this._value=t,this._onHistoryUpdateValue[s(286)](t)}}class d extends l{constructor(t,s,e,n){const h=i;super(t,s,e,n),this[h(348)]="number"}get[i(250)](){const t=i;return(0,o.u)(this[t(278)],this[t(235)],this[t(277)])}set[i(250)](t){const s=i;this[s(278)]=Math[s(257)](t),this._onUpdate[s(286)]()}}},2996:(t,s,e)=>{"use strict";const i=a10_0x5d7273;e.r(s),e.d(s,{default:()=>l});var n=e(1815),h=e(5120),o=e(3315),r=e(9904),a=e(1019);const c=new Float32Array([0,0,0,0]);class u extends h.JT{constructor(t){const s=a10_0x2470;super(),this[s(331)]=t,this.id=s(314),this[s(317)]=new r.qv("Brush Size",1,1,1e3),this[s(326)]=[this._brushSizeOption],this._outlineModel={range:void 0},this[s(237)]=this[s(305)](new n.v),this[s(281)]=this._onRequestRender[s(355)]}[i(320)](t){const s=i;return new o.d(t,this[s(331)][s(335)],this[s(331)][s(316)],this[s(303)])}pointerDown(t){const s=i,e=this[s(331)][s(335)];if(!e[s(336)])return;const n=this[s(331)][s(316)][s(251)](t);if(n){if(e[s(301)](n[0],n[1])){const t=this._getEdit();this._setPixel(this._getEdit(),n[0],n[1],this._brushSizeOption[s(250)],c),t[s(258)]()}this[s(330)]=n}}[i(283)](t){const s=i;if(!this[s(331)][s(335)][s(336)])return;const e=this[s(331)][s(316)][s(251)](t);this[s(288)](e)}[i(288)](t){const s=i;if(this[s(331)][s(335)].currentLayer&&(this[s(303)][s(269)]?.[s(236)]!==t[0]||this[s(303)][s(269)]?.[s(302)]!==t[1])){if(this[s(331)][s(335)][s(301)](t[0],t[1])){const e=(this[s(317)][s(250)]-1)/2;this[s(303)][s(269)]={left:t[0]-Math[s(257)](e),top:t[1]-Math[s(257)](e),right:t[0]+Math[s(306)](e)+1,bottom:t[1]+Math[s(306)](e)+1}}else this[s(303)][s(269)]=void 0;this._onRequestRender[s(286)]()}}[i(354)](t){const s=i;if(!this[s(330)])return;const e=this[s(331)][s(335)];if(!e[s(336)])return;const n=this[s(331)][s(316)].getCoordsFromEvent(t);(e[s(301)](n[0],n[1])||e[s(301)](this._lastCoord[0],this[s(330)][1]))&&this[s(249)](this[s(330)],n,c),this[s(330)]=n}async[i(337)](){const t=i;this[t(331)][t(335)][t(336)]&&(this._edit?.commit("Eraser"),this[t(342)]=void 0),this[t(330)]=void 0}[i(249)](t,s,e){const n=i,h=this[n(268)]();(0,a.j)(e,t[0],t[1],s[0],s[1],((t,s,e)=>this._setPixel(h,t,s,this._brushSizeOption[n(250)],e)),!1),h[n(258)]()}[i(268)](){const t=i;if(!this[t(342)]&&(this[t(342)]=this[t(331)][t(335)].currentLayer?.[t(321)](),!this[t(342)]))throw new Error(t(267));return this[t(342)]}[i(271)](t,s,e,n,h){const o=i;this._sc[o(276)][o(301)](s,e)&&this[o(331)][o(335)][o(301)](s,e)&&t[o(318)](s,e,n,!0,h)}}const l=u},1019:(t,s,e)=>{"use strict";e.d(s,{X:()=>n,j:()=>h});var i=e(9455);function n(t,s,e,n,h,o){const r=(0,i.zz)(t,s,e,n),a=.5*o*h*Math.sin(r),c=.5*o*h*Math.cos(r);return[{x:t-a,y:s-c},{x:t+a,y:s+c},{x:e+a,y:n+c},{x:e-a,y:n-c}]}function h(t,s,e,i,n,h,l,d=1){l?function(t,s,e,i,n,h,o){const r=a10_0x2470;o<1&&(t=u(t,o));const l=Math[r(285)](n-e)>Math[r(285)](i-s);let d=0;l&&(d=s,s=e,e=d,d=i,i=n,n=d),s>i&&(d=s,s=i,i=d,d=e,e=n,n=d);const p=i-s;let _=(n-e)/p;0===p&&(_=1);let f=Math.round(s),v=e+_*(f-s),g=c(s+.5);const x=f,M=Math[r(257)](v);let m=a(v)*g;l?(h(M,x,u(t,c(v)*g)),m>0&&h(M+1,x,u(t,m))):(h(x,M,u(t,c(v)*g)),m>0&&h(x,M+1,u(t,m)));let w=v+_;f=Math[r(291)](i),v=n+_*(f-i),g=a(i+.5);const y=f,b=Math[r(257)](v);if(m=a(v)*g,l?(h(b,y,u(t,c(v)*g)),m>0&&h(b+1,y,u(t,a(v)*g))):(h(y,b,u(t,c(v)*g)),m>0&&h(y,b+1,u(t,a(v)*g))),l)for(let s=x+1;s<y;s++)h(Math.floor(w),s,u(t,c(w))),m=a(w),m>0&&h(Math.floor(w)+1,s,u(t,m)),w+=_;else for(let s=x+1;s<y;s++)h(s,Math.floor(w),u(t,c(w))),m=a(w),m>0&&h(s,Math[r(257)](w)+1,u(t,m)),w+=_}(t,s,e,i,n,h,d):function(t,s,e,i,n,h,a){const c=a10_0x2470;a<1&&(t=u(t,a)),Math[c(285)](n-e)<Math[c(285)](i-s)?s>i?o(t,i,n,s,e,h):o(t,s,e,i,n,h):e>n?r(t,i,n,s,e,h):r(t,s,e,i,n,h)}(t,s,e,i,n,h,d)}function o(t,s,e,i,n,h){const o=i-s;let r=n-e,a=1;r<0&&(a=-1,r=-r);let c=2*r-o,u=e;for(let e=s;e<=i;e++)h(e,u,t),c>0?(u+=a,c+=2*(r-o)):c+=2*r}function r(t,s,e,i,n,h){let o=i-s;const r=n-e;let a=1;o<0&&(a=-1,o=-o);let c=2*o-r,u=s;for(let s=e;s<=n;s++)h(u,s,t),c>0?(u+=a,c+=2*(o-r)):c+=2*o}function a(t){return t%1}function c(t){return 1-t%1}function u(t,s){const e=a10_0x2470;if(void 0===t)return;const i=t.slice(0);return i[3]=Math[e(291)](i[3]*s),i}},1674:(t,s,e)=>{"use strict";const i=a10_0x5d7273;e.d(s,{q:()=>n});const n=i(263)},9455:(t,s,e)=>{"use strict";function i(t,s,e,i){return 180*n(t,s,e,i)/Math.PI}function n(t,s,e,i){let n=-Math.atan2(i-s,e-t);return-180===n&&(n=180),n}function h(t){return t*Math.PI/180}function o(t,s,e,i,n,h){const o=a10_0x2470,r=Math[o(323)](Math[o(341)](t-e,2)+Math[o(341)](s-i,2)),a=Math.sqrt(Math[o(341)](e-n,2)+Math.pow(i-h,2)),c=Math[o(323)](Math[o(341)](n-t,2)+Math[o(341)](h-s,2)),u=(r+a+c)/2;return Math.sqrt(u*(u-r)*(u-a)*(u-c))}function r(t,s,e,i,n,h,r,a){return o(t,s,e,i,n,h)+o(e,i,n,h,r,a)+o(n,h,r,a,t,s)+o(r,a,t,s,e,i)}e.d(s,{AM:()=>i,zz:()=>n,Ht:()=>h,ku:()=>o,hu:()=>r})}}]);