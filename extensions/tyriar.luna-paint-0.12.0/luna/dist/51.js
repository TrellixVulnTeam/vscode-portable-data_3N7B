const a25_0x2c9d=['": ',"height","abs","sqrt","stroke",'Images "',"selection","color","getImageData","left","slice","max","beginPath","sin","push","webpackChunkluna","length","set","1325988ZuNXhU",'" and "',"17797gJmrlQ","The line can not be drawn outside of the selection and viewport",'" dimensions are equal',"floor","blendMode","replace","width","2ftadLE","26QkubnV","1357058UIeyNs","min","data","bottom","targetImage",'Range "',"update",'Invalid dimensions for image "',"moveTo","subarray","pow","92338isEcIP","lineWidth","1qbQCyI","round"," x ","642963LDDvvh",'" dimensions differ',"ceil","pointB","strokeStyle","pointA","1463423XLyJoM","rgba(","lineTo"," must be contained within ","smoothing","Could not attain 2d context","1371670RVvoLu","right","strokeWidth","atan2","top"],a25_0x37fd=function(t,a){return a25_0x2c9d[t-=440]},a25_0xb5b9a1=a25_0x37fd;(function(t,a){const n=a25_0x37fd;for(;;)try{if(750307===parseInt(n(454))+-parseInt(n(476))+parseInt(n(464))*-parseInt(n(456))+parseInt(n(493))+parseInt(n(481))*-parseInt(n(463))+parseInt(n(487))*-parseInt(n(478))+parseInt(n(465)))break;t.push(t.shift())}catch(a){t.push(t.shift())}})(a25_0x2c9d),(self.webpackChunkluna=self[a25_0xb5b9a1(451)]||[])[a25_0xb5b9a1(450)]([[51],{6051:(t,a,n)=>{"use strict";n.r(a),n.d(a,{run:()=>f});var e=n(4371),r=n(7517),o=n(1019),h=n(2939),i=n(1003),s=n(7742);const f=async(t,a,n)=>{const f=a25_0x37fd;return(0,s.ap)(n,f(469)),!n.smoothing&&n[f(495)]<=1?function(t){const a=a25_0x37fd,n=t[a(486)],s=t[a(484)];n.x=Math[a(479)](n.x),n.y=Math[a(479)](n.y),s.x=Math[a(479)](s.x),s.y=Math[a(479)](s.y);const f=t[a(469)][a(462)],c=t[a(469)][a(462)],u=(0,i.tH)(n.x,n.y,s.x,s.y);if(u[a(445)]=(0,h.u)(Math.floor(u[a(445)]),f,0),u[a(494)]=(0,h.u)(Math.ceil(u[a(494)]),f,0),u[a(497)]=(0,h.u)(Math[a(483)](u[a(497)]),c,0),u[a(468)]=(0,h.u)(Math[a(483)](u[a(468)]),c,0),t[a(442)]&&(t[a(442)][a(445)]>u.left&&(u[a(445)]=Math[a(466)](t[a(442)][a(445)],u[a(494)])),t[a(442)][a(494)]<u[a(494)]&&(u[a(494)]=Math.max(t[a(442)][a(494)],u.left)),t.selection[a(497)]>u.top&&(u[a(497)]=Math[a(466)](t[a(442)][a(497)],u[a(468)])),t[a(442)].bottom<u.bottom&&(u[a(468)]=Math.max(t[a(442)][a(468)],u.top))),u.left===u.right||u[a(497)]===u[a(468)])throw new Error(a(457));let d=(0,e.X$)(Math[a(447)]((0,i.Oq)(u),(0,i.rY)(u)),f*c*4,!0),l=new Uint8Array(new SharedArrayBuffer(4*d[a(452)])),M=new Uint8Array(new SharedArrayBuffer(4*d.length)),x=0,g=0;(0,o.j)(t.color,n.x,n.y,s.x,s.y,((n,o,h)=>{const i=a;n<u.left||n>=u.right||o<u[i(497)]||o>=u[i(468)]||(x>=d[i(452)]&&(d=(0,e.Rs)(d),l=(0,e.Rs)(l),M=(0,e.Rs)(M)),g=4*(o*f+n),d[x]=g,(0,e.Yr)(l,4*x,t[i(469)][i(467)],g),t[i(460)]===i(461)?t[i(469)][i(467)][i(453)](h,g):(0,r.B)(t[i(460)],t.targetImage.data,g,h,0),(0,e.Yr)(M,4*x++,t[i(469)].data,g))}),t[a(491)],t[a(495)]);const y=d[a(474)](0,x);return{undoData:{indexList:y,colorData:l[a(474)](0,4*x)},redoData:{indexList:y,colorData:M[a(474)](0,4*x)},range:u}}(n):function(t,a){const n=a25_0x37fd,o=a[n(486)],s=a.pointB,f=a.targetImage[n(462)],c=a[n(469)][n(499)],u=(0,i.tH)(o.x+.5,o.y+.5,s.x+.5,s.y+.5);u[n(445)]=Math[n(459)](u[n(445)]),u.right=Math.ceil(u[n(494)]),u[n(497)]=Math[n(459)](u[n(497)]),u[n(468)]=Math.ceil(u[n(468)]);const d=Math[n(483)](a[n(495)]/2);if(u[n(445)]-=d,u[n(494)]+=d,u[n(497)]-=d,u[n(468)]+=d,u.left=(0,h.u)(Math[n(459)](u[n(445)]),f,0),u[n(494)]=(0,h.u)(Math[n(483)](u.right),f,0),u.top=(0,h.u)(Math[n(483)](u[n(497)]),c,0),u[n(468)]=(0,h.u)(Math.ceil(u[n(468)]),c,0),a[n(442)]&&(a[n(442)][n(445)]>u[n(445)]&&(u[n(445)]=Math.min(a[n(442)][n(445)],u.right)),a[n(442)][n(494)]<u.right&&(u[n(494)]=Math[n(447)](a[n(442)][n(494)],u[n(445)])),a[n(442)][n(497)]>u.top&&(u[n(497)]=Math[n(466)](a[n(442)][n(497)],u[n(468)])),a[n(442)][n(468)]<u[n(468)]&&(u[n(468)]=Math[n(447)](a[n(442)].bottom,u.top))),u[n(445)]===u[n(494)]||u[n(497)]===u[n(468)])throw new Error(n(457));const l=(0,i.Oq)(u),M=(0,i.rY)(u),x=.5,g=.5,y=.5,p=.5,w=new OffscreenCanvas(l,M).getContext("2d");if(!w)throw new Error(n(492));w[n(485)]=n(488)+a.color[0]+","+a[n(443)][1]+","+a.color[2]+","+a[n(443)][3]/255+")",w[n(477)]=a.strokeWidth,w[n(448)](),a.smoothing||a[n(495)]%2!=0?(w.moveTo(o.x-u[n(445)]+x,o.y-u[n(497)]+g),w[n(489)](s.x-u[n(445)]+y,s.y-u[n(497)]+p)):(w[n(473)](Math[n(479)](o.x-u.left+x),Math[n(479)](o.y-u[n(497)]+g)),w[n(489)](Math[n(479)](s.x-u[n(445)]+y),Math[n(479)](s.y-u[n(497)]+p))),w[n(440)]();const m=w[n(444)](0,0,l,M),b=(0,e.X$)(f*c,f*c*4,!0),I=(0,e.X$)(f*c*2,Math[n(447)](f,c),!0);let _=0,v=0,k=0,D=0;if(a.smoothing)for(k=0;k<M;k++)for(v=0;v<l;v++)D=4*(k*l+v),m[n(467)][D+3]>0&&(I[2*_]=v,I[2*_+1]=k,b[_++]=4*((u[n(497)]+k)*f+u[n(445)]+v));else for(k=0;k<M;k++)for(v=0;v<l;v++)D=4*(k*l+v),m[n(467)][D+3]>a[n(443)][3]/2&&(m.data[D+3]=a[n(443)][3],I[2*_]=v,I[2*_+1]=k,b[_++]=4*((u.top+k)*f+u[n(445)]+v));const A=b[n(474)](0,_);t[n(471)](.25);const B=new Uint8Array(new SharedArrayBuffer(4*b[n(452)]));for(D=0;D<b[n(452)];D++)(0,e.Yr)(B,4*D,a[n(469)][n(467)],b[D]);if(t[n(471)](.5),a[n(460)]===n(461))for(D=0;D<A[n(452)];D++)(0,e.Yr)(a.targetImage[n(467)],A[D],m[n(467)],4*(I[2*D+1]*l+I[2*D]));else for(D=0;D<A.length;D++)(0,r.B)(a[n(460)],a[n(469)][n(467)],A[D],m.data,4*(I[2*D+1]*l+I[2*D]));t[n(471)](.75);const E=new Uint8Array(new SharedArrayBuffer(4*b[n(452)]));for(D=0;D<b[n(452)];D++)(0,e.Yr)(E,4*D,a[n(469)][n(467)],b[D]);return t.update(1),{undoData:{indexList:A,colorData:B},redoData:{indexList:A,colorData:E},range:u}}(a,n)}},7742:(t,a,n)=>{"use strict";n.d(a,{ap:()=>r,TO:()=>o,zg:()=>h});var e=n(1003);function r(t,a){const n=a25_0x37fd,e=t[a];if(e[n(462)]<1||e[n(499)]<1)throw new Error(n(472)+a+n(498)+e.width+n(480)+e[n(499)])}function o(t,a,n){const e=a25_0x37fd,r=t[a],o=t[n];if(r.width===o[e(462)]&&r[e(499)]===o.height)throw new Error(e(441)+a+e(455)+n+e(458))}function h(t,a,n){const r=a25_0x37fd,o=t[a];if(!(0,e.ur)(n,o))throw new Error(r(470)+a+'" '+(0,e.PW)(o)+r(490)+(0,e.PW)(n))}},1019:(t,a,n)=>{"use strict";n.d(a,{X:()=>r,j:()=>o});var e=n(9455);function r(t,a,n,r,o,h){const i=a25_0x37fd,s=(0,e.zz)(t,a,n,r),f=.5*h*o*Math[i(449)](s),c=.5*h*o*Math.cos(s);return[{x:t-f,y:a-c},{x:t+f,y:a+c},{x:n+f,y:r+c},{x:n-f,y:r-c}]}function o(t,a,n,e,r,o,u,d=1){u?function(t,a,n,e,r,o,h){const i=a25_0x37fd;h<1&&(t=c(t,h));const u=Math.abs(r-n)>Math[i(500)](e-a);let d=0;u&&(d=a,a=n,n=d,d=e,e=r,r=d),a>e&&(d=a,a=e,e=d,d=n,n=r,r=d);const l=e-a;let M=(r-n)/l;0===l&&(M=1);let x=Math[i(479)](a),g=n+M*(x-a),y=f(a+.5);const p=x,w=Math[i(459)](g);let m=s(g)*y;u?(o(w,p,c(t,f(g)*y)),m>0&&o(w+1,p,c(t,m))):(o(p,w,c(t,f(g)*y)),m>0&&o(p,w+1,c(t,m)));let b=g+M;x=Math[i(479)](e),g=r+M*(x-e),y=s(e+.5);const I=x,_=Math[i(459)](g);if(m=s(g)*y,u?(o(_,I,c(t,f(g)*y)),m>0&&o(_+1,I,c(t,s(g)*y))):(o(I,_,c(t,f(g)*y)),m>0&&o(I,_+1,c(t,s(g)*y))),u)for(let a=p+1;a<I;a++)o(Math[i(459)](b),a,c(t,f(b))),m=s(b),m>0&&o(Math[i(459)](b)+1,a,c(t,m)),b+=M;else for(let a=p+1;a<I;a++)o(a,Math[i(459)](b),c(t,f(b))),m=s(b),m>0&&o(a,Math[i(459)](b)+1,c(t,m)),b+=M}(t,a,n,e,r,o,d):function(t,a,n,e,r,o,s){const f=a25_0x37fd;s<1&&(t=c(t,s)),Math[f(500)](r-n)<Math.abs(e-a)?a>e?h(t,e,r,a,n,o):h(t,a,n,e,r,o):n>r?i(t,e,r,a,n,o):i(t,a,n,e,r,o)}(t,a,n,e,r,o,d)}function h(t,a,n,e,r,o){const h=e-a;let i=r-n,s=1;i<0&&(s=-1,i=-i);let f=2*i-h,c=n;for(let n=a;n<=e;n++)o(n,c,t),f>0?(c+=s,f+=2*(i-h)):f+=2*i}function i(t,a,n,e,r,o){let h=e-a;const i=r-n;let s=1;h<0&&(s=-1,h=-h);let f=2*h-i,c=a;for(let a=n;a<=r;a++)o(c,a,t),f>0?(c+=s,f+=2*(h-i)):f+=2*h}function s(t){return t%1}function f(t){return 1-t%1}function c(t,a){const n=a25_0x37fd;if(void 0===t)return;const e=t[n(446)](0);return e[3]=Math[n(479)](e[3]*a),e}},9455:(t,a,n)=>{"use strict";function e(t,a,n,e){return 180*r(t,a,n,e)/Math.PI}function r(t,a,n,e){let r=-Math[a25_0x37fd(496)](e-a,n-t);return-180===r&&(r=180),r}function o(t){return t*Math.PI/180}function h(t,a,n,e,r,o){const h=a25_0x37fd,i=Math[h(501)](Math[h(475)](t-n,2)+Math[h(475)](a-e,2)),s=Math[h(501)](Math[h(475)](n-r,2)+Math[h(475)](e-o,2)),f=Math[h(501)](Math[h(475)](r-t,2)+Math[h(475)](o-a,2)),c=(i+s+f)/2;return Math[h(501)](c*(c-i)*(c-s)*(c-f))}function i(t,a,n,e,r,o,i,s){return h(t,a,n,e,r,o)+h(n,e,r,o,i,s)+h(r,o,i,s,t,a)+h(i,s,t,a,n,e)}n.d(a,{AM:()=>e,zz:()=>r,Ht:()=>o,ku:()=>h,hu:()=>i})}}]);