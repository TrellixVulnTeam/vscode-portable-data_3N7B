const a18_0x4d06=["onUpdate","_cropToSelectionAction","1663IFjPGq","event","height","307873MieAuq","268CsqUft","Deselect","pointerDown","_onUpdate","fire","imageService","keyUp","_refreshActionEnabledState","abs","_sc","sign","_originY","_updateSelection","actions","width","9ThAzSy","72YapOdB","_targetY","isSelectionTool","left","_enabled","enabled","altKey","commit","range","register","57AYvJyp","bottom","selectionService","_targetX","Rectangle Selection","1088rJtABm","811419KkbJfR","shiftKey","getCoordsFromEvent","442iJFqmq","right","top","11438gOLcwh","43LqoXTr","webpackChunkluna","crop-to-selection","_originX","2345wHuIEA","5109ouKnkB","type","viewportService"],a18_0x5227=function(t,i){return a18_0x4d06[t-=122]},a18_0x1d0876=a18_0x5227;(function(t,i){const s=a18_0x5227;for(;;)try{if(703458===parseInt(s(142))*-parseInt(s(151))+parseInt(s(130))+-parseInt(s(167))*parseInt(s(136))+-parseInt(s(133))*parseInt(s(129))+parseInt(s(137))*-parseInt(s(147))+parseInt(s(124))*-parseInt(s(141))+-parseInt(s(166))*-parseInt(s(150)))break;t.push(t.shift())}catch(i){t.push(t.shift())}})(a18_0x4d06),(self[a18_0x1d0876(138)]=self[a18_0x1d0876(138)]||[]).push([[40],{6173:(t,i,s)=>{"use strict";const e=a18_0x1d0876;s.d(i,{f:()=>h});var o=s(1815),n=s(5120);class h extends n.JT{constructor(t,i,s){const e=a18_0x5227;super(),this.name=t,this[e(143)]=i,this._enabled=s,this[e(154)]=this[e(123)](new o.v),this[e(145)]=this._onUpdate[e(148)]}get[e(172)](){return this._enabled}set[e(172)](t){const i=e;this[i(171)]!==t&&(this[i(171)]=t,this._onUpdate[i(155)]())}}},3040:(t,i,s)=>{"use strict";const e=a18_0x1d0876;s.r(i),s.d(i,{default:()=>c});var o=s(5120),n=s(2939),h=s(1003),r=s(6173);class a extends o.JT{constructor(t){const i=a18_0x5227;super(),this[i(160)]=t,this.id="selection",this[i(169)]=!0,this._originX=0,this[i(162)]=0,this[i(146)]=new r.f("Crop to Selection",i(139),!1),this[i(164)]=[this[i(146)]],this[i(123)](this[i(160)][i(126)][i(145)]((()=>this[i(158)]()))),this._refreshActionEnabledState()}keyDown(t,i){this._updateSelection(t,i)}[e(157)](t,i){this._updateSelection(t,i)}[e(153)](t){const i=e;(this[i(160)][i(126)][i(122)]||void 0!==this[i(127)]||void 0!==this[i(168)])&&(this[i(127)]=void 0,this._targetY=void 0,this[i(160)].selectionService.range=void 0),[this._originX,this[i(162)]]=this[i(160)][i(144)][i(132)](t)}pointerUp(t,i){const s=e;if(i||void 0===this[s(127)]||void 0===this[s(168)]){this[s(160)][s(126)][s(122)]=void 0;const t=void 0===this._sc[s(126)][s(122)]?"Deselect":s(128);return void this[s(160)][s(126)][s(174)](t)}this[s(163)](t,!1);const o=void 0===this[s(160)][s(126)][s(122)]?s(152):s(128);this[s(160)][s(126)][s(174)](o)}pointerDownMove(t){const i=e;[this._targetX,this[i(168)]]=this[i(160)][i(144)][i(132)](t),this[i(163)](t,!0)}[e(163)](t,i){const s=e;if(!i||void 0===this[s(127)]||void 0===this[s(168)])return;let o=this[s(127)]-this[s(140)],r=this[s(168)]-this._originY;t[s(131)]&&(Math[s(159)](o)>Math[s(159)](r)?o=r*(Math[s(161)](o)!==Math[s(161)](r)?-1:1):r=o*(Math[s(161)](o)!==Math[s(161)](r)?-1:1));const a=this[s(160)][s(156)][s(165)],c=this._sc[s(156)][s(149)],d=(0,h.Pq)();r<0?(d.top=(0,n.u)(this[s(162)]+r,c),d.bottom=(0,n.u)(this._originY+1+(t[s(173)]?-r:0),c)):(d[s(125)]=(0,n.u)(this[s(162)]+r+1,c),d[s(135)]=(0,n.u)(this[s(162)]+(t.altKey?-r:0),c)),o<0?(d[s(170)]=(0,n.u)(this._originX+o,a),d[s(134)]=(0,n.u)(this._originX+1+(t[s(173)]?-o:0),a)):(d.right=(0,n.u)(this[s(140)]+o+1,a),d.left=(0,n.u)(this[s(140)]+(t[s(173)]?-o:0),a)),this[s(160)][s(126)][s(122)]=d,this[s(160)][s(126)].validate(a,c)}[e(158)](){const t=e,i=this._sc[t(126)].range;this._cropToSelectionAction[t(172)]=!(!i||0===i.left&&0===i[t(135)]&&i.right===this[t(160)].imageService[t(165)]&&i.bottom===this[t(160)].imageService[t(149)])}}const c=a}}]);