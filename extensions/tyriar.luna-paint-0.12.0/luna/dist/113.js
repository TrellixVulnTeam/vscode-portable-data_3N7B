const a19_0x31a2=["onCommit","1.1","853686jywlom","_range","setAttribute","triangle","webpackChunkluna","replace","primaryColor","bottom","stroke","number","configService","new","_updateShape","registerTemporaryLayer","ArrowDown","Set Shape Color","rgba","string-combo","getPointerState","flipX","_imageService","height","9659rZKBAr","ArrowUp","_getLayer","viewportService","pointerUp","_onHistoryUpdateValue","push","_updateType","shapeLayer","get","_directionalMoveElements","version","getDetailedInfo","right","allowUnchecking","_isYFlipping","Blend Mode","_setState","setValueFromHistoryChange","screen"," y=","taskWorkerService","setRange","_elementContainer","_onRequestRender","round","key","Set Shape Type","left","getSnapSettingCoordsFromEvent","options","add","default","string","_cursorOriginalShape","_sizeInfo","none","offsetY","3CXWDZQ","_styleOption","softLight","keyDown","min","113cxJsri","bind","_container","22691ChTATi","createElement"," pixels wide by ","offsetX","visible","snapToPixelGrid","_cursorOrigin","_viewportService","Fill","altKey","_finish","_shapeOrigin","difference","transparent","diamond","prepend","_outlineModel","_smoothingOption","bottomright","name","display","paletteService","_updateSmoothing","Fill and outline","_shapeOtherPoint","fire","event","_renderer","linearDodgeAdd","clientWidth","_refreshInfo","onUpdate","_triangleTypeOption","onHistoryUpdateValue","_topLeftInfo","ellipse","block","style","MoveImageRangeRenderer","_rightTriangleTypeOption","_onStateChange","ArrowRight","render","113306zNfmCp","Set Shape Blend Mode","hasImage","_blendModeOption","pointerDownMove","darken","shiftKey","_updateColors","clientHeight","type","imageService","smoothing","move","removeChild","outlineSize","appendChild","_allowNewState","classList","hasShapeLayer","then","Enable","_model","shape","_clearShapeLayer"," Shape Smoothing","topright","Disable","_svgPath","secondaryColor","getInfo","onStateChange","createElementNS","temporaryLayer","onBeforeRunLayerTask","Diamond","flipY","_setupActiveTemporaryLayer","set","Shape top left position is x=","state","max","path","20UwThiP","_getRange","_directionalMoveZones","info","getOutlineSvgPath","multiply","_typeOptions","_onOptionsChange","range","pointerDown","setVisible","order","createDomRenderProgram","setColors","step","bottomleft","_sc","Outline","secondary","Resize Shape","historyService","zoom","_createRange","Ellipse","_cursorCurrent","_diamondTypeOption","taskService","Move Shape","top","unregisterTemporaryLayer","toString","position","_getTypeValue","_onUpdate","onLayerChange","1196340lXowpg","strokeWidth","append","lighten","_svg","fill","config","primary","Smoothing","topleft","includes","161642nfsyWm","commit","currentLayer","linearBurn","value","pointerMove","keyUp","_getStyleValue","currentState","triggerRequestRender","sign","exclusion","_isXFlipping","_isVisible","absolute","devicePixelRatio","var(--luna-focusColor)","_updateStyle","_value","rightTriangle","_outlineSizeOption","register","424729aZRUGG","normal","ctrlKey","serialize","buttons","div","Shape size is ","ArrowLeft","_getStyleString","_updateBlendMode","abs","_svgPath2","width","_ellipseTypeOption","http://www.w3.org/2000/svg","onHistoryUnset","floor","onHistoryAction"],a19_0x1ce0=function(t,s){return a19_0x31a2[t-=101]},a19_0x3c265c=a19_0x1ce0;(function(t,s){const e=a19_0x1ce0;for(;;)try{if(678242===parseInt(e(233))+-parseInt(e(255))*parseInt(e(298))+parseInt(e(103))+parseInt(e(145))*-parseInt(e(301))+parseInt(e(180))+-parseInt(e(191))*-parseInt(e(293))+-parseInt(e(213)))break;t.push(t.shift())}catch(s){t.push(t.shift())}})(a19_0x31a2),(self[a19_0x3c265c(237)]=self[a19_0x3c265c(237)]||[])[a19_0x3c265c(261)]([[113,504],{3315:(t,s,e)=>{"use strict";const i=a19_0x3c265c;e.d(s,{d:()=>c});var h=e(5120),r=e(1003),n=e(1674);let o,a;class c extends h.JT{constructor(t,s,e,i){const h=a19_0x1ce0;super(),this._container=t,this[h(253)]=s,this[h(308)]=e,this[h(124)]=i,this[h(156)]=2,this._svg=document[h(134)](n.q,"svg"),this[h(184)].setAttribute(h(266),h(232)),this[h(184)][h(338)][h(176)]=h(205),this[h(130)]=document.createElementNS(n.q,h(144)),this[h(130)][h(338)][h(241)]=h(207),this[h(130)][h(338)][h(185)]=h(314),this[h(130)].style.strokeWidth="1",this[h(224)]=document[h(134)](n.q,h(144)),this[h(224)][h(338)].stroke="var(--luna-focusColor)",this._svgPath2[h(338)][h(185)]=h(314),this[h(224)][h(338)][h(181)]="1",this[h(184)][h(182)](this[h(130)],this[h(224)]),this[h(300)][h(316)](this[h(184)]),this[h(212)]({dispose:()=>this[h(300)][h(116)](this._svg)})}async[i(102)](){const t=i,s=this[t(124)][t(153)],h=this._viewportService;if(!s)return void(this._svg[t(338)].display=t(291));if(this[t(184)][t(338)][t(321)]=t(337),!this._imageService[t(193)])return;if(o!==this[t(124)].shape){let s;switch(o=this._model[t(125)],o){case t(315):s=e.e(727).then(e[t(299)](e,727));break;case t(336):s=e.e(459)[t(122)](e[t(299)](e,8459));break;case t(236):s=e.e(12).then(e[t(299)](e,4012));break;case t(210):s=e.e(243)[t(122)](e.bind(e,6243));break;default:s=void 0}a=s?new Promise((async e=>{const i=t;e(new((await s)[i(287)]))})):s}const n=await a,c=Math[t(280)](this[t(300)][t(330)]/2)-this[t(253)][t(225)]/2*h.zoom+h.x*h.zoom,p=Math[t(280)](this[t(300)][t(111)]/2)-this[t(253)].height/2*h.zoom+h.y*h.zoom,l=(0,r.Oq)(s)*h[t(166)],u=(0,r.rY)(s)*h[t(166)];this[t(184)][t(338)][t(283)]=c+s[t(283)]*h[t(166)]-2+"px",this[t(184)][t(338)][t(173)]=p+s[t(173)]*h[t(166)]-2+"px",this[t(184)][t(235)](t(225),(l+5)[t(175)]()),this[t(184)][t(235)](t(254),(u+5)[t(175)]()),this[t(130)].setAttribute("d","M2.5 2.5 h"+l+" v"+u+" h"+-l+" v"+-u),n?.getOutlineSvgPath?(this._svgPath2[t(338)].display=t(337),this[t(224)][t(235)]("d",n[t(149)](l,u,this._model[t(252)],this[t(124)].flipY))):this[t(224)][t(338)][t(321)]=t(291)}}},9865:(t,s,e)=>{"use strict";e.d(s,{q:()=>r});var i=e(1815),h=e(5120);class r extends h.JT{constructor(){const t=a19_0x1ce0;super(...arguments),this[t(178)]=this[t(212)](new i.v),this[t(332)]=this._onUpdate[t(327)]}}},9904:(t,s,e)=>{"use strict";const i=a19_0x3c265c;e.d(s,{FV:()=>o,rP:()=>a,tv:()=>c,Jp:()=>p,X5:()=>l,qv:()=>u});var h=e(1815),r=e(5120),n=e(2939);class o extends r.JT{constructor(t,s,e,i=!0){const r=a19_0x1ce0;super(),this[r(320)]=t,this[r(105)]=s,this[r(209)]=e,this[r(269)]=i,this[r(112)]="boolean",this._onHistoryUpdateValue=this.register(new h.v),this.onHistoryUpdateValue=this[r(260)][r(327)],this[r(178)]=this[r(212)](new h.v),this[r(332)]=this[r(178)].event}get[i(195)](){return this[i(209)]}set[i(195)](t){const s=i;this[s(209)]=t,this[s(178)].fire()}[i(273)](t){this._value=t,this._onHistoryUpdateValue.fire(t)}}class a extends r.JT{constructor(t,s,e){const r=i;super(),this.name=t,this[r(285)]=s,this[r(209)]=e,this[r(112)]=r(288),this[r(260)]=this[r(212)](new h.v),this.onHistoryUpdateValue=this[r(260)][r(327)],this._onUpdate=this[r(212)](new h.v),this.onUpdate=this._onUpdate.event}get[i(195)](){return this[i(209)]}set value(t){const s=i;this[s(209)]=t,this[s(178)][s(326)]()}[i(273)](t){const s=i;this[s(209)]=t,this[s(260)][s(326)](t)}}class c extends r.JT{constructor(t,s,e){const r=i;super(),this[r(320)]=t,this[r(285)]=s,this[r(209)]=e,this[r(112)]=r(250),this[r(260)]=this[r(212)](new h.v),this[r(334)]=this[r(260)].event,this[r(178)]=this.register(new h.v),this[r(332)]=this[r(178)][r(327)]}get[i(195)](){return this[i(209)]}set[i(195)](t){const s=i;this[s(209)]=t,this[s(178)][s(326)]()}[i(273)](t){const s=i;this[s(209)]=t,this[s(260)][s(326)](t)}}class p extends a{constructor(){const t=i;super(t(271),["normal",t(238),t(108),t(150),"linearBurn","lighten",t(274),t(329),"overlay",t(295),t(313),t(202)],t(214))}}class l extends r.JT{constructor(t,s,e,r){const n=i;super(),this.name=t,this._value=s,this[n(297)]=e,this.max=r,this[n(112)]=n(242),this[n(260)]=this.register(new h.v),this[n(334)]=this[n(260)][n(327)],this[n(178)]=this[n(212)](new h.v),this[n(332)]=this[n(178)][n(327)]}get[i(195)](){const t=i;return(0,n.u)(this[t(209)],this[t(143)],this.min)}set value(t){const s=i;this._value=t,this[s(178)].fire()}[i(273)](t){const s=i;this[s(209)]=t,this[s(260)].fire(t)}}class u extends l{constructor(t,s,e,h){const r=i;super(t,s,e,h),this[r(112)]=r(242)}get[i(195)](){const t=i;return(0,n.u)(this[t(209)],this[t(143)],this[t(297)])}set[i(195)](t){const s=i;this[s(209)]=Math[s(229)](t),this[s(178)][s(326)]()}}},504:(t,s,e)=>{"use strict";const i=a19_0x3c265c;e.r(s),e.d(s,{MoveImageRangeRenderer:()=>n});var h=e(5120),r=e(1003);class n extends h.JT{constructor(t,s,e,i,h){const n=a19_0x1ce0;super(),this[n(300)]=t,this._getRange=s,this[n(119)]=e,this._viewportService=i,this[n(253)]=h,this[n(156)]=2,this[n(265)]=new Map,this[n(147)]=new Map,this[n(204)]=!0,this._elementContainer=document[n(302)](n(218));const o=[n(189),n(128),n(160),n(319),n(173),"bottom",n(283),n(268)];for(const t of o){const s=document[n(302)]("div");s[n(120)][n(286)]("move-handle",t),this._elementContainer[n(118)](s),this[n(265)][n(140)](t,s),this[n(147)].set(t,(0,r.Pq)())}this._container[n(118)](this._elementContainer),this[n(212)]({dispose:()=>{const t=n;this[t(300)][t(116)](this[t(278)])}})}[i(155)](t){const s=i;t!==this[s(204)]&&(this[s(278)][s(338)][s(321)]=t?"":"none",this[s(204)]=t)}[i(277)](t){}render(){const t=i,s=this._getRange();if(!s)return;const e=this[t(253)].currentLayer;if(!e)return;const h=this._viewportService,r=Math[t(280)](this[t(300)][t(330)]/2)-e.width/2*h.zoom,n=Math[t(280)](this[t(300)][t(111)]/2)-e[t(254)]/2*h[t(166)],o=r+(h.x+s[t(283)])*h[t(166)],a=n+(h.y+s[t(173)])*h[t(166)],c=r+(h.x+s[t(268)])*h[t(166)],p=n+(h.y+s[t(240)])*h[t(166)],l=Math[t(280)]((o+c)/2),u=Math[t(280)]((a+p)/2),g=10*window[t(206)],d={left:Math[t(297)](o+g,Math[t(143)](o,l-g)),top:Math[t(297)](a+g,Math[t(143)](a,u-g)),right:Math[t(143)](c-g,Math[t(297)](c,l+g)),bottom:Math[t(143)](p-g,Math[t(297)](p,u+g))},_={left:o-g,top:a-g,right:c+g,bottom:p+g},y=this._directionalMoveZones.get(t(189));y[t(283)]=_[t(283)],y.right=d[t(283)],y[t(173)]=_[t(173)],y.bottom=d[t(173)];const m=this[t(265)][t(264)](t(189));m.style[t(283)]=o+"px",m[t(338)][t(173)]=a+"px";const f=this[t(147)].get(t(128));f.left=d[t(268)],f[t(268)]=_[t(268)],f[t(173)]=_[t(173)],f.bottom=d[t(173)];const v=this[t(265)][t(264)](t(128));v[t(338)][t(283)]=c+"px",v[t(338)].top=a+"px";const S=this._directionalMoveZones[t(264)](t(160));S.left=_[t(283)],S[t(268)]=d[t(283)],S.top=d[t(240)],S.bottom=_[t(240)];const w=this[t(265)][t(264)](t(160));w.style.left=o+"px",w[t(338)][t(173)]=p+"px";const b=this[t(147)][t(264)](t(319));b[t(283)]=d[t(268)],b[t(268)]=_[t(268)],b.top=d.bottom,b.bottom=_[t(240)];const x=this[t(265)][t(264)](t(319));x.style.left=c+"px",x[t(338)].top=p+"px";const M=this[t(147)].get("top");M[t(283)]=d[t(283)],M[t(268)]=d[t(268)],M[t(173)]=_[t(173)],M[t(240)]=d[t(173)];const O=this._directionalMoveElements[t(264)]("top");O.style[t(283)]=l+"px",O[t(338)].top=a+"px";const C=this[t(147)][t(264)](t(240));C[t(283)]=d[t(283)],C.right=d.right,C.top=d[t(240)],C[t(240)]=_.bottom;const L=this._directionalMoveElements[t(264)](t(240));L.style.left=l+"px",L[t(338)].top=p+"px";const T=this[t(147)][t(264)](t(283));T[t(283)]=_[t(283)],T[t(268)]=d[t(283)],T[t(173)]=d.top,T[t(240)]=d.bottom;const R=this[t(265)][t(264)]("left");R.style[t(283)]=o+"px",R[t(338)][t(173)]=u+"px";const k=this[t(147)][t(264)](t(268));k[t(283)]=d[t(268)],k[t(268)]=_[t(268)],k[t(173)]=d[t(173)],k[t(240)]=d[t(240)];const V=this[t(265)][t(264)]("right");V.style[t(283)]=c+"px",V[t(338)][t(173)]=u+"px"}[i(251)](t){const s=i;if(!this[s(146)]())return this[s(119)]?s(244):"move";for(const[e,i]of this._directionalMoveZones)if((0,r.RB)(i,t[s(304)],t[s(292)]))return e;const e=this[s(147)][s(264)](s(189)),h=this[s(147)].get("bottomright"),n={left:e.left,top:e[s(173)],right:h[s(268)],bottom:h.bottom};return(0,r.RB)(n,t[s(304)],t[s(292)])?s(115):this[s(119)]?s(244):s(115)}}},9113:(t,s,e)=>{"use strict";const i=a19_0x3c265c;e.r(s),e.d(s,{default:()=>y});var h=e(8752),r=e(1815),n=e(5120),o=e(2939),a=e(7896),c=e(1003),p=e(3670),l=e(3315),u=e(9865),g=e(9904),d=e(504);class _ extends n.JT{constructor(t){const s=a19_0x1ce0;super(),this._sc=t,this.id="shape",this[s(142)]="new",this[s(317)]=new m((()=>this.shapeLayer)),this[s(226)]=new g.FV(s(168),!0,!0,!1),this[s(333)]=new g.FV("Triangle",!0,!1,!1),this[s(340)]=new g.FV("Right-angle Triangle",!0,!1,!1),this[s(170)]=new g.FV(s(137),!0,!1),this[s(106)]=new g.Jp,this._smoothingOption=new g.FV(s(188),!0,!0),this[s(294)]=new g.rP("Style",[s(162),s(309),"Fill and outline"],s(162)),this[s(211)]=new g.qv("Outline Size",1,1,1e3),this[s(151)]=[this._ellipseTypeOption,this[s(333)],this._rightTriangleTypeOption,this[s(170)]],this[s(285)]=[...this._typeOptions,this[s(106)],this[s(294)],this[s(318)],this[s(211)]],this[s(290)]=new f,this[s(335)]=new v,this[s(148)]=[this[s(335)],this[s(290)]],this[s(279)]=this[s(212)](new r.v),this.onRequestRender=this[s(279)][s(327)],this[s(341)]=this[s(212)](new r.v),this[s(133)]=this._onStateChange[s(327)],this[s(212)](this[s(161)][s(322)][s(332)]((()=>this[s(110)]()))),this[s(212)](this[s(294)][s(332)]((()=>this[s(208)]()))),this.register(this[s(318)][s(332)]((()=>this._updateSmoothing()))),this.register(this._outlineSizeOption[s(332)]((()=>this._updateOutlineSize()))),this[s(212)](this._blendModeOption[s(332)]((()=>this[s(222)]())));for(const t of this[s(151)])this.register(t[s(332)]((()=>this[s(262)](t))));this[s(212)](this[s(161)][s(113)][s(179)]((()=>this[s(311)]()))),this[s(212)](this[s(161)][s(171)][s(136)]((()=>this[s(311)]()))),this[s(212)]({dispose:()=>this._finish()}),this[s(212)](this[s(161)][s(113)].onTemporaryLayerRegistered((t=>this[s(139)](t)))),this[s(161)][s(113)][s(193)]?.[s(135)]&&this[s(139)](this[s(161)].imageService[s(193)][s(135)])}_setupActiveTemporaryLayer(t){const s=a19_0x1ce0;t[s(112)]===s(125)&&(this[s(263)]=t,this[s(212)](this.shapeLayer[s(231)]((()=>this[s(126)]()))),this[s(212)](this.shapeLayer[s(230)]((()=>{const t=s;this[t(152)](),this[t(331)]()}))),this[s(212)](this.shapeLayer[s(228)]((()=>this._clearShapeLayer()))),this[s(312)]=[this[s(263)].currentState.range[s(283)],this[s(263)][s(199)][s(153)][s(173)]],this[s(325)]=[this[s(263)][s(199)][s(153)][s(268)],this[s(263)].currentState[s(153)][s(240)]],this[s(328)]?.[s(155)](!0),this[s(279)][s(326)]())}[i(296)](t,s){const e=i;if(this[e(245)](t,s),this[e(263)]&&!s&&[e(256),e(220),e(247),e(101)][e(190)](t[e(281)])){const s=(0,c.BN)(this[e(263)][e(199)][e(153)]),i=(a.V5?t.metaKey:t[e(215)])?10:1;switch(t[e(281)]){case"ArrowUp":(0,c.Hd)(s,s[e(283)],s[e(173)]-i);break;case e(247):(0,c.Hd)(s,s[e(283)],s[e(173)]+i);break;case e(220):(0,c.Hd)(s,s[e(283)]-i,s[e(173)]);break;case e(101):(0,c.Hd)(s,s.left+i,s[e(173)])}this[e(263)][e(199)][e(153)]=s,this.shapeLayer[e(159)]("Shift Shape")}}[i(197)](t,s){this._updateShape(t,s)}async[i(154)](t){const s=i,e=this[s(161)][s(113)][s(193)];if(!e)return;const h=!(1&t[s(217)]),r=this._sc.viewportService[s(284)](t,this._smoothingOption.value);if(this[s(307)]=r,this._cursorCurrent=r,!r)return;if(this[s(270)]=!1,this._isXFlipping=!1,"new"!==this.state)return this[s(289)]=(0,c.BN)(this[s(263)]?.[s(199)][s(153)]),void(this[s(289)]&&((this[s(142)]===s(173)||"topleft"===this.state||this.state===s(128))&&(this[s(307)][1]=this[s(289)][s(173)]),(this[s(142)]===s(240)||this[s(142)]===s(160)||"bottomright"===this[s(142)])&&(this[s(307)][1]=this._cursorOriginalShape[s(240)]-1),(this[s(142)]===s(283)||this[s(142)]===s(189)||this[s(142)]===s(160))&&(this[s(307)][0]=this[s(289)].left),(this[s(142)]===s(268)||"topright"===this[s(142)]||"bottomright"===this.state)&&(this[s(307)][0]=this._cursorOriginalShape.right-1)));await this[s(311)](),this[s(312)]=r,this[s(325)]=r;const n=this[s(167)](this[s(312)],this[s(325)]),o=this[s(177)]();this._cursorOriginalShape=(0,c.BN)(n),this[s(263)]=new p.n(e,{invertColors:h},{type:o,range:n,primaryColor:this[s(161)][s(322)][s(187)][s(249)],secondaryColor:this[s(161)][s(322)][s(163)][s(249)],blendMode:this[s(106)][s(195)],outlineSize:this[s(211)][s(195)],style:this._getStyleValue(),smoothing:this._smoothingOption.value,flipX:!1,flipY:!1},this._sc[s(165)],this[s(161)].selectionService,this._sc[s(276)]),this._refreshInfo(),await e[s(246)](this[s(263)]),this._renderer?.setVisible(!1),this[s(263)][s(200)]()}[i(259)](t,s){const e=i;if(this[e(142)]===e(244)&&(s||this[e(169)]?.[0]===this[e(307)]?.[0]&&this[e(169)]?.[1]===this._cursorOrigin?.[1]))return this.shapeLayer&&this[e(161)][e(113)][e(193)]?.[e(174)](this[e(263)]),this[e(263)]?.dispose(),void this[e(126)]();if(this[e(263)]){let t;switch(this[e(142)]){case e(244):t="Draw Shape";break;case e(115):t=e(172);break;case e(189):case e(128):case e(160):case e(319):case e(173):case e(283):case"right":case"bottom":t=e(164)}this[e(263)].step(t)}this._renderer?.[e(155)](!0),this[e(196)](t,!1)}[i(107)](t){const s=i;if(!(this._shapeOrigin&&this[s(325)]&&this[s(307)]&&this._cursorOriginalShape))return;if(!this._sc.imageService[s(193)])return;const e=this[s(161)][s(258)][s(284)](t,this._smoothingOption[s(195)]);if(this[s(169)]&&e[0]===this[s(169)][0]&&e[1]===this[s(169)][1])return;if(this[s(169)]=e,!this.shapeLayer)return;const h=this[s(169)][0]-this[s(307)][0],r=this[s(169)][1]-this._cursorOrigin[1];switch(this[s(142)]){case"new":return this[s(325)]=e,void this[s(245)](t,!0);case s(115):{const t=(0,c.BN)(this[s(289)]);t[s(283)]+=h,t[s(173)]+=r,t[s(268)]+=h,t[s(240)]+=r,(0,c.FJ)(t),this[s(263)].currentState[s(153)]=t;break}default:{let e;if(!t[s(109)]||"topleft"!==this[s(142)]&&this.state!==s(128)&&this[s(142)]!==s(160)&&"bottomright"!==this[s(142)])e=(0,c.BN)(this[s(289)]),(this[s(142)]===s(173)||this[s(142)]===s(189)||this[s(142)]===s(128))&&(e[s(173)]+=r,e[s(240)]<=e.top&&e[s(173)]++,t.altKey&&(e[s(240)]-=r)),(this[s(142)]===s(240)||"bottomleft"===this[s(142)]||this[s(142)]===s(319))&&(e.bottom+=r,e[s(240)]<=e[s(173)]&&e.bottom--,t[s(310)]&&(e[s(173)]-=r)),(this[s(142)]===s(283)||"topleft"===this[s(142)]||"bottomleft"===this[s(142)])&&(e[s(283)]+=h,e[s(268)]<=e[s(283)]&&e[s(283)]++,t[s(310)]&&(e[s(268)]-=h)),("right"===this[s(142)]||this[s(142)]===s(128)||this.state===s(319))&&(e[s(268)]+=h,e[s(268)]<=e[s(283)]&&e[s(268)]--,t[s(310)]&&(e[s(283)]-=h));else{const i=(0,c.n3)(this[s(289)]);let n;switch(e=(0,c.BN)(this[s(289)]),this[s(142)]){case"topleft":n=(1/i*-h-r)/2,e[s(283)]-=n*i,e[s(173)]-=n,t[s(310)]&&(e[s(268)]+=n*i,e.bottom+=n);break;case s(128):n=(h*(1/i)-r)/2,e[s(268)]+=n*i,e[s(173)]-=n,t.altKey&&(e.left-=n*i,e[s(240)]+=n);break;case"bottomleft":n=(1/i*-h+r)/2,e[s(283)]-=n*i,e[s(240)]+=n,t[s(310)]&&(e[s(268)]+=n*i,e[s(173)]-=n);break;case"bottomright":n=(h*(1/i)+r)/2,e[s(268)]+=n*i,e[s(240)]+=n,t[s(310)]&&(e[s(283)]-=n*i,e[s(173)]-=n)}}(!this[s(318)].value||this[s(161)][s(243)][s(186)][s(306)])&&(e.left=Math[s(280)](e[s(283)]),e.top=Math[s(280)](e[s(173)]),e[s(268)]=Math[s(280)](e.right),e[s(240)]=Math.round(e[s(240)]));const i=this[s(203)];this[s(203)]=this[s(289)][s(268)]<=this[s(289)].left!=e[s(268)]<=e.left,this[s(203)]!==i&&(this.shapeLayer[s(199)].flipX=!this[s(263)].currentState[s(252)]);const n=this._isYFlipping;this[s(270)]=this[s(289)][s(240)]<=this[s(289)][s(173)]!=e[s(240)]<=e.top,this[s(270)]!==n&&(this[s(263)][s(199)][s(138)]=!this[s(263)][s(199)][s(138)]),this[s(263)][s(199)][s(153)]=(0,c.FJ)(e);break}}this[s(331)](),this.shapeLayer[s(200)]()}pointerMove(t,s){const e=i;this[e(328)]&&!s&&this[e(272)](this._renderer[e(251)](t))}[i(245)](t,s){const e=i;if(!(s&&this[e(263)]&&this._shapeOrigin&&this[e(325)]&&this[e(142)]===e(244)))return;let h=this[e(312)][0]-this[e(325)][0],r=this[e(312)][1]-this[e(325)][1];t[e(109)]&&(Math[e(223)](h)>Math.abs(r)?h=r*(Math.sign(h)!==Math[e(201)](r)?-1:1):r=h*(Math.sign(h)!==Math[e(201)](r)?-1:1));const n=t[e(310)]?[this[e(312)][0]+h,this[e(312)][1]+r]:this._shapeOrigin;this[e(263)][e(199)].range=this[e(167)](n,[this[e(312)][0]-h,this[e(312)][1]-r]),this[e(331)](),this[e(263)].triggerRequestRender()}[i(110)](){const t=i;if(!this[t(263)])return;const s=this[t(161)][t(322)][t(187)].rgba,e=this._sc[t(322)][t(163)][t(249)];(0,h.WC)(this[t(263)][t(199)].primaryColor,s)&&(0,h.WC)(this.shapeLayer[t(199)][t(131)],e)||(this[t(263)][t(199)][t(239)]=s,this[t(263)][t(199)][t(131)]=e,this[t(263)][t(159)](t(248),!0),this[t(263)][t(200)]())}_updateStyle(){const t=i,s=this[t(198)]();this[t(263)]&&this[t(263)][t(199)][t(338)]!==s&&(this[t(263)][t(199)].style=s,this[t(263)][t(159)]("Set Shape Style"),this[t(263)][t(200)]())}[i(198)](){const t=i;switch(this[t(294)].value){case t(162):return 1;case t(309):return 2;case t(324):return 3}}[i(221)](t){const s=i;switch(t){case 1:return s(162);case 2:return s(309);case 3:return s(324)}}async[i(262)](t){const s=i;for(const e of this[s(151)])e!==t&&e[s(273)](!1);const e=this[s(177)]();this[s(263)]&&this.shapeLayer[s(199)].type!==e&&(this[s(263)][s(199)][s(112)]=e,this.shapeLayer[s(159)](s(282)),this.shapeLayer.triggerRequestRender())}[i(177)](){const t=i;return this[t(170)][t(195)]?t(315):this[t(333)][t(195)]?t(236):this[t(340)][t(195)]?t(210):t(336)}[i(323)](){const t=i,s=this[t(318)].value;this[t(263)]&&this[t(263)].currentState[t(114)]!==s&&(this[t(263)][t(199)][t(114)]=s,this[t(263)][t(159)](t(s?123:129)+t(127)),this[t(263)].triggerRequestRender())}_updateOutlineSize(){const t=i,s=this[t(211)][t(195)];this[t(263)]&&this[t(263)].currentState[t(117)]!==s&&(this[t(263)][t(199)][t(117)]=s,this[t(263)].step("Set Shape Outline Size",!0),this[t(263)].triggerRequestRender())}[i(222)](){const t=i,s=this[t(106)][t(195)];this[t(263)]&&this[t(263)][t(199)].blendMode!==s&&(this[t(263)].currentState.blendMode=s,this[t(263)].step(t(104)),this[t(263)][t(200)]())}[i(152)](){const t=i;this[t(263)]&&(this[t(106)].setValueFromHistoryChange(this[t(263)][t(199)].blendMode),this[t(211)].setValueFromHistoryChange(this[t(263)][t(199)].outlineSize),this._styleOption[t(273)](this[t(221)](this[t(263)][t(199)][t(338)])),this._ellipseTypeOption[t(273)]("ellipse"===this[t(263)].currentState.type),this._triangleTypeOption[t(273)](this[t(263)][t(199)][t(112)]===t(236)),this[t(340)].setValueFromHistoryChange(this.shapeLayer[t(199)][t(112)]===t(210)),this._diamondTypeOption[t(273)]("diamond"===this[t(263)][t(199)][t(112)]),this[t(318)][t(273)](this.shapeLayer[t(199)][t(114)]),(!(0,h.WC)(this[t(161)][t(322)].primary[t(249)],this[t(263)][t(199)][t(239)])||!(0,h.WC)(this[t(161)][t(322)].secondary[t(249)],this[t(263)].currentState[t(131)]))&&this[t(161)][t(322)][t(158)](this[t(263)][t(199)].primaryColor,this[t(263)][t(199)][t(131)]))}async _finish(){const t=i;await(this[t(263)]?.[t(192)]()),this[t(126)]()}[i(126)](){const t=i;this[t(263)]=void 0,this[t(289)]=void 0,this[t(328)]?.setVisible(!1),this[t(331)](),this[t(279)][t(326)]()}[i(167)](t,s){return(0,c.tH)(t[0],t[1],s[0],s[1])}[i(331)](){const t=i;this[t(290)].range=this[t(263)]?.[t(199)][t(153)],this[t(335)].range=this[t(263)]?.[t(199)][t(153)]}_setState(t){const s=i;this[s(142)]!==t&&(this.state=t,this._onStateChange[s(326)]())}[i(157)](t){const s=i;return this[s(328)]=new(d[s(339)])(t,(()=>this[s(263)]?.[s(199)][s(153)]),!0,this[s(161)][s(258)],this[s(161)].imageService),this[s(328)][s(155)](this[s(142)]!==s(244)),[new l.d(t,this._sc.imageService,this[s(161)].viewportService,this[s(317)]),this[s(328)]]}[i(216)](){const t=i;return{state:this.state,hasShapeLayer:!!this[t(263)]}}deserialize(t){const s=i;t[s(121)]?this._renderer?.setVisible(!0):this._clearShapeLayer(),this[s(272)](t[s(142)]),this._onOptionsChange(),this[s(331)]()}}const y=_;class m{constructor(t){this._getLayer=t}get range(){const t=i;return this[t(257)]()?.[t(199)].range}get[i(125)](){const t=i;return this._getLayer()?.[t(199)][t(112)]}get[i(252)](){const t=i;return this[t(257)]()?.[t(199)].flipX}get[i(138)](){const t=i;return this[t(257)]()?.[t(199)].flipY}}class f extends u.q{constructor(){const t=i;super(...arguments),this[t(112)]="size"}get[i(153)](){return this[i(234)]}set[i(153)](t){const s=i;this[s(234)]=t,this[s(178)][s(326)]()}get visible(){return!!this._range}[i(132)](){const t=i;return this[t(234)]?(0,o.s)((0,c.Oq)(this[t(234)]),2)+" x "+(0,o.s)((0,c.rY)(this._range),2):""}getDetailedInfo(){const t=i;if(!this[t(234)])return"";const s=(0,o.s)((0,c.Oq)(this[t(234)]),2),e=(0,o.s)((0,c.rY)(this._range),2);return t(219)+s+t(303)+e+" pixels tall"}}class v extends u.q{constructor(){const t=i;super(...arguments),this[t(112)]=t(189)}get[i(153)](){return this[i(234)]}set[i(153)](t){const s=i;this[s(234)]=t,this[s(178)].fire()}get[i(305)](){return!!this[i(234)]}getInfo(){const t=i;return this[t(234)]?(0,o.s)(this[t(234)][t(283)],2)+", "+(0,o.s)(this[t(234)][t(173)],2):""}[i(267)](){const t=i;return this[t(234)]?t(141)+(0,o.s)(this[t(234)].left,2)+t(275)+(0,o.s)(this[t(234)][t(173)],2):""}}},1674:(t,s,e)=>{"use strict";const i=a19_0x3c265c;e.d(s,{q:()=>h});const h=i(227)}}]);