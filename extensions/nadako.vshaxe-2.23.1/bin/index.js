module.exports=function(e,t){"use strict";var i={};function __webpack_require__(t){if(i[t]){return i[t].exports}var n=i[t]={i:t,l:false,exports:{}};var r=true;try{e[t].call(n.exports,n,n.exports,__webpack_require__);r=false}finally{if(r)delete i[t]}n.l=true;return n.exports}__webpack_require__.ab=__dirname+"/";function startup(){return __webpack_require__(608)}return startup()}({3:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});class ValueUUID{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class V4UUID extends ValueUUID{constructor(){super([V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-","4",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._oneOf(V4UUID._timeHighBits),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return V4UUID._oneOf(V4UUID._chars)}}V4UUID._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];V4UUID._timeHighBits=["8","9","a","b"];t.empty=new ValueUUID("00000000-0000-0000-0000-000000000000");function v4(){return new V4UUID}t.v4=v4;const i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function isUUID(e){return i.test(e)}t.isUUID=isUUID;function parse(e){if(!isUUID(e)){throw new Error("invalid uuid")}return new ValueUUID(e)}t.parse=parse;function generateUuid(){return v4().asHex()}t.generateUuid=generateUuid},18:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(364);const r=i(630);let o=8192;let s=Buffer.from("\r","ascii")[0];let a=Buffer.from("\n","ascii")[0];let u="\r\n";class MessageBuffer{constructor(e="utf8"){this.encoding=e;this.index=0;this.buffer=Buffer.allocUnsafe(o)}append(e){var t=e;if(typeof e==="string"){var i=e;var n=Buffer.byteLength(i,this.encoding);t=Buffer.allocUnsafe(n);t.write(i,0,n,this.encoding)}if(this.buffer.length-this.index>=t.length){t.copy(this.buffer,this.index,0,t.length)}else{var r=(Math.ceil((this.index+t.length)/o)+1)*o;if(this.index===0){this.buffer=Buffer.allocUnsafe(r);t.copy(this.buffer,0,0,t.length)}else{this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],r)}}this.index+=t.length}tryReadHeaders(){let e=undefined;let t=0;while(t+3<this.index&&(this.buffer[t]!==s||this.buffer[t+1]!==a||this.buffer[t+2]!==s||this.buffer[t+3]!==a)){t++}if(t+3>=this.index){return e}e=Object.create(null);let i=this.buffer.toString("ascii",0,t).split(u);i.forEach(t=>{let i=t.indexOf(":");if(i===-1){throw new Error("Message header must separate key and value using :")}let n=t.substr(0,i);let r=t.substr(i+1).trim();e[n]=r});let n=t+4;this.buffer=this.buffer.slice(n);this.index=this.index-n;return e}tryReadContent(e){if(this.index<e){return null}let t=this.buffer.toString(this.encoding,0,e);let i=e;this.buffer.copy(this.buffer,0,i);this.index=this.index-i;return t}get numberOfBytes(){return this.index}}var l;(function(e){function is(e){let t=e;return t&&r.func(t.listen)&&r.func(t.dispose)&&r.func(t.onError)&&r.func(t.onClose)&&r.func(t.onPartialMessage)}e.is=is})(l=t.MessageReader||(t.MessageReader={}));class AbstractMessageReader{constructor(){this.errorEmitter=new n.Emitter;this.closeEmitter=new n.Emitter;this.partialMessageEmitter=new n.Emitter}dispose(){this.errorEmitter.dispose();this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(undefined)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){if(e instanceof Error){return e}else{return new Error(`Reader received error. Reason: ${r.string(e.message)?e.message:"unknown"}`)}}}t.AbstractMessageReader=AbstractMessageReader;class StreamMessageReader extends AbstractMessageReader{constructor(e,t="utf8"){super();this.readable=e;this.buffer=new MessageBuffer(t);this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1;this.messageToken=0;this.partialMessageTimer=undefined;this.callback=e;this.readable.on("data",e=>{this.onData(e)});this.readable.on("error",e=>this.fireError(e));this.readable.on("close",()=>this.fireClose())}onData(e){this.buffer.append(e);while(true){if(this.nextMessageLength===-1){let e=this.buffer.tryReadHeaders();if(!e){return}let t=e["Content-Length"];if(!t){throw new Error("Header must provide a Content-Length property.")}let i=parseInt(t);if(isNaN(i)){throw new Error("Content-Length value must be a number.")}this.nextMessageLength=i}var t=this.buffer.tryReadContent(this.nextMessageLength);if(t===null){this.setPartialMessageTimer();return}this.clearPartialMessageTimer();this.nextMessageLength=-1;this.messageToken++;var i=JSON.parse(t);this.callback(i)}}clearPartialMessageTimer(){if(this.partialMessageTimer){clearTimeout(this.partialMessageTimer);this.partialMessageTimer=undefined}}setPartialMessageTimer(){this.clearPartialMessageTimer();if(this._partialMessageTimeout<=0){return}this.partialMessageTimer=setTimeout((e,t)=>{this.partialMessageTimer=undefined;if(e===this.messageToken){this.firePartialMessage({messageToken:e,waitingTime:t});this.setPartialMessageTimer()}},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout)}}t.StreamMessageReader=StreamMessageReader;class IPCMessageReader extends AbstractMessageReader{constructor(e){super();this.process=e;let t=this.process;t.on("error",e=>this.fireError(e));t.on("close",()=>this.fireClose())}listen(e){this.process.on("message",e)}}t.IPCMessageReader=IPCMessageReader;class SocketMessageReader extends StreamMessageReader{constructor(e,t="utf-8"){super(e,t)}}t.SocketMessageReader=SocketMessageReader},22:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(993);const r=i(882);let o;var s;(function(e){e.method="textDocument/typeDefinition";e.type=new r.ProtocolRequestType(e.method);e.resultType=new n.ProgressType})(s=t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))},65:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(480);const r=i(719);const o=i(369);function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}class ImplementationFeature extends o.TextDocumentFeature{constructor(e){super(e,r.ImplementationRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"implementation");t.dynamicRegistration=true;t.linkSupport=true}initialize(e,t){let[i,n]=this.getRegistration(t,e.implementationProvider);if(!i||!n){return}this.register(this.messages,{id:i,registerOptions:n})}registerLanguageProvider(e){const t={provideImplementation:(e,t,i)=>{const n=this._client;const o=(e,t,i)=>{return n.sendRequest(r.ImplementationRequest.type,n.code2ProtocolConverter.asTextDocumentPositionParams(e,t),i).then(n.protocol2CodeConverter.asDefinitionResult,e=>{n.logFailedRequest(r.ImplementationRequest.type,e);return Promise.resolve(null)})};const s=n.clientOptions.middleware;return s.provideImplementation?s.provideImplementation(e,t,i,o):o(e,t,i)}};return[n.languages.registerImplementationProvider(e.documentSelector,t),t]}}t.ImplementationFeature=ImplementationFeature},80:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(480);const r=i(719);const o=i(730);const s=i(448);const a=i(545);const u=i(709);var l;(function(e){function is(e){let t=e;return t&&o.string(t.language)&&o.string(t.value)}e.is=is})(l||(l={}));function createConverter(e){const t=e=>n.Uri.parse(e);const i=e||t;function asUri(e){return i(e)}function asDiagnostics(e){return e.map(asDiagnostic)}function asDiagnostic(e){let t=new n.Diagnostic(asRange(e.range),e.message,asDiagnosticSeverity(e.severity));if(o.number(e.code)||o.string(e.code)){t.code=e.code}if(e.source){t.source=e.source}if(e.relatedInformation){t.relatedInformation=asRelatedInformation(e.relatedInformation)}if(Array.isArray(e.tags)){t.tags=asDiagnosticTags(e.tags)}return t}function asRelatedInformation(e){return e.map(asDiagnosticRelatedInformation)}function asDiagnosticRelatedInformation(e){return new n.DiagnosticRelatedInformation(asLocation(e.location),e.message)}function asDiagnosticTags(e){if(!e){return undefined}let t=[];for(let i of e){let e=asDiagnosticTag(i);if(e!==undefined){t.push(e)}}return t.length>0?t:undefined}function asDiagnosticTag(e){switch(e){case r.DiagnosticTag.Unnecessary:return n.DiagnosticTag.Unnecessary;case r.DiagnosticTag.Deprecated:return n.DiagnosticTag.Deprecated;default:return undefined}}function asPosition(e){if(!e){return undefined}return new n.Position(e.line,e.character)}function asRange(e){if(!e){return undefined}return new n.Range(asPosition(e.start),asPosition(e.end))}function asRanges(e){return e.map(e=>asRange(e))}function asDiagnosticSeverity(e){if(e===undefined||e===null){return n.DiagnosticSeverity.Error}switch(e){case r.DiagnosticSeverity.Error:return n.DiagnosticSeverity.Error;case r.DiagnosticSeverity.Warning:return n.DiagnosticSeverity.Warning;case r.DiagnosticSeverity.Information:return n.DiagnosticSeverity.Information;case r.DiagnosticSeverity.Hint:return n.DiagnosticSeverity.Hint}return n.DiagnosticSeverity.Error}function asHoverContent(e){if(o.string(e)){return new n.MarkdownString(e)}else if(l.is(e)){let t=new n.MarkdownString;return t.appendCodeblock(e.value,e.language)}else if(Array.isArray(e)){let t=[];for(let i of e){let e=new n.MarkdownString;if(l.is(i)){e.appendCodeblock(i.value,i.language)}else{e.appendMarkdown(i)}t.push(e)}return t}else{let t;switch(e.kind){case r.MarkupKind.Markdown:return new n.MarkdownString(e.value);case r.MarkupKind.PlainText:t=new n.MarkdownString;t.appendText(e.value);return t;default:t=new n.MarkdownString;t.appendText(`Unsupported Markup content received. Kind is: ${e.kind}`);return t}}}function asDocumentation(e){if(o.string(e)){return e}else{switch(e.kind){case r.MarkupKind.Markdown:return new n.MarkdownString(e.value);case r.MarkupKind.PlainText:return e.value;default:return`Unsupported Markup content received. Kind is: ${e.kind}`}}}function asHover(e){if(!e){return undefined}return new n.Hover(asHoverContent(e.contents),asRange(e.range))}function asCompletionResult(e){if(!e){return undefined}if(Array.isArray(e)){let t=e;return t.map(asCompletionItem)}let t=e;return new n.CompletionList(t.items.map(asCompletionItem),t.isIncomplete)}function asCompletionItemKind(e){if(r.CompletionItemKind.Text<=e&&e<=r.CompletionItemKind.TypeParameter){return[e-1,undefined]}return[n.CompletionItemKind.Text,e]}function asCompletionItemTag(e){switch(e){case r.CompletionItemTag.Deprecated:return n.CompletionItemTag.Deprecated}return undefined}function asCompletionItemTags(e){if(e===undefined||e===null){return[]}const t=[];for(let i of e){const e=asCompletionItemTag(i);if(e!==undefined){t.push(e)}}return t}function asCompletionItem(e){let t=asCompletionItemTags(e.tags);let i=new s.default(e.label);if(e.detail){i.detail=e.detail}if(e.documentation){i.documentation=asDocumentation(e.documentation);i.documentationFormat=o.string(e.documentation)?"$string":e.documentation.kind}if(e.filterText){i.filterText=e.filterText}let r=asCompletionInsertText(e);if(r){i.insertText=r.text;i.range=r.range;i.fromEdit=r.fromEdit}if(o.number(e.kind)){let[t,n]=asCompletionItemKind(e.kind);i.kind=t;if(n){i.originalItemKind=n}}if(e.sortText){i.sortText=e.sortText}if(e.additionalTextEdits){i.additionalTextEdits=asTextEdits(e.additionalTextEdits)}if(o.stringArray(e.commitCharacters)){i.commitCharacters=e.commitCharacters.slice()}if(e.command){i.command=asCommand(e.command)}if(e.deprecated===true||e.deprecated===false){i.deprecated=e.deprecated;if(e.deprecated===true){t.push(n.CompletionItemTag.Deprecated)}}if(e.preselect===true||e.preselect===false){i.preselect=e.preselect}if(e.data!==undefined){i.data=e.data}if(t.length>0){i.tags=t}return i}function asCompletionInsertText(e){if(e.textEdit){if(e.insertTextFormat===r.InsertTextFormat.Snippet){return{text:new n.SnippetString(e.textEdit.newText),range:asRange(e.textEdit.range),fromEdit:true}}else{return{text:e.textEdit.newText,range:asRange(e.textEdit.range),fromEdit:true}}}else if(e.insertText){if(e.insertTextFormat===r.InsertTextFormat.Snippet){return{text:new n.SnippetString(e.insertText),fromEdit:false}}else{return{text:e.insertText,fromEdit:false}}}else{return undefined}}function asTextEdit(e){if(!e){return undefined}return new n.TextEdit(asRange(e.range),e.newText)}function asTextEdits(e){if(!e){return undefined}return e.map(asTextEdit)}function asSignatureHelp(e){if(!e){return undefined}let t=new n.SignatureHelp;if(o.number(e.activeSignature)){t.activeSignature=e.activeSignature}else{t.activeSignature=0}if(o.number(e.activeParameter)){t.activeParameter=e.activeParameter}else{t.activeParameter=0}if(e.signatures){t.signatures=asSignatureInformations(e.signatures)}return t}function asSignatureInformations(e){return e.map(asSignatureInformation)}function asSignatureInformation(e){let t=new n.SignatureInformation(e.label);if(e.documentation){t.documentation=asDocumentation(e.documentation)}if(e.parameters){t.parameters=asParameterInformations(e.parameters)}return t}function asParameterInformations(e){return e.map(asParameterInformation)}function asParameterInformation(e){let t=new n.ParameterInformation(e.label);if(e.documentation){t.documentation=asDocumentation(e.documentation)}return t}function asLocation(e){if(!e){return undefined}return new n.Location(i(e.uri),asRange(e.range))}function asDeclarationResult(e){if(!e){return undefined}return asLocationResult(e)}function asDefinitionResult(e){if(!e){return undefined}return asLocationResult(e)}function asLocationLink(e){if(!e){return undefined}let t={targetUri:i(e.targetUri),targetRange:asRange(e.targetSelectionRange),originSelectionRange:asRange(e.originSelectionRange),targetSelectionRange:asRange(e.targetSelectionRange)};if(!t.targetSelectionRange){throw new Error(`targetSelectionRange must not be undefined or null`)}return t}function asLocationResult(e){if(!e){return undefined}if(o.array(e)){if(e.length===0){return[]}else if(r.LocationLink.is(e[0])){let t=e;return t.map(e=>asLocationLink(e))}else{let t=e;return t.map(e=>asLocation(e))}}else if(r.LocationLink.is(e)){return[asLocationLink(e)]}else{return asLocation(e)}}function asReferences(e){if(!e){return undefined}return e.map(e=>asLocation(e))}function asDocumentHighlights(e){if(!e){return undefined}return e.map(asDocumentHighlight)}function asDocumentHighlight(e){let t=new n.DocumentHighlight(asRange(e.range));if(o.number(e.kind)){t.kind=asDocumentHighlightKind(e.kind)}return t}function asDocumentHighlightKind(e){switch(e){case r.DocumentHighlightKind.Text:return n.DocumentHighlightKind.Text;case r.DocumentHighlightKind.Read:return n.DocumentHighlightKind.Read;case r.DocumentHighlightKind.Write:return n.DocumentHighlightKind.Write}return n.DocumentHighlightKind.Text}function asSymbolInformations(e,t){if(!e){return undefined}return e.map(e=>asSymbolInformation(e,t))}function asSymbolKind(e){if(e<=r.SymbolKind.TypeParameter){return e-1}return n.SymbolKind.Property}function asSymbolTag(e){return e}function asSymbolTags(e){if(e===undefined||e===null){return undefined}return e.map(asSymbolTag)}function asSymbolInformation(e,t){let r=new n.SymbolInformation(e.name,asSymbolKind(e.kind),asRange(e.location.range),e.location.uri?i(e.location.uri):t);if(e.containerName){r.containerName=e.containerName}return r}function asDocumentSymbols(e){if(e===undefined||e===null){return undefined}return e.map(asDocumentSymbol)}function asDocumentSymbol(e){let t=new n.DocumentSymbol(e.name,e.detail||"",asSymbolKind(e.kind),asRange(e.range),asRange(e.selectionRange));if(e.children!==undefined&&e.children.length>0){let i=[];for(let t of e.children){i.push(asDocumentSymbol(t))}t.children=i}return t}function asCommand(e){let t={title:e.title,command:e.command};if(e.arguments){t.arguments=e.arguments}return t}function asCommands(e){if(!e){return undefined}return e.map(asCommand)}const h=new Map;h.set(r.CodeActionKind.Empty,n.CodeActionKind.Empty);h.set(r.CodeActionKind.QuickFix,n.CodeActionKind.QuickFix);h.set(r.CodeActionKind.Refactor,n.CodeActionKind.Refactor);h.set(r.CodeActionKind.RefactorExtract,n.CodeActionKind.RefactorExtract);h.set(r.CodeActionKind.RefactorInline,n.CodeActionKind.RefactorInline);h.set(r.CodeActionKind.RefactorRewrite,n.CodeActionKind.RefactorRewrite);h.set(r.CodeActionKind.Source,n.CodeActionKind.Source);h.set(r.CodeActionKind.SourceOrganizeImports,n.CodeActionKind.SourceOrganizeImports);function asCodeActionKind(e){if(e===undefined||e===null){return undefined}let t=h.get(e);if(t){return t}let i=e.split(".");t=n.CodeActionKind.Empty;for(let e of i){t=t.append(e)}return t}function asCodeActionKinds(e){if(e===undefined||e===null){return undefined}return e.map(e=>asCodeActionKind(e))}function asCodeAction(e){if(e===undefined||e===null){return undefined}let t=new n.CodeAction(e.title);if(e.kind!==undefined){t.kind=asCodeActionKind(e.kind)}if(e.diagnostics){t.diagnostics=asDiagnostics(e.diagnostics)}if(e.edit){t.edit=asWorkspaceEdit(e.edit)}if(e.command){t.command=asCommand(e.command)}if(e.isPreferred!==undefined){t.isPreferred=e.isPreferred}return t}function asCodeLens(e){if(!e){return undefined}let t=new a.default(asRange(e.range));if(e.command){t.command=asCommand(e.command)}if(e.data!==undefined&&e.data!==null){t.data=e.data}return t}function asCodeLenses(e){if(!e){return undefined}return e.map(e=>asCodeLens(e))}function asWorkspaceEdit(e){if(!e){return undefined}let t=new n.WorkspaceEdit;if(e.documentChanges){e.documentChanges.forEach(e=>{if(r.CreateFile.is(e)){t.createFile(i(e.uri),e.options)}else if(r.RenameFile.is(e)){t.renameFile(i(e.oldUri),i(e.newUri),e.options)}else if(r.DeleteFile.is(e)){t.deleteFile(i(e.uri),e.options)}else if(r.TextDocumentEdit.is(e)){t.set(i(e.textDocument.uri),asTextEdits(e.edits))}else{console.error(`Unknown workspace edit change received:\n${JSON.stringify(e,undefined,4)}`)}})}else if(e.changes){Object.keys(e.changes).forEach(n=>{t.set(i(n),asTextEdits(e.changes[n]))})}return t}function asDocumentLink(e){let t=asRange(e.range);let i=e.target?asUri(e.target):undefined;let n=new u.default(t,i);if(e.tooltip!==undefined){n.tooltip=e.tooltip}if(e.data!==undefined&&e.data!==null){n.data=e.data}return n}function asDocumentLinks(e){if(!e){return undefined}return e.map(asDocumentLink)}function asColor(e){return new n.Color(e.red,e.green,e.blue,e.alpha)}function asColorInformation(e){return new n.ColorInformation(asRange(e.range),asColor(e.color))}function asColorInformations(e){if(Array.isArray(e)){return e.map(asColorInformation)}return undefined}function asColorPresentation(e){let t=new n.ColorPresentation(e.label);t.additionalTextEdits=asTextEdits(e.additionalTextEdits);if(e.textEdit){t.textEdit=asTextEdit(e.textEdit)}return t}function asColorPresentations(e){if(Array.isArray(e)){return e.map(asColorPresentation)}return undefined}function asFoldingRangeKind(e){if(e){switch(e){case r.FoldingRangeKind.Comment:return n.FoldingRangeKind.Comment;case r.FoldingRangeKind.Imports:return n.FoldingRangeKind.Imports;case r.FoldingRangeKind.Region:return n.FoldingRangeKind.Region}}return undefined}function asFoldingRange(e){return new n.FoldingRange(e.startLine,e.endLine,asFoldingRangeKind(e.kind))}function asFoldingRanges(e){if(Array.isArray(e)){return e.map(asFoldingRange)}return undefined}function asSelectionRange(e){return new n.SelectionRange(asRange(e.range),e.parent?asSelectionRange(e.parent):undefined)}function asSelectionRanges(e){if(!Array.isArray(e)){return[]}let t=[];for(let i of e){t.push(asSelectionRange(i))}return t}return{asUri:asUri,asDiagnostics:asDiagnostics,asDiagnostic:asDiagnostic,asRange:asRange,asRanges:asRanges,asPosition:asPosition,asDiagnosticSeverity:asDiagnosticSeverity,asDiagnosticTag:asDiagnosticTag,asHover:asHover,asCompletionResult:asCompletionResult,asCompletionItem:asCompletionItem,asTextEdit:asTextEdit,asTextEdits:asTextEdits,asSignatureHelp:asSignatureHelp,asSignatureInformations:asSignatureInformations,asSignatureInformation:asSignatureInformation,asParameterInformations:asParameterInformations,asParameterInformation:asParameterInformation,asDeclarationResult:asDeclarationResult,asDefinitionResult:asDefinitionResult,asLocation:asLocation,asReferences:asReferences,asDocumentHighlights:asDocumentHighlights,asDocumentHighlight:asDocumentHighlight,asDocumentHighlightKind:asDocumentHighlightKind,asSymbolKind:asSymbolKind,asSymbolTag:asSymbolTag,asSymbolTags:asSymbolTags,asSymbolInformations:asSymbolInformations,asSymbolInformation:asSymbolInformation,asDocumentSymbols:asDocumentSymbols,asDocumentSymbol:asDocumentSymbol,asCommand:asCommand,asCommands:asCommands,asCodeAction:asCodeAction,asCodeActionKind:asCodeActionKind,asCodeActionKinds:asCodeActionKinds,asCodeLens:asCodeLens,asCodeLenses:asCodeLenses,asWorkspaceEdit:asWorkspaceEdit,asDocumentLink:asDocumentLink,asDocumentLinks:asDocumentLinks,asFoldingRangeKind:asFoldingRangeKind,asFoldingRange:asFoldingRange,asFoldingRanges:asFoldingRanges,asColor:asColor,asColorInformation:asColorInformation,asColorInformations:asColorInformations,asColorPresentation:asColorPresentation,asColorPresentations:asColorPresentations,asSelectionRange:asSelectionRange,asSelectionRanges:asSelectionRanges}}t.createConverter=createConverter},87:function(e){e.exports=require("os")},119:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(364);const r=i(630);var o;(function(e){e.None=Object.freeze({isCancellationRequested:false,onCancellationRequested:n.Event.None});e.Cancelled=Object.freeze({isCancellationRequested:true,onCancellationRequested:n.Event.None});function is(t){let i=t;return i&&(i===e.None||i===e.Cancelled||r.boolean(i.isCancellationRequested)&&!!i.onCancellationRequested)}e.is=is})(o=t.CancellationToken||(t.CancellationToken={}));const s=Object.freeze(function(e,t){let i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}});class MutableToken{constructor(){this._isCancelled=false}cancel(){if(!this._isCancelled){this._isCancelled=true;if(this._emitter){this._emitter.fire(undefined);this.dispose()}}}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){if(this._isCancelled){return s}if(!this._emitter){this._emitter=new n.Emitter}return this._emitter.event}dispose(){if(this._emitter){this._emitter.dispose();this._emitter=undefined}}}class CancellationTokenSource{get token(){if(!this._token){this._token=new MutableToken}return this._token}cancel(){if(!this._token){this._token=o.Cancelled}else{this._token.cancel()}}dispose(){if(!this._token){this._token=o.None}else if(this._token instanceof MutableToken){this._token.dispose()}}}t.CancellationTokenSource=CancellationTokenSource},127:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(882);var r;(function(e){e.type=new n.ProtocolRequestType0("workspace/workspaceFolders")})(r=t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={}));var o;(function(e){e.type=new n.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(o=t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))},129:function(e){e.exports=require("child_process")},142:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(364);const r=i(630);let o="Content-Length: ";let s="\r\n";var a;(function(e){function is(e){let t=e;return t&&r.func(t.dispose)&&r.func(t.onClose)&&r.func(t.onError)&&r.func(t.write)}e.is=is})(a=t.MessageWriter||(t.MessageWriter={}));class AbstractMessageWriter{constructor(){this.errorEmitter=new n.Emitter;this.closeEmitter=new n.Emitter}dispose(){this.errorEmitter.dispose();this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,i){this.errorEmitter.fire([this.asError(e),t,i])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(undefined)}asError(e){if(e instanceof Error){return e}else{return new Error(`Writer received error. Reason: ${r.string(e.message)?e.message:"unknown"}`)}}}t.AbstractMessageWriter=AbstractMessageWriter;class StreamMessageWriter extends AbstractMessageWriter{constructor(e,t="utf8"){super();this.writable=e;this.encoding=t;this.errorCount=0;this.writable.on("error",e=>this.fireError(e));this.writable.on("close",()=>this.fireClose())}write(e){let t=JSON.stringify(e);let i=Buffer.byteLength(t,this.encoding);let n=[o,i.toString(),s,s];try{this.writable.write(n.join(""),"ascii");this.writable.write(t,this.encoding);this.errorCount=0}catch(t){this.errorCount++;this.fireError(t,e,this.errorCount)}}}t.StreamMessageWriter=StreamMessageWriter;class IPCMessageWriter extends AbstractMessageWriter{constructor(e){super();this.process=e;this.errorCount=0;this.queue=[];this.sending=false;let t=this.process;t.on("error",e=>this.fireError(e));t.on("close",()=>this.fireClose)}write(e){if(!this.sending&&this.queue.length===0){this.doWriteMessage(e)}else{this.queue.push(e)}}doWriteMessage(e){try{if(this.process.send){this.sending=true;this.process.send(e,undefined,undefined,t=>{this.sending=false;if(t){this.errorCount++;this.fireError(t,e,this.errorCount)}else{this.errorCount=0}if(this.queue.length>0){this.doWriteMessage(this.queue.shift())}})}}catch(t){this.errorCount++;this.fireError(t,e,this.errorCount)}}}t.IPCMessageWriter=IPCMessageWriter;class SocketMessageWriter extends AbstractMessageWriter{constructor(e,t="utf8"){super();this.socket=e;this.queue=[];this.sending=false;this.encoding=t;this.errorCount=0;this.socket.on("error",e=>this.fireError(e));this.socket.on("close",()=>this.fireClose())}dispose(){super.dispose();this.socket.destroy()}write(e){if(!this.sending&&this.queue.length===0){this.doWriteMessage(e)}else{this.queue.push(e)}}doWriteMessage(e){let t=JSON.stringify(e);let i=Buffer.byteLength(t,this.encoding);let n=[o,i.toString(),s,s];try{this.sending=true;this.socket.write(n.join(""),"ascii",i=>{if(i){this.handleError(i,e)}try{this.socket.write(t,this.encoding,t=>{this.sending=false;if(t){this.handleError(t,e)}else{this.errorCount=0}if(this.queue.length>0){this.doWriteMessage(this.queue.shift())}})}catch(i){this.handleError(i,e)}})}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++;this.fireError(e,t,this.errorCount)}}t.SocketMessageWriter=SocketMessageWriter},146:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});class Delayer{constructor(e){this.defaultDelay=e;this.timeout=undefined;this.completionPromise=undefined;this.onSuccess=undefined;this.task=undefined}trigger(e,t=this.defaultDelay){this.task=e;if(t>=0){this.cancelTimeout()}if(!this.completionPromise){this.completionPromise=new Promise(e=>{this.onSuccess=e}).then(()=>{this.completionPromise=undefined;this.onSuccess=undefined;var e=this.task();this.task=undefined;return e})}if(t>=0||this.timeout===void 0){this.timeout=setTimeout(()=>{this.timeout=undefined;this.onSuccess(undefined)},t>=0?t:this.defaultDelay)}return this.completionPromise}forceDelivery(){if(!this.completionPromise){return undefined}this.cancelTimeout();let e=this.task();this.completionPromise=undefined;this.onSuccess=undefined;this.task=undefined;return e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout();this.completionPromise=undefined}cancelTimeout(){if(this.timeout!==void 0){clearTimeout(this.timeout);this.timeout=undefined}}}t.Delayer=Delayer},155:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(480);const r=i(719);const o=i(369);function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}class FoldingRangeFeature extends o.TextDocumentFeature{constructor(e){super(e,r.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"foldingRange");t.dynamicRegistration=true;t.rangeLimit=5e3;t.lineFoldingOnly=true}initialize(e,t){let[i,n]=this.getRegistration(t,e.foldingRangeProvider);if(!i||!n){return}this.register(this.messages,{id:i,registerOptions:n})}registerLanguageProvider(e){const t={provideFoldingRanges:(e,t,i)=>{const n=this._client;const o=(e,t,i)=>{const o={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e)};return n.sendRequest(r.FoldingRangeRequest.type,o,i).then(this.asFoldingRanges.bind(this),e=>{n.logFailedRequest(r.FoldingRangeRequest.type,e);return Promise.resolve(null)})};const s=n.clientOptions.middleware;return s.provideFoldingRanges?s.provideFoldingRanges(e,t,i,o):o(e,t,i)}};return[n.languages.registerFoldingRangeProvider(e.documentSelector,t),t]}asFoldingRangeKind(e){if(e){switch(e){case r.FoldingRangeKind.Comment:return n.FoldingRangeKind.Comment;case r.FoldingRangeKind.Imports:return n.FoldingRangeKind.Imports;case r.FoldingRangeKind.Region:return n.FoldingRangeKind.Region}}return void 0}asFoldingRanges(e){if(Array.isArray(e)){return e.map(e=>{return new n.FoldingRange(e.startLine,e.endLine,this.asFoldingRangeKind(e.kind))})}return[]}}t.FoldingRangeFeature=FoldingRangeFeature},184:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(129);const r=i(622);const o=process.platform==="win32";const s=process.platform==="darwin";const a=process.platform==="linux";function terminate(e,t){if(o){try{let i={stdio:["pipe","pipe","ignore"]};if(t){i.cwd=t}n.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],i);return true}catch(e){return false}}else if(a||s){try{var r=i.ab+"terminateProcess.sh";var u=n.spawnSync(i.ab+"terminateProcess.sh",[e.pid.toString()]);return u.error?false:true}catch(e){return false}}else{e.kill("SIGKILL");return true}}t.terminate=terminate},215:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(622);const r=i(87);const o=i(417);const s=i(631);const a=i(18);const u=i(142);function generateRandomPipeName(){const e=o.randomBytes(21).toString("hex");if(process.platform==="win32"){return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`}else{return n.join(r.tmpdir(),`vscode-${e}.sock`)}}t.generateRandomPipeName=generateRandomPipeName;function createClientPipeTransport(e,t="utf-8"){let i;let n=new Promise((e,t)=>{i=e});return new Promise((r,o)=>{let l=s.createServer(e=>{l.close();i([new a.SocketMessageReader(e,t),new u.SocketMessageWriter(e,t)])});l.on("error",o);l.listen(e,()=>{l.removeListener("error",o);r({onConnected:()=>{return n}})})})}t.createClientPipeTransport=createClientPipeTransport;function createServerPipeTransport(e,t="utf-8"){const i=s.createConnection(e);return[new a.SocketMessageReader(i,t),new u.SocketMessageWriter(i,t)]}t.createServerPipeTransport=createServerPipeTransport},226:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(993);const r=i(882);var o;(function(e){e.type=new n.ProgressType})(o=t.WorkDoneProgress||(t.WorkDoneProgress={}));var s;(function(e){e.type=new r.ProtocolRequestType("window/workDoneProgress/create")})(s=t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={}));var a;(function(e){e.type=new r.ProtocolNotificationType("window/workDoneProgress/cancel")})(a=t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={}))},251:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(630);var r;(function(e){e.ParseError=-32700;e.InvalidRequest=-32600;e.MethodNotFound=-32601;e.InvalidParams=-32602;e.InternalError=-32603;e.serverErrorStart=-32099;e.serverErrorEnd=-32e3;e.ServerNotInitialized=-32002;e.UnknownErrorCode=-32001;e.RequestCancelled=-32800;e.ContentModified=-32801;e.MessageWriteError=1;e.MessageReadError=2})(r=t.ErrorCodes||(t.ErrorCodes={}));class ResponseError extends Error{constructor(e,t,i){super(t);this.code=n.number(e)?e:r.UnknownErrorCode;this.data=i;Object.setPrototypeOf(this,ResponseError.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=ResponseError;class AbstractMessageType{constructor(e,t){this._method=e;this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=AbstractMessageType;class RequestType0 extends AbstractMessageType{constructor(e){super(e,0)}}t.RequestType0=RequestType0;class RequestType extends AbstractMessageType{constructor(e){super(e,1)}}t.RequestType=RequestType;class RequestType1 extends AbstractMessageType{constructor(e){super(e,1)}}t.RequestType1=RequestType1;class RequestType2 extends AbstractMessageType{constructor(e){super(e,2)}}t.RequestType2=RequestType2;class RequestType3 extends AbstractMessageType{constructor(e){super(e,3)}}t.RequestType3=RequestType3;class RequestType4 extends AbstractMessageType{constructor(e){super(e,4)}}t.RequestType4=RequestType4;class RequestType5 extends AbstractMessageType{constructor(e){super(e,5)}}t.RequestType5=RequestType5;class RequestType6 extends AbstractMessageType{constructor(e){super(e,6)}}t.RequestType6=RequestType6;class RequestType7 extends AbstractMessageType{constructor(e){super(e,7)}}t.RequestType7=RequestType7;class RequestType8 extends AbstractMessageType{constructor(e){super(e,8)}}t.RequestType8=RequestType8;class RequestType9 extends AbstractMessageType{constructor(e){super(e,9)}}t.RequestType9=RequestType9;class NotificationType extends AbstractMessageType{constructor(e){super(e,1);this._=undefined}}t.NotificationType=NotificationType;class NotificationType0 extends AbstractMessageType{constructor(e){super(e,0)}}t.NotificationType0=NotificationType0;class NotificationType1 extends AbstractMessageType{constructor(e){super(e,1)}}t.NotificationType1=NotificationType1;class NotificationType2 extends AbstractMessageType{constructor(e){super(e,2)}}t.NotificationType2=NotificationType2;class NotificationType3 extends AbstractMessageType{constructor(e){super(e,3)}}t.NotificationType3=NotificationType3;class NotificationType4 extends AbstractMessageType{constructor(e){super(e,4)}}t.NotificationType4=NotificationType4;class NotificationType5 extends AbstractMessageType{constructor(e){super(e,5)}}t.NotificationType5=NotificationType5;class NotificationType6 extends AbstractMessageType{constructor(e){super(e,6)}}t.NotificationType6=NotificationType6;class NotificationType7 extends AbstractMessageType{constructor(e){super(e,7)}}t.NotificationType7=NotificationType7;class NotificationType8 extends AbstractMessageType{constructor(e){super(e,8)}}t.NotificationType8=NotificationType8;class NotificationType9 extends AbstractMessageType{constructor(e){super(e,9)}}t.NotificationType9=NotificationType9;function isRequestMessage(e){let t=e;return t&&n.string(t.method)&&(n.string(t.id)||n.number(t.id))}t.isRequestMessage=isRequestMessage;function isNotificationMessage(e){let t=e;return t&&n.string(t.method)&&e.id===void 0}t.isNotificationMessage=isNotificationMessage;function isResponseMessage(e){let t=e;return t&&(t.result!==void 0||!!t.error)&&(n.string(t.id)||n.number(t.id)||t.id===null)}t.isResponseMessage=isResponseMessage},258:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(480);const r=i(719);const o=i(369);function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}class DeclarationFeature extends o.TextDocumentFeature{constructor(e){super(e,r.DeclarationRequest.type)}fillClientCapabilities(e){const t=ensure(ensure(e,"textDocument"),"declaration");t.dynamicRegistration=true;t.linkSupport=true}initialize(e,t){const[i,n]=this.getRegistration(t,e.declarationProvider);if(!i||!n){return}this.register(this.messages,{id:i,registerOptions:n})}registerLanguageProvider(e){const t={provideDeclaration:(e,t,i)=>{const n=this._client;const o=(e,t,i)=>{return n.sendRequest(r.DeclarationRequest.type,n.code2ProtocolConverter.asTextDocumentPositionParams(e,t),i).then(n.protocol2CodeConverter.asDeclarationResult,e=>{n.logFailedRequest(r.DeclarationRequest.type,e);return Promise.resolve(null)})};const s=n.clientOptions.middleware;return s.provideDeclaration?s.provideDeclaration(e,t,i,o):o(e,t,i)}};return[n.languages.registerDeclarationProvider(e.documentSelector,t),t]}}t.DeclarationFeature=DeclarationFeature},269:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i;(function(e){e.None=0;e.First=1;e.Last=2})(i=t.Touch||(t.Touch={}));class LinkedMap{constructor(){this._map=new Map;this._head=undefined;this._tail=undefined;this._size=0}clear(){this._map.clear();this._head=undefined;this._tail=undefined;this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(!t){return undefined}return t.value}set(e,t,n=i.None){let r=this._map.get(e);if(r){r.value=t;if(n!==i.None){this.touch(r,n)}}else{r={key:e,value:t,next:undefined,previous:undefined};switch(n){case i.None:this.addItemLast(r);break;case i.First:this.addItemFirst(r);break;case i.Last:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(e,r);this._size++}}delete(e){const t=this._map.get(e);if(!t){return false}this._map.delete(e);this.removeItem(t);this._size--;return true}shift(){if(!this._head&&!this._tail){return undefined}if(!this._head||!this._tail){throw new Error("Invalid list")}const e=this._head;this._map.delete(e.key);this.removeItem(e);this._size--;return e.value}forEach(e,t){let i=this._head;while(i){if(t){e.bind(t)(i.value,i.key,this)}else{e(i.value,i.key,this)}i=i.next}}forEachReverse(e,t){let i=this._tail;while(i){if(t){e.bind(t)(i.value,i.key,this)}else{e(i.value,i.key,this)}i=i.previous}}values(){let e=[];let t=this._head;while(t){e.push(t.value);t=t.next}return e}keys(){let e=[];let t=this._head;while(t){e.push(t.key);t=t.next}return e}addItemFirst(e){if(!this._head&&!this._tail){this._tail=e}else if(!this._head){throw new Error("Invalid list")}else{e.next=this._head;this._head.previous=e}this._head=e}addItemLast(e){if(!this._head&&!this._tail){this._head=e}else if(!this._tail){throw new Error("Invalid list")}else{e.previous=this._tail;this._tail.next=e}this._tail=e}removeItem(e){if(e===this._head&&e===this._tail){this._head=undefined;this._tail=undefined}else if(e===this._head){this._head=e.next}else if(e===this._tail){this._tail=e.previous}else{const t=e.next;const i=e.previous;if(!t||!i){throw new Error("Invalid list")}t.previous=i;i.next=t}}touch(e,t){if(!this._head||!this._tail){throw new Error("Invalid list")}if(t!==i.First&&t!==i.Last){return}if(t===i.First){if(e===this._head){return}const t=e.next;const i=e.previous;if(e===this._tail){i.next=undefined;this._tail=i}else{t.previous=i;i.next=t}e.previous=undefined;e.next=this._head;this._head.previous=e;this._head=e}else if(t===i.Last){if(e===this._tail){return}const t=e.next;const i=e.previous;if(e===this._head){t.previous=undefined;this._head=t}else{t.previous=i;i.next=t}e.next=undefined;e.previous=this._tail;this._tail.next=e;this._tail=e}}}t.LinkedMap=LinkedMap},280:function(e,t){t=e.exports=SemVer;var i;if(typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)){i=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER");console.log.apply(console,e)}}else{i=function(){}}t.SEMVER_SPEC_VERSION="2.0.0";var n=256;var r=Number.MAX_SAFE_INTEGER||9007199254740991;var o=16;var s=t.re=[];var a=t.src=[];var u=t.tokens={};var l=0;function tok(e){u[e]=l++}tok("NUMERICIDENTIFIER");a[u.NUMERICIDENTIFIER]="0|[1-9]\\d*";tok("NUMERICIDENTIFIERLOOSE");a[u.NUMERICIDENTIFIERLOOSE]="[0-9]+";tok("NONNUMERICIDENTIFIER");a[u.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";tok("MAINVERSION");a[u.MAINVERSION]="("+a[u.NUMERICIDENTIFIER]+")\\."+"("+a[u.NUMERICIDENTIFIER]+")\\."+"("+a[u.NUMERICIDENTIFIER]+")";tok("MAINVERSIONLOOSE");a[u.MAINVERSIONLOOSE]="("+a[u.NUMERICIDENTIFIERLOOSE]+")\\."+"("+a[u.NUMERICIDENTIFIERLOOSE]+")\\."+"("+a[u.NUMERICIDENTIFIERLOOSE]+")";tok("PRERELEASEIDENTIFIER");a[u.PRERELEASEIDENTIFIER]="(?:"+a[u.NUMERICIDENTIFIER]+"|"+a[u.NONNUMERICIDENTIFIER]+")";tok("PRERELEASEIDENTIFIERLOOSE");a[u.PRERELEASEIDENTIFIERLOOSE]="(?:"+a[u.NUMERICIDENTIFIERLOOSE]+"|"+a[u.NONNUMERICIDENTIFIER]+")";tok("PRERELEASE");a[u.PRERELEASE]="(?:-("+a[u.PRERELEASEIDENTIFIER]+"(?:\\."+a[u.PRERELEASEIDENTIFIER]+")*))";tok("PRERELEASELOOSE");a[u.PRERELEASELOOSE]="(?:-?("+a[u.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+a[u.PRERELEASEIDENTIFIERLOOSE]+")*))";tok("BUILDIDENTIFIER");a[u.BUILDIDENTIFIER]="[0-9A-Za-z-]+";tok("BUILD");a[u.BUILD]="(?:\\+("+a[u.BUILDIDENTIFIER]+"(?:\\."+a[u.BUILDIDENTIFIER]+")*))";tok("FULL");tok("FULLPLAIN");a[u.FULLPLAIN]="v?"+a[u.MAINVERSION]+a[u.PRERELEASE]+"?"+a[u.BUILD]+"?";a[u.FULL]="^"+a[u.FULLPLAIN]+"$";tok("LOOSEPLAIN");a[u.LOOSEPLAIN]="[v=\\s]*"+a[u.MAINVERSIONLOOSE]+a[u.PRERELEASELOOSE]+"?"+a[u.BUILD]+"?";tok("LOOSE");a[u.LOOSE]="^"+a[u.LOOSEPLAIN]+"$";tok("GTLT");a[u.GTLT]="((?:<|>)?=?)";tok("XRANGEIDENTIFIERLOOSE");a[u.XRANGEIDENTIFIERLOOSE]=a[u.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*";tok("XRANGEIDENTIFIER");a[u.XRANGEIDENTIFIER]=a[u.NUMERICIDENTIFIER]+"|x|X|\\*";tok("XRANGEPLAIN");a[u.XRANGEPLAIN]="[v=\\s]*("+a[u.XRANGEIDENTIFIER]+")"+"(?:\\.("+a[u.XRANGEIDENTIFIER]+")"+"(?:\\.("+a[u.XRANGEIDENTIFIER]+")"+"(?:"+a[u.PRERELEASE]+")?"+a[u.BUILD]+"?"+")?)?";tok("XRANGEPLAINLOOSE");a[u.XRANGEPLAINLOOSE]="[v=\\s]*("+a[u.XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+a[u.XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+a[u.XRANGEIDENTIFIERLOOSE]+")"+"(?:"+a[u.PRERELEASELOOSE]+")?"+a[u.BUILD]+"?"+")?)?";tok("XRANGE");a[u.XRANGE]="^"+a[u.GTLT]+"\\s*"+a[u.XRANGEPLAIN]+"$";tok("XRANGELOOSE");a[u.XRANGELOOSE]="^"+a[u.GTLT]+"\\s*"+a[u.XRANGEPLAINLOOSE]+"$";tok("COERCE");a[u.COERCE]="(^|[^\\d])"+"(\\d{1,"+o+"})"+"(?:\\.(\\d{1,"+o+"}))?"+"(?:\\.(\\d{1,"+o+"}))?"+"(?:$|[^\\d])";tok("COERCERTL");s[u.COERCERTL]=new RegExp(a[u.COERCE],"g");tok("LONETILDE");a[u.LONETILDE]="(?:~>?)";tok("TILDETRIM");a[u.TILDETRIM]="(\\s*)"+a[u.LONETILDE]+"\\s+";s[u.TILDETRIM]=new RegExp(a[u.TILDETRIM],"g");var h="$1~";tok("TILDE");a[u.TILDE]="^"+a[u.LONETILDE]+a[u.XRANGEPLAIN]+"$";tok("TILDELOOSE");a[u.TILDELOOSE]="^"+a[u.LONETILDE]+a[u.XRANGEPLAINLOOSE]+"$";tok("LONECARET");a[u.LONECARET]="(?:\\^)";tok("CARETTRIM");a[u.CARETTRIM]="(\\s*)"+a[u.LONECARET]+"\\s+";s[u.CARETTRIM]=new RegExp(a[u.CARETTRIM],"g");var c="$1^";tok("CARET");a[u.CARET]="^"+a[u.LONECARET]+a[u.XRANGEPLAIN]+"$";tok("CARETLOOSE");a[u.CARETLOOSE]="^"+a[u.LONECARET]+a[u.XRANGEPLAINLOOSE]+"$";tok("COMPARATORLOOSE");a[u.COMPARATORLOOSE]="^"+a[u.GTLT]+"\\s*("+a[u.LOOSEPLAIN]+")$|^$";tok("COMPARATOR");a[u.COMPARATOR]="^"+a[u.GTLT]+"\\s*("+a[u.FULLPLAIN]+")$|^$";tok("COMPARATORTRIM");a[u.COMPARATORTRIM]="(\\s*)"+a[u.GTLT]+"\\s*("+a[u.LOOSEPLAIN]+"|"+a[u.XRANGEPLAIN]+")";s[u.COMPARATORTRIM]=new RegExp(a[u.COMPARATORTRIM],"g");var f="$1$2$3";tok("HYPHENRANGE");a[u.HYPHENRANGE]="^\\s*("+a[u.XRANGEPLAIN]+")"+"\\s+-\\s+"+"("+a[u.XRANGEPLAIN]+")"+"\\s*$";tok("HYPHENRANGELOOSE");a[u.HYPHENRANGELOOSE]="^\\s*("+a[u.XRANGEPLAINLOOSE]+")"+"\\s+-\\s+"+"("+a[u.XRANGEPLAINLOOSE]+")"+"\\s*$";tok("STAR");a[u.STAR]="(<|>)?=?\\s*\\*";for(var d=0;d<l;d++){i(d,a[d]);if(!s[d]){s[d]=new RegExp(a[d])}}t.parse=parse;function parse(e,t){if(!t||typeof t!=="object"){t={loose:!!t,includePrerelease:false}}if(e instanceof SemVer){return e}if(typeof e!=="string"){return null}if(e.length>n){return null}var i=t.loose?s[u.LOOSE]:s[u.FULL];if(!i.test(e)){return null}try{return new SemVer(e,t)}catch(e){return null}}t.valid=valid;function valid(e,t){var i=parse(e,t);return i?i.version:null}t.clean=clean;function clean(e,t){var i=parse(e.trim().replace(/^[=v]+/,""),t);return i?i.version:null}t.SemVer=SemVer;function SemVer(e,t){if(!t||typeof t!=="object"){t={loose:!!t,includePrerelease:false}}if(e instanceof SemVer){if(e.loose===t.loose){return e}else{e=e.version}}else if(typeof e!=="string"){throw new TypeError("Invalid Version: "+e)}if(e.length>n){throw new TypeError("version is longer than "+n+" characters")}if(!(this instanceof SemVer)){return new SemVer(e,t)}i("SemVer",e,t);this.options=t;this.loose=!!t.loose;var o=e.trim().match(t.loose?s[u.LOOSE]:s[u.FULL]);if(!o){throw new TypeError("Invalid Version: "+e)}this.raw=e;this.major=+o[1];this.minor=+o[2];this.patch=+o[3];if(this.major>r||this.major<0){throw new TypeError("Invalid major version")}if(this.minor>r||this.minor<0){throw new TypeError("Invalid minor version")}if(this.patch>r||this.patch<0){throw new TypeError("Invalid patch version")}if(!o[4]){this.prerelease=[]}else{this.prerelease=o[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r){return t}}return e})}this.build=o[5]?o[5].split("."):[];this.format()}SemVer.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;if(this.prerelease.length){this.version+="-"+this.prerelease.join(".")}return this.version};SemVer.prototype.toString=function(){return this.version};SemVer.prototype.compare=function(e){i("SemVer.compare",this.version,this.options,e);if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}return this.compareMain(e)||this.comparePre(e)};SemVer.prototype.compareMain=function(e){if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}return compareIdentifiers(this.major,e.major)||compareIdentifiers(this.minor,e.minor)||compareIdentifiers(this.patch,e.patch)};SemVer.prototype.comparePre=function(e){if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}if(this.prerelease.length&&!e.prerelease.length){return-1}else if(!this.prerelease.length&&e.prerelease.length){return 1}else if(!this.prerelease.length&&!e.prerelease.length){return 0}var t=0;do{var n=this.prerelease[t];var r=e.prerelease[t];i("prerelease compare",t,n,r);if(n===undefined&&r===undefined){return 0}else if(r===undefined){return 1}else if(n===undefined){return-1}else if(n===r){continue}else{return compareIdentifiers(n,r)}}while(++t)};SemVer.prototype.compareBuild=function(e){if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}var t=0;do{var n=this.build[t];var r=e.build[t];i("prerelease compare",t,n,r);if(n===undefined&&r===undefined){return 0}else if(r===undefined){return 1}else if(n===undefined){return-1}else if(n===r){continue}else{return compareIdentifiers(n,r)}}while(++t)};SemVer.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",t);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",t);break;case"prepatch":this.prerelease.length=0;this.inc("patch",t);this.inc("pre",t);break;case"prerelease":if(this.prerelease.length===0){this.inc("patch",t)}this.inc("pre",t);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++}this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0){this.minor++}this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0){this.patch++}this.prerelease=[];break;case"pre":if(this.prerelease.length===0){this.prerelease=[0]}else{var i=this.prerelease.length;while(--i>=0){if(typeof this.prerelease[i]==="number"){this.prerelease[i]++;i=-2}}if(i===-1){this.prerelease.push(0)}}if(t){if(this.prerelease[0]===t){if(isNaN(this.prerelease[1])){this.prerelease=[t,0]}}else{this.prerelease=[t,0]}}break;default:throw new Error("invalid increment argument: "+e)}this.format();this.raw=this.version;return this};t.inc=inc;function inc(e,t,i,n){if(typeof i==="string"){n=i;i=undefined}try{return new SemVer(e,i).inc(t,n).version}catch(e){return null}}t.diff=diff;function diff(e,t){if(eq(e,t)){return null}else{var i=parse(e);var n=parse(t);var r="";if(i.prerelease.length||n.prerelease.length){r="pre";var o="prerelease"}for(var s in i){if(s==="major"||s==="minor"||s==="patch"){if(i[s]!==n[s]){return r+s}}}return o}}t.compareIdentifiers=compareIdentifiers;var m=/^[0-9]+$/;function compareIdentifiers(e,t){var i=m.test(e);var n=m.test(t);if(i&&n){e=+e;t=+t}return e===t?0:i&&!n?-1:n&&!i?1:e<t?-1:1}t.rcompareIdentifiers=rcompareIdentifiers;function rcompareIdentifiers(e,t){return compareIdentifiers(t,e)}t.major=major;function major(e,t){return new SemVer(e,t).major}t.minor=minor;function minor(e,t){return new SemVer(e,t).minor}t.patch=patch;function patch(e,t){return new SemVer(e,t).patch}t.compare=compare;function compare(e,t,i){return new SemVer(e,i).compare(new SemVer(t,i))}t.compareLoose=compareLoose;function compareLoose(e,t){return compare(e,t,true)}t.compareBuild=compareBuild;function compareBuild(e,t,i){var n=new SemVer(e,i);var r=new SemVer(t,i);return n.compare(r)||n.compareBuild(r)}t.rcompare=rcompare;function rcompare(e,t,i){return compare(t,e,i)}t.sort=sort;function sort(e,i){return e.sort(function(e,n){return t.compareBuild(e,n,i)})}t.rsort=rsort;function rsort(e,i){return e.sort(function(e,n){return t.compareBuild(n,e,i)})}t.gt=gt;function gt(e,t,i){return compare(e,t,i)>0}t.lt=lt;function lt(e,t,i){return compare(e,t,i)<0}t.eq=eq;function eq(e,t,i){return compare(e,t,i)===0}t.neq=neq;function neq(e,t,i){return compare(e,t,i)!==0}t.gte=gte;function gte(e,t,i){return compare(e,t,i)>=0}t.lte=lte;function lte(e,t,i){return compare(e,t,i)<=0}t.cmp=cmp;function cmp(e,t,i,n){switch(t){case"===":if(typeof e==="object")e=e.version;if(typeof i==="object")i=i.version;return e===i;case"!==":if(typeof e==="object")e=e.version;if(typeof i==="object")i=i.version;return e!==i;case"":case"=":case"==":return eq(e,i,n);case"!=":return neq(e,i,n);case">":return gt(e,i,n);case">=":return gte(e,i,n);case"<":return lt(e,i,n);case"<=":return lte(e,i,n);default:throw new TypeError("Invalid operator: "+t)}}t.Comparator=Comparator;function Comparator(e,t){if(!t||typeof t!=="object"){t={loose:!!t,includePrerelease:false}}if(e instanceof Comparator){if(e.loose===!!t.loose){return e}else{e=e.value}}if(!(this instanceof Comparator)){return new Comparator(e,t)}i("comparator",e,t);this.options=t;this.loose=!!t.loose;this.parse(e);if(this.semver===p){this.value=""}else{this.value=this.operator+this.semver.version}i("comp",this)}var p={};Comparator.prototype.parse=function(e){var t=this.options.loose?s[u.COMPARATORLOOSE]:s[u.COMPARATOR];var i=e.match(t);if(!i){throw new TypeError("Invalid comparator: "+e)}this.operator=i[1]!==undefined?i[1]:"";if(this.operator==="="){this.operator=""}if(!i[2]){this.semver=p}else{this.semver=new SemVer(i[2],this.options.loose)}};Comparator.prototype.toString=function(){return this.value};Comparator.prototype.test=function(e){i("Comparator.test",e,this.options.loose);if(this.semver===p||e===p){return true}if(typeof e==="string"){try{e=new SemVer(e,this.options)}catch(e){return false}}return cmp(e,this.operator,this.semver,this.options)};Comparator.prototype.intersects=function(e,t){if(!(e instanceof Comparator)){throw new TypeError("a Comparator is required")}if(!t||typeof t!=="object"){t={loose:!!t,includePrerelease:false}}var i;if(this.operator===""){if(this.value===""){return true}i=new Range(e.value,t);return satisfies(this.value,i,t)}else if(e.operator===""){if(e.value===""){return true}i=new Range(this.value,t);return satisfies(e.semver,i,t)}var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">");var r=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<");var o=this.semver.version===e.semver.version;var s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<=");var a=cmp(this.semver,"<",e.semver,t)&&((this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"));var u=cmp(this.semver,">",e.semver,t)&&((this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">"));return n||r||o&&s||a||u};t.Range=Range;function Range(e,t){if(!t||typeof t!=="object"){t={loose:!!t,includePrerelease:false}}if(e instanceof Range){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease){return e}else{return new Range(e.raw,t)}}if(e instanceof Comparator){return new Range(e.value,t)}if(!(this instanceof Range)){return new Range(e,t)}this.options=t;this.loose=!!t.loose;this.includePrerelease=!!t.includePrerelease;this.raw=e;this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length});if(!this.set.length){throw new TypeError("Invalid SemVer Range: "+e)}this.format()}Range.prototype.format=function(){this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim();return this.range};Range.prototype.toString=function(){return this.range};Range.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?s[u.HYPHENRANGELOOSE]:s[u.HYPHENRANGE];e=e.replace(n,hyphenReplace);i("hyphen replace",e);e=e.replace(s[u.COMPARATORTRIM],f);i("comparator trim",e,s[u.COMPARATORTRIM]);e=e.replace(s[u.TILDETRIM],h);e=e.replace(s[u.CARETTRIM],c);e=e.split(/\s+/).join(" ");var r=t?s[u.COMPARATORLOOSE]:s[u.COMPARATOR];var o=e.split(" ").map(function(e){return parseComparator(e,this.options)},this).join(" ").split(/\s+/);if(this.options.loose){o=o.filter(function(e){return!!e.match(r)})}o=o.map(function(e){return new Comparator(e,this.options)},this);return o};Range.prototype.intersects=function(e,t){if(!(e instanceof Range)){throw new TypeError("a Range is required")}return this.set.some(function(i){return isSatisfiable(i,t)&&e.set.some(function(e){return isSatisfiable(e,t)&&i.every(function(i){return e.every(function(e){return i.intersects(e,t)})})})})};function isSatisfiable(e,t){var i=true;var n=e.slice();var r=n.pop();while(i&&n.length){i=n.every(function(e){return r.intersects(e,t)});r=n.pop()}return i}t.toComparators=toComparators;function toComparators(e,t){return new Range(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})}function parseComparator(e,t){i("comp",e,t);e=replaceCarets(e,t);i("caret",e);e=replaceTildes(e,t);i("tildes",e);e=replaceXRanges(e,t);i("xrange",e);e=replaceStars(e,t);i("stars",e);return e}function isX(e){return!e||e.toLowerCase()==="x"||e==="*"}function replaceTildes(e,t){return e.trim().split(/\s+/).map(function(e){return replaceTilde(e,t)}).join(" ")}function replaceTilde(e,t){var n=t.loose?s[u.TILDELOOSE]:s[u.TILDE];return e.replace(n,function(t,n,r,o,s){i("tilde",e,t,n,r,o,s);var a;if(isX(n)){a=""}else if(isX(r)){a=">="+n+".0.0 <"+(+n+1)+".0.0"}else if(isX(o)){a=">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0"}else if(s){i("replaceTilde pr",s);a=">="+n+"."+r+"."+o+"-"+s+" <"+n+"."+(+r+1)+".0"}else{a=">="+n+"."+r+"."+o+" <"+n+"."+(+r+1)+".0"}i("tilde return",a);return a})}function replaceCarets(e,t){return e.trim().split(/\s+/).map(function(e){return replaceCaret(e,t)}).join(" ")}function replaceCaret(e,t){i("caret",e,t);var n=t.loose?s[u.CARETLOOSE]:s[u.CARET];return e.replace(n,function(t,n,r,o,s){i("caret",e,t,n,r,o,s);var a;if(isX(n)){a=""}else if(isX(r)){a=">="+n+".0.0 <"+(+n+1)+".0.0"}else if(isX(o)){if(n==="0"){a=">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0"}else{a=">="+n+"."+r+".0 <"+(+n+1)+".0.0"}}else if(s){i("replaceCaret pr",s);if(n==="0"){if(r==="0"){a=">="+n+"."+r+"."+o+"-"+s+" <"+n+"."+r+"."+(+o+1)}else{a=">="+n+"."+r+"."+o+"-"+s+" <"+n+"."+(+r+1)+".0"}}else{a=">="+n+"."+r+"."+o+"-"+s+" <"+(+n+1)+".0.0"}}else{i("no pr");if(n==="0"){if(r==="0"){a=">="+n+"."+r+"."+o+" <"+n+"."+r+"."+(+o+1)}else{a=">="+n+"."+r+"."+o+" <"+n+"."+(+r+1)+".0"}}else{a=">="+n+"."+r+"."+o+" <"+(+n+1)+".0.0"}}i("caret return",a);return a})}function replaceXRanges(e,t){i("replaceXRanges",e,t);return e.split(/\s+/).map(function(e){return replaceXRange(e,t)}).join(" ")}function replaceXRange(e,t){e=e.trim();var n=t.loose?s[u.XRANGELOOSE]:s[u.XRANGE];return e.replace(n,function(n,r,o,s,a,u){i("xRange",e,n,r,o,s,a,u);var l=isX(o);var h=l||isX(s);var c=h||isX(a);var f=c;if(r==="="&&f){r=""}u=t.includePrerelease?"-0":"";if(l){if(r===">"||r==="<"){n="<0.0.0-0"}else{n="*"}}else if(r&&f){if(h){s=0}a=0;if(r===">"){r=">=";if(h){o=+o+1;s=0;a=0}else{s=+s+1;a=0}}else if(r==="<="){r="<";if(h){o=+o+1}else{s=+s+1}}n=r+o+"."+s+"."+a+u}else if(h){n=">="+o+".0.0"+u+" <"+(+o+1)+".0.0"+u}else if(c){n=">="+o+"."+s+".0"+u+" <"+o+"."+(+s+1)+".0"+u}i("xRange return",n);return n})}function replaceStars(e,t){i("replaceStars",e,t);return e.trim().replace(s[u.STAR],"")}function hyphenReplace(e,t,i,n,r,o,s,a,u,l,h,c,f){if(isX(i)){t=""}else if(isX(n)){t=">="+i+".0.0"}else if(isX(r)){t=">="+i+"."+n+".0"}else{t=">="+t}if(isX(u)){a=""}else if(isX(l)){a="<"+(+u+1)+".0.0"}else if(isX(h)){a="<"+u+"."+(+l+1)+".0"}else if(c){a="<="+u+"."+l+"."+h+"-"+c}else{a="<="+a}return(t+" "+a).trim()}Range.prototype.test=function(e){if(!e){return false}if(typeof e==="string"){try{e=new SemVer(e,this.options)}catch(e){return false}}for(var t=0;t<this.set.length;t++){if(testSet(this.set[t],e,this.options)){return true}}return false};function testSet(e,t,n){for(var r=0;r<e.length;r++){if(!e[r].test(t)){return false}}if(t.prerelease.length&&!n.includePrerelease){for(r=0;r<e.length;r++){i(e[r].semver);if(e[r].semver===p){continue}if(e[r].semver.prerelease.length>0){var o=e[r].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch){return true}}}return false}return true}t.satisfies=satisfies;function satisfies(e,t,i){try{t=new Range(t,i)}catch(e){return false}return t.test(e)}t.maxSatisfying=maxSatisfying;function maxSatisfying(e,t,i){var n=null;var r=null;try{var o=new Range(t,i)}catch(e){return null}e.forEach(function(e){if(o.test(e)){if(!n||r.compare(e)===-1){n=e;r=new SemVer(n,i)}}});return n}t.minSatisfying=minSatisfying;function minSatisfying(e,t,i){var n=null;var r=null;try{var o=new Range(t,i)}catch(e){return null}e.forEach(function(e){if(o.test(e)){if(!n||r.compare(e)===1){n=e;r=new SemVer(n,i)}}});return n}t.minVersion=minVersion;function minVersion(e,t){e=new Range(e,t);var i=new SemVer("0.0.0");if(e.test(i)){return i}i=new SemVer("0.0.0-0");if(e.test(i)){return i}i=null;for(var n=0;n<e.set.length;++n){var r=e.set[n];r.forEach(function(e){var t=new SemVer(e.semver.version);switch(e.operator){case">":if(t.prerelease.length===0){t.patch++}else{t.prerelease.push(0)}t.raw=t.format();case"":case">=":if(!i||gt(i,t)){i=t}break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}})}if(i&&e.test(i)){return i}return null}t.validRange=validRange;function validRange(e,t){try{return new Range(e,t).range||"*"}catch(e){return null}}t.ltr=ltr;function ltr(e,t,i){return outside(e,t,"<",i)}t.gtr=gtr;function gtr(e,t,i){return outside(e,t,">",i)}t.outside=outside;function outside(e,t,i,n){e=new SemVer(e,n);t=new Range(t,n);var r,o,s,a,u;switch(i){case">":r=gt;o=lte;s=lt;a=">";u=">=";break;case"<":r=lt;o=gte;s=gt;a="<";u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(e,t,n)){return false}for(var l=0;l<t.set.length;++l){var h=t.set[l];var c=null;var f=null;h.forEach(function(e){if(e.semver===p){e=new Comparator(">=0.0.0")}c=c||e;f=f||e;if(r(e.semver,c.semver,n)){c=e}else if(s(e.semver,f.semver,n)){f=e}});if(c.operator===a||c.operator===u){return false}if((!f.operator||f.operator===a)&&o(e,f.semver)){return false}else if(f.operator===u&&s(e,f.semver)){return false}}return true}t.prerelease=prerelease;function prerelease(e,t){var i=parse(e,t);return i&&i.prerelease.length?i.prerelease:null}t.intersects=intersects;function intersects(e,t,i){e=new Range(e,i);t=new Range(t,i);return e.intersects(t)}t.coerce=coerce;function coerce(e,t){if(e instanceof SemVer){return e}if(typeof e==="number"){e=String(e)}if(typeof e!=="string"){return null}t=t||{};var i=null;if(!t.rtl){i=e.match(s[u.COERCE])}else{var n;while((n=s[u.COERCERTL].exec(e))&&(!i||i.index+i[0].length!==e.length)){if(!i||n.index+n[0].length!==i.index+i[0].length){i=n}s[u.COERCERTL].lastIndex=n.index+n[1].length+n[2].length}s[u.COERCERTL].lastIndex=-1}if(i===null){return null}return parse(i[2]+"."+(i[3]||"0")+"."+(i[4]||"0"),t)}},293:function(e){e.exports=require("buffer")},324:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(993);const r=i(882);var o;(function(e){e["Comment"]="comment";e["Imports"]="imports";e["Region"]="region"})(o=t.FoldingRangeKind||(t.FoldingRangeKind={}));var s;(function(e){e.method="textDocument/foldingRange";e.type=new r.ProtocolRequestType(e.method);e.resultType=new n.ProgressType})(s=t.FoldingRangeRequest||(t.FoldingRangeRequest={}))},364:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i;(function(e){function create(e){return{dispose:e}}e.create=create})(i=t.Disposable||(t.Disposable={}));var n;(function(e){const t={dispose(){}};e.None=function(){return t}})(n=t.Event||(t.Event={}));class CallbackList{add(e,t=null,i){if(!this._callbacks){this._callbacks=[];this._contexts=[]}this._callbacks.push(e);this._contexts.push(t);if(Array.isArray(i)){i.push({dispose:()=>this.remove(e,t)})}}remove(e,t=null){if(!this._callbacks){return}var i=false;for(var n=0,r=this._callbacks.length;n<r;n++){if(this._callbacks[n]===e){if(this._contexts[n]===t){this._callbacks.splice(n,1);this._contexts.splice(n,1);return}else{i=true}}}if(i){throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks){return[]}var t=[],i=this._callbacks.slice(0),n=this._contexts.slice(0);for(var r=0,o=i.length;r<o;r++){try{t.push(i[r].apply(n[r],e))}catch(e){console.error(e)}}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=undefined;this._contexts=undefined}}class Emitter{constructor(e){this._options=e}get event(){if(!this._event){this._event=((e,t,i)=>{if(!this._callbacks){this._callbacks=new CallbackList}if(this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()){this._options.onFirstListenerAdd(this)}this._callbacks.add(e,t);let n;n={dispose:()=>{this._callbacks.remove(e,t);n.dispose=Emitter._noop;if(this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()){this._options.onLastListenerRemove(this)}}};if(Array.isArray(i)){i.push(n)}return n})}return this._event}fire(e){if(this._callbacks){this._callbacks.invoke.call(this._callbacks,e)}}dispose(){if(this._callbacks){this._callbacks.dispose();this._callbacks=undefined}}}t.Emitter=Emitter;Emitter._noop=function(){}},369:function(e,t,i){"use strict";function __export(e){for(var i in e)if(!t.hasOwnProperty(i))t[i]=e[i]}Object.defineProperty(t,"__esModule",{value:true});const n=i(480);const r=i(719);const o=i(877);const s=i(80);const a=i(730);const u=i(146);const l=i(3);const h=i(581);__export(i(719));class ConsoleLogger{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}}function createConnection(e,t,i,n){let o=new ConsoleLogger;let s=r.createProtocolConnection(e,t,o);s.onError(e=>{i(e[0],e[1],e[2])});s.onClose(n);let u={listen:()=>s.listen(),sendRequest:(e,...t)=>s.sendRequest(a.string(e)?e:e.method,...t),onRequest:(e,t)=>s.onRequest(a.string(e)?e:e.method,t),sendNotification:(e,t)=>s.sendNotification(a.string(e)?e:e.method,t),onNotification:(e,t)=>s.onNotification(a.string(e)?e:e.method,t),onProgress:s.onProgress,sendProgress:s.sendProgress,trace:(e,t,i)=>{const n={sendNotification:false,traceFormat:r.TraceFormat.Text};if(i===void 0){s.trace(e,t,n)}else if(a.boolean(i)){s.trace(e,t,i)}else{s.trace(e,t,i)}},initialize:e=>s.sendRequest(r.InitializeRequest.type,e),shutdown:()=>s.sendRequest(r.ShutdownRequest.type,undefined),exit:()=>s.sendNotification(r.ExitNotification.type),onLogMessage:e=>s.onNotification(r.LogMessageNotification.type,e),onShowMessage:e=>s.onNotification(r.ShowMessageNotification.type,e),onTelemetry:e=>s.onNotification(r.TelemetryEventNotification.type,e),didChangeConfiguration:e=>s.sendNotification(r.DidChangeConfigurationNotification.type,e),didChangeWatchedFiles:e=>s.sendNotification(r.DidChangeWatchedFilesNotification.type,e),didOpenTextDocument:e=>s.sendNotification(r.DidOpenTextDocumentNotification.type,e),didChangeTextDocument:e=>s.sendNotification(r.DidChangeTextDocumentNotification.type,e),didCloseTextDocument:e=>s.sendNotification(r.DidCloseTextDocumentNotification.type,e),didSaveTextDocument:e=>s.sendNotification(r.DidSaveTextDocumentNotification.type,e),onDiagnostics:e=>s.onNotification(r.PublishDiagnosticsNotification.type,e),dispose:()=>s.dispose()};return u}var c;(function(e){e[e["Continue"]=1]="Continue";e[e["Shutdown"]=2]="Shutdown"})(c=t.ErrorAction||(t.ErrorAction={}));var f;(function(e){e[e["DoNotRestart"]=1]="DoNotRestart";e[e["Restart"]=2]="Restart"})(f=t.CloseAction||(t.CloseAction={}));class DefaultErrorHandler{constructor(e){this.name=e;this.restarts=[]}error(e,t,i){if(i&&i<=3){return c.Continue}return c.Shutdown}closed(){this.restarts.push(Date.now());if(this.restarts.length<5){return f.Restart}else{let e=this.restarts[this.restarts.length-1]-this.restarts[0];if(e<=3*60*1e3){n.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);return f.DoNotRestart}else{this.restarts.shift();return f.Restart}}}}var d;(function(e){e[e["Info"]=1]="Info";e[e["Warn"]=2]="Warn";e[e["Error"]=3]="Error";e[e["Never"]=4]="Never"})(d=t.RevealOutputChannelOn||(t.RevealOutputChannelOn={}));var m;(function(e){e[e["Stopped"]=1]="Stopped";e[e["Starting"]=3]="Starting";e[e["Running"]=2]="Running"})(m=t.State||(t.State={}));var p;(function(e){e[e["Initial"]=0]="Initial";e[e["Starting"]=1]="Starting";e[e["StartFailed"]=2]="StartFailed";e[e["Running"]=3]="Running";e[e["Stopping"]=4]="Stopping";e[e["Stopped"]=5]="Stopped"})(p||(p={}));const g=[r.SymbolKind.File,r.SymbolKind.Module,r.SymbolKind.Namespace,r.SymbolKind.Package,r.SymbolKind.Class,r.SymbolKind.Method,r.SymbolKind.Property,r.SymbolKind.Field,r.SymbolKind.Constructor,r.SymbolKind.Enum,r.SymbolKind.Interface,r.SymbolKind.Function,r.SymbolKind.Variable,r.SymbolKind.Constant,r.SymbolKind.String,r.SymbolKind.Number,r.SymbolKind.Boolean,r.SymbolKind.Array,r.SymbolKind.Object,r.SymbolKind.Key,r.SymbolKind.Null,r.SymbolKind.EnumMember,r.SymbolKind.Struct,r.SymbolKind.Event,r.SymbolKind.Operator,r.SymbolKind.TypeParameter];const y=[r.CompletionItemKind.Text,r.CompletionItemKind.Method,r.CompletionItemKind.Function,r.CompletionItemKind.Constructor,r.CompletionItemKind.Field,r.CompletionItemKind.Variable,r.CompletionItemKind.Class,r.CompletionItemKind.Interface,r.CompletionItemKind.Module,r.CompletionItemKind.Property,r.CompletionItemKind.Unit,r.CompletionItemKind.Value,r.CompletionItemKind.Enum,r.CompletionItemKind.Keyword,r.CompletionItemKind.Snippet,r.CompletionItemKind.Color,r.CompletionItemKind.File,r.CompletionItemKind.Reference,r.CompletionItemKind.Folder,r.CompletionItemKind.EnumMember,r.CompletionItemKind.Constant,r.CompletionItemKind.Struct,r.CompletionItemKind.Event,r.CompletionItemKind.Operator,r.CompletionItemKind.TypeParameter];function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}var C;(function(e){function is(e){let t=e;return t&&a.func(t.register)&&a.func(t.unregister)&&a.func(t.dispose)&&t.messages!==void 0}e.is=is})(C||(C={}));class DocumentNotifiactions{constructor(e,t,i,n,r,o){this._client=e;this._event=t;this._type=i;this._middleware=n;this._createParams=r;this._selectorFilter=o;this._selectors=new Map}static textDocumentFilter(e,t){for(const i of e){if(n.languages.match(i,t)){return true}}return false}register(e,t){if(!t.registerOptions.documentSelector){return}if(!this._listener){this._listener=this._event(this.callback,this)}this._selectors.set(t.id,t.registerOptions.documentSelector)}callback(e){if(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)){if(this._middleware){this._middleware(e,e=>this._client.sendNotification(this._type,this._createParams(e)))}else{this._client.sendNotification(this._type,this._createParams(e))}this.notificationSent(e)}}notificationSent(e){}unregister(e){this._selectors.delete(e);if(this._selectors.size===0&&this._listener){this._listener.dispose();this._listener=undefined}}dispose(){this._selectors.clear();if(this._listener){this._listener.dispose();this._listener=undefined}}getProvider(e){for(const t of this._selectors.values()){if(n.languages.match(t,e)){return{send:e=>{this.callback(e)}}}}throw new Error(`No provider available for the given text document`)}}class DidOpenTextDocumentFeature extends DocumentNotifiactions{constructor(e,t){super(e,n.workspace.onDidOpenTextDocument,r.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,t=>e.code2ProtocolConverter.asOpenTextDocumentParams(t),DocumentNotifiactions.textDocumentFilter);this._syncedDocuments=t}get messages(){return r.DidOpenTextDocumentNotification.type}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"synchronization").dynamicRegistration=true}initialize(e,t){let i=e.resolvedTextDocumentSync;if(t&&i&&i.openClose){this.register(this.messages,{id:l.generateUuid(),registerOptions:{documentSelector:t}})}}register(e,t){super.register(e,t);if(!t.registerOptions.documentSelector){return}let i=t.registerOptions.documentSelector;n.workspace.textDocuments.forEach(e=>{let t=e.uri.toString();if(this._syncedDocuments.has(t)){return}if(n.languages.match(i,e)){let i=this._client.clientOptions.middleware;let n=e=>{this._client.sendNotification(this._type,this._createParams(e))};if(i.didOpen){i.didOpen(e,n)}else{n(e)}this._syncedDocuments.set(t,e)}})}notificationSent(e){super.notificationSent(e);this._syncedDocuments.set(e.uri.toString(),e)}}class DidCloseTextDocumentFeature extends DocumentNotifiactions{constructor(e,t){super(e,n.workspace.onDidCloseTextDocument,r.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,t=>e.code2ProtocolConverter.asCloseTextDocumentParams(t),DocumentNotifiactions.textDocumentFilter);this._syncedDocuments=t}get messages(){return r.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"synchronization").dynamicRegistration=true}initialize(e,t){let i=e.resolvedTextDocumentSync;if(t&&i&&i.openClose){this.register(this.messages,{id:l.generateUuid(),registerOptions:{documentSelector:t}})}}notificationSent(e){super.notificationSent(e);this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let i=this._selectors.values();this._syncedDocuments.forEach(e=>{if(n.languages.match(t,e)&&!this._selectorFilter(i,e)){let t=this._client.clientOptions.middleware;let i=e=>{this._client.sendNotification(this._type,this._createParams(e))};this._syncedDocuments.delete(e.uri.toString());if(t.didClose){t.didClose(e,i)}else{i(e)}}})}}class DidChangeTextDocumentFeature{constructor(e){this._client=e;this._changeData=new Map;this._forcingDelivery=false}get messages(){return r.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"synchronization").dynamicRegistration=true}initialize(e,t){let i=e.resolvedTextDocumentSync;if(t&&i&&i.change!==void 0&&i.change!==r.TextDocumentSyncKind.None){this.register(this.messages,{id:l.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:i.change})})}}register(e,t){if(!t.registerOptions.documentSelector){return}if(!this._listener){this._listener=n.workspace.onDidChangeTextDocument(this.callback,this)}this._changeData.set(t.id,{documentSelector:t.registerOptions.documentSelector,syncKind:t.registerOptions.syncKind})}callback(e){if(e.contentChanges.length===0){return}for(const t of this._changeData.values()){if(n.languages.match(t.documentSelector,e.document)){let i=this._client.clientOptions.middleware;if(t.syncKind===r.TextDocumentSyncKind.Incremental){let t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);if(i.didChange){i.didChange(e,()=>this._client.sendNotification(r.DidChangeTextDocumentNotification.type,t))}else{this._client.sendNotification(r.DidChangeTextDocumentNotification.type,t)}}else if(t.syncKind===r.TextDocumentSyncKind.Full){let t=e=>{if(this._changeDelayer){if(this._changeDelayer.uri!==e.document.uri.toString()){this.forceDelivery();this._changeDelayer.uri=e.document.uri.toString()}this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(r.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))})}else{this._changeDelayer={uri:e.document.uri.toString(),delayer:new u.Delayer(200)};this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(r.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))},-1)}};if(i.didChange){i.didChange(e,t)}else{t(e)}}}}}unregister(e){this._changeData.delete(e);if(this._changeData.size===0&&this._listener){this._listener.dispose();this._listener=undefined}}dispose(){this._changeDelayer=undefined;this._forcingDelivery=false;this._changeData.clear();if(this._listener){this._listener.dispose();this._listener=undefined}}forceDelivery(){if(this._forcingDelivery||!this._changeDelayer){return}try{this._forcingDelivery=true;this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=false}}getProvider(e){for(const t of this._changeData.values()){if(n.languages.match(t.documentSelector,e)){return{send:e=>{this.callback(e)}}}}throw new Error(`No provider available for the given text document`)}}class WillSaveFeature extends DocumentNotifiactions{constructor(e){super(e,n.workspace.onWillSaveTextDocument,r.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),(e,t)=>DocumentNotifiactions.textDocumentFilter(e,t.document))}get messages(){return r.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"synchronization");t.willSave=true}initialize(e,t){let i=e.resolvedTextDocumentSync;if(t&&i&&i.willSave){this.register(this.messages,{id:l.generateUuid(),registerOptions:{documentSelector:t}})}}}class WillSaveWaitUntilFeature{constructor(e){this._client=e;this._selectors=new Map}get messages(){return r.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"synchronization");t.willSaveWaitUntil=true}initialize(e,t){let i=e.resolvedTextDocumentSync;if(t&&i&&i.willSaveWaitUntil){this.register(this.messages,{id:l.generateUuid(),registerOptions:{documentSelector:t}})}}register(e,t){if(!t.registerOptions.documentSelector){return}if(!this._listener){this._listener=n.workspace.onWillSaveTextDocument(this.callback,this)}this._selectors.set(t.id,t.registerOptions.documentSelector)}callback(e){if(DocumentNotifiactions.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware;let i=e=>{return this._client.sendRequest(r.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(e)).then(e=>{let t=this._client.protocol2CodeConverter.asTextEdits(e);return t===void 0?[]:t})};e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,i):i(e))}}unregister(e){this._selectors.delete(e);if(this._selectors.size===0&&this._listener){this._listener.dispose();this._listener=undefined}}dispose(){this._selectors.clear();if(this._listener){this._listener.dispose();this._listener=undefined}}}class DidSaveTextDocumentFeature extends DocumentNotifiactions{constructor(e){super(e,n.workspace.onDidSaveTextDocument,r.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),DocumentNotifiactions.textDocumentFilter)}get messages(){return r.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"synchronization").didSave=true}initialize(e,t){let i=e.resolvedTextDocumentSync;if(t&&i&&i.save){this.register(this.messages,{id:l.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{includeText:!!i.save.includeText})})}}register(e,t){this._includeText=!!t.registerOptions.includeText;super.register(e,t)}}class FileSystemWatcherFeature{constructor(e,t){this._client=e;this._notifyFileEvent=t;this._watchers=new Map}get messages(){return r.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){ensure(ensure(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=true}initialize(e,t){}register(e,t){if(!Array.isArray(t.registerOptions.watchers)){return}let i=[];for(let e of t.registerOptions.watchers){if(!a.string(e.globPattern)){continue}let t=true,o=true,s=true;if(e.kind!==void 0&&e.kind!==null){t=(e.kind&r.WatchKind.Create)!==0;o=(e.kind&r.WatchKind.Change)!==0;s=(e.kind&r.WatchKind.Delete)!==0}let u=n.workspace.createFileSystemWatcher(e.globPattern,!t,!o,!s);this.hookListeners(u,t,o,s);i.push(u)}this._watchers.set(t.id,i)}registerRaw(e,t){let i=[];for(let e of t){this.hookListeners(e,true,true,true,i)}this._watchers.set(e,i)}hookListeners(e,t,i,n,o){if(t){e.onDidCreate(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:r.FileChangeType.Created}),null,o)}if(i){e.onDidChange(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:r.FileChangeType.Changed}),null,o)}if(n){e.onDidDelete(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:r.FileChangeType.Deleted}),null,o)}}unregister(e){let t=this._watchers.get(e);if(t){for(let e of t){e.dispose()}}}dispose(){this._watchers.forEach(e=>{for(let t of e){t.dispose()}});this._watchers.clear()}}class TextDocumentFeature{constructor(e,t){this._client=e;this._message=t;this._registrations=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method){throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`)}if(!t.registerOptions.documentSelector){return}let i=this.registerLanguageProvider(t.registerOptions);this._registrations.set(t.id,{disposable:i[0],data:t,provider:i[1]})}unregister(e){let t=this._registrations.get(e);if(t!==undefined){t.disposable.dispose()}}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()});this._registrations.clear()}getRegistration(e,t){if(!t){return[undefined,undefined]}else if(r.TextDocumentRegistrationOptions.is(t)){const i=r.StaticRegistrationOptions.hasId(t)?t.id:l.generateUuid();const n=t.documentSelector||e;if(n){return[i,Object.assign({},t,{documentSelector:n})]}}else if(a.boolean(t)&&t===true||r.WorkDoneProgressOptions.is(t)){if(!e){return[undefined,undefined]}let i=a.boolean(t)&&t===true?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[l.generateUuid(),i]}return[undefined,undefined]}getRegistrationOptions(e,t){if(!e||!t){return undefined}return a.boolean(t)&&t===true?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(const t of this._registrations.values()){let i=t.data.registerOptions.documentSelector;if(i!==null&&n.languages.match(i,e)){return t.provider}}throw new Error(`The feature has no registration for the provided text document ${e.uri.toString()}`)}}t.TextDocumentFeature=TextDocumentFeature;class WorkspaceFeature{constructor(e,t){this._client=e;this._message=t;this._registrations=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method){throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`)}const i=this.registerLanguageProvider(t.registerOptions);this._registrations.set(t.id,{disposable:i[0],provider:i[1]})}unregister(e){let t=this._registrations.get(e);if(t!==undefined){t.disposable.dispose()}}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()});this._registrations.clear()}getProviders(){const e=[];for(const t of this._registrations.values()){e.push(t.provider)}return e}}class CompletionItemFeature extends TextDocumentFeature{constructor(e){super(e,r.CompletionRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"completion");t.dynamicRegistration=true;t.contextSupport=true;t.completionItem={snippetSupport:true,commitCharactersSupport:true,documentationFormat:[r.MarkupKind.Markdown,r.MarkupKind.PlainText],deprecatedSupport:true,preselectSupport:true,tagSupport:{valueSet:[r.CompletionItemTag.Deprecated]}};t.completionItemKind={valueSet:y}}initialize(e,t){const i=this.getRegistrationOptions(t,e.completionProvider);if(!i){return}this.register(this.messages,{id:l.generateUuid(),registerOptions:i})}registerLanguageProvider(e){const t=e.triggerCharacters||[];const i={provideCompletionItems:(e,t,i,n)=>{const o=this._client;const s=this._client.clientOptions.middleware;const a=(e,t,i,n)=>{return o.sendRequest(r.CompletionRequest.type,o.code2ProtocolConverter.asCompletionParams(e,t,i),n).then(o.protocol2CodeConverter.asCompletionResult,e=>{o.logFailedRequest(r.CompletionRequest.type,e);return Promise.resolve([])})};return s.provideCompletionItem?s.provideCompletionItem(e,t,n,i,a):a(e,t,n,i)},resolveCompletionItem:e.resolveProvider?(e,t)=>{const i=this._client;const n=this._client.clientOptions.middleware;const o=(e,t)=>{return i.sendRequest(r.CompletionResolveRequest.type,i.code2ProtocolConverter.asCompletionItem(e),t).then(i.protocol2CodeConverter.asCompletionItem,t=>{i.logFailedRequest(r.CompletionResolveRequest.type,t);return Promise.resolve(e)})};return n.resolveCompletionItem?n.resolveCompletionItem(e,t,o):o(e,t)}:undefined};console.log(e.documentSelector);return[n.languages.registerCompletionItemProvider(e.documentSelector,i,...t),i]}}class HoverFeature extends TextDocumentFeature{constructor(e){super(e,r.HoverRequest.type)}fillClientCapabilities(e){const t=ensure(ensure(e,"textDocument"),"hover");t.dynamicRegistration=true;t.contentFormat=[r.MarkupKind.Markdown,r.MarkupKind.PlainText]}initialize(e,t){const i=this.getRegistrationOptions(t,e.hoverProvider);if(!i){return}this.register(this.messages,{id:l.generateUuid(),registerOptions:i})}registerLanguageProvider(e){const t={provideHover:(e,t,i)=>{const n=this._client;const o=(e,t,i)=>{return n.sendRequest(r.HoverRequest.type,n.code2ProtocolConverter.asTextDocumentPositionParams(e,t),i).then(n.protocol2CodeConverter.asHover,e=>{n.logFailedRequest(r.HoverRequest.type,e);return Promise.resolve(null)})};const s=n.clientOptions.middleware;return s.provideHover?s.provideHover(e,t,i,o):o(e,t,i)}};return[n.languages.registerHoverProvider(e.documentSelector,t),t]}}class SignatureHelpFeature extends TextDocumentFeature{constructor(e){super(e,r.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"signatureHelp");t.dynamicRegistration=true;t.signatureInformation={documentationFormat:[r.MarkupKind.Markdown,r.MarkupKind.PlainText]};t.signatureInformation.parameterInformation={labelOffsetSupport:true};t.contextSupport=true}initialize(e,t){const i=this.getRegistrationOptions(t,e.signatureHelpProvider);if(!i){return}this.register(this.messages,{id:l.generateUuid(),registerOptions:i})}registerLanguageProvider(e){const t={provideSignatureHelp:(e,t,i,n)=>{const o=this._client;const s=(e,t,i,n)=>{return o.sendRequest(r.SignatureHelpRequest.type,o.code2ProtocolConverter.asSignatureHelpParams(e,t,i),n).then(o.protocol2CodeConverter.asSignatureHelp,e=>{o.logFailedRequest(r.SignatureHelpRequest.type,e);return Promise.resolve(null)})};const a=o.clientOptions.middleware;return a.provideSignatureHelp?a.provideSignatureHelp(e,t,n,i,s):s(e,t,n,i)}};let i;if(e.retriggerCharacters===undefined){const r=e.triggerCharacters||[];i=n.languages.registerSignatureHelpProvider(e.documentSelector,t,...r)}else{const r={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};i=n.languages.registerSignatureHelpProvider(e.documentSelector,t,r)}return[i,t]}}class DefinitionFeature extends TextDocumentFeature{constructor(e){super(e,r.DefinitionRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"definition");t.dynamicRegistration=true;t.linkSupport=true}initialize(e,t){const i=this.getRegistrationOptions(t,e.definitionProvider);if(!i){return}this.register(this.messages,{id:l.generateUuid(),registerOptions:i})}registerLanguageProvider(e){const t={provideDefinition:(e,t,i)=>{const n=this._client;const o=(e,t,i)=>{return n.sendRequest(r.DefinitionRequest.type,n.code2ProtocolConverter.asTextDocumentPositionParams(e,t),i).then(n.protocol2CodeConverter.asDefinitionResult,e=>{n.logFailedRequest(r.DefinitionRequest.type,e);return Promise.resolve(null)})};const s=n.clientOptions.middleware;return s.provideDefinition?s.provideDefinition(e,t,i,o):o(e,t,i)}};return[n.languages.registerDefinitionProvider(e.documentSelector,t),t]}}class ReferencesFeature extends TextDocumentFeature{constructor(e){super(e,r.ReferencesRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"references").dynamicRegistration=true}initialize(e,t){const i=this.getRegistrationOptions(t,e.referencesProvider);if(!i){return}this.register(this.messages,{id:l.generateUuid(),registerOptions:i})}registerLanguageProvider(e){const t={provideReferences:(e,t,i,n)=>{const o=this._client;const s=(e,t,i,n)=>{return o.sendRequest(r.ReferencesRequest.type,o.code2ProtocolConverter.asReferenceParams(e,t,i),n).then(o.protocol2CodeConverter.asReferences,e=>{o.logFailedRequest(r.ReferencesRequest.type,e);return Promise.resolve([])})};const a=o.clientOptions.middleware;return a.provideReferences?a.provideReferences(e,t,i,n,s):s(e,t,i,n)}};return[n.languages.registerReferenceProvider(e.documentSelector,t),t]}}class DocumentHighlightFeature extends TextDocumentFeature{constructor(e){super(e,r.DocumentHighlightRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"documentHighlight").dynamicRegistration=true}initialize(e,t){const i=this.getRegistrationOptions(t,e.documentHighlightProvider);if(!i){return}this.register(this.messages,{id:l.generateUuid(),registerOptions:i})}registerLanguageProvider(e){const t={provideDocumentHighlights:(e,t,i)=>{const n=this._client;const o=(e,t,i)=>{return n.sendRequest(r.DocumentHighlightRequest.type,n.code2ProtocolConverter.asTextDocumentPositionParams(e,t),i).then(n.protocol2CodeConverter.asDocumentHighlights,e=>{n.logFailedRequest(r.DocumentHighlightRequest.type,e);return Promise.resolve([])})};const s=n.clientOptions.middleware;return s.provideDocumentHighlights?s.provideDocumentHighlights(e,t,i,o):o(e,t,i)}};return[n.languages.registerDocumentHighlightProvider(e.documentSelector,t),t]}}class DocumentSymbolFeature extends TextDocumentFeature{constructor(e){super(e,r.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"documentSymbol");t.dynamicRegistration=true;t.symbolKind={valueSet:g};t.hierarchicalDocumentSymbolSupport=true}initialize(e,t){const i=this.getRegistrationOptions(t,e.documentSymbolProvider);if(!i){return}this.register(this.messages,{id:l.generateUuid(),registerOptions:i})}registerLanguageProvider(e){const t={provideDocumentSymbols:(e,t)=>{const i=this._client;const n=(e,t)=>{return i.sendRequest(r.DocumentSymbolRequest.type,i.code2ProtocolConverter.asDocumentSymbolParams(e),t).then(e=>{if(e===null){return undefined}if(e.length===0){return[]}else{let t=e[0];if(r.DocumentSymbol.is(t)){return i.protocol2CodeConverter.asDocumentSymbols(e)}else{return i.protocol2CodeConverter.asSymbolInformations(e)}}},e=>{i.logFailedRequest(r.DocumentSymbolRequest.type,e);return Promise.resolve([])})};const o=i.clientOptions.middleware;return o.provideDocumentSymbols?o.provideDocumentSymbols(e,t,n):n(e,t)}};return[n.languages.registerDocumentSymbolProvider(e.documentSelector,t),t]}}class WorkspaceSymbolFeature extends WorkspaceFeature{constructor(e){super(e,r.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"workspace"),"symbol");t.dynamicRegistration=true;t.symbolKind={valueSet:g}}initialize(e){if(!e.workspaceSymbolProvider){return}this.register(this.messages,{id:l.generateUuid(),registerOptions:e.workspaceSymbolProvider===true?{workDoneProgress:false}:e.workspaceSymbolProvider})}registerLanguageProvider(e){const t={provideWorkspaceSymbols:(e,t)=>{const i=this._client;const n=(e,t)=>{return i.sendRequest(r.WorkspaceSymbolRequest.type,{query:e},t).then(i.protocol2CodeConverter.asSymbolInformations,e=>{i.logFailedRequest(r.WorkspaceSymbolRequest.type,e);return Promise.resolve([])})};const o=i.clientOptions.middleware;return o.provideWorkspaceSymbols?o.provideWorkspaceSymbols(e,t,n):n(e,t)}};return[n.languages.registerWorkspaceSymbolProvider(t),t]}}class CodeActionFeature extends TextDocumentFeature{constructor(e){super(e,r.CodeActionRequest.type)}fillClientCapabilities(e){const t=ensure(ensure(e,"textDocument"),"codeAction");t.dynamicRegistration=true;t.isPreferredSupport=true;t.codeActionLiteralSupport={codeActionKind:{valueSet:[r.CodeActionKind.Empty,r.CodeActionKind.QuickFix,r.CodeActionKind.Refactor,r.CodeActionKind.RefactorExtract,r.CodeActionKind.RefactorInline,r.CodeActionKind.RefactorRewrite,r.CodeActionKind.Source,r.CodeActionKind.SourceOrganizeImports]}}}initialize(e,t){const i=this.getRegistrationOptions(t,e.codeActionProvider);if(!i){return}this.register(this.messages,{id:l.generateUuid(),registerOptions:i})}registerLanguageProvider(e){const t={provideCodeActions:(e,t,i,n)=>{const o=this._client;const s=(e,t,i,n)=>{const s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),range:o.code2ProtocolConverter.asRange(t),context:o.code2ProtocolConverter.asCodeActionContext(i)};return o.sendRequest(r.CodeActionRequest.type,s,n).then(e=>{if(e===null){return undefined}const t=[];for(let i of e){if(r.Command.is(i)){t.push(o.protocol2CodeConverter.asCommand(i))}else{t.push(o.protocol2CodeConverter.asCodeAction(i))}}return t},e=>{o.logFailedRequest(r.CodeActionRequest.type,e);return Promise.resolve([])})};const a=o.clientOptions.middleware;return a.provideCodeActions?a.provideCodeActions(e,t,i,n,s):s(e,t,i,n)}};return[n.languages.registerCodeActionsProvider(e.documentSelector,t,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:undefined),t]}}class CodeLensFeature extends TextDocumentFeature{constructor(e){super(e,r.CodeLensRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"codeLens").dynamicRegistration=true}initialize(e,t){const i=this.getRegistrationOptions(t,e.codeLensProvider);if(!i){return}this.register(this.messages,{id:l.generateUuid(),registerOptions:i})}registerLanguageProvider(e){const t={provideCodeLenses:(e,t)=>{const i=this._client;const n=(e,t)=>{return i.sendRequest(r.CodeLensRequest.type,i.code2ProtocolConverter.asCodeLensParams(e),t).then(i.protocol2CodeConverter.asCodeLenses,e=>{i.logFailedRequest(r.CodeLensRequest.type,e);return Promise.resolve([])})};const o=i.clientOptions.middleware;return o.provideCodeLenses?o.provideCodeLenses(e,t,n):n(e,t)},resolveCodeLens:e.resolveProvider?(e,t)=>{const i=this._client;const n=(e,t)=>{return i.sendRequest(r.CodeLensResolveRequest.type,i.code2ProtocolConverter.asCodeLens(e),t).then(i.protocol2CodeConverter.asCodeLens,t=>{i.logFailedRequest(r.CodeLensResolveRequest.type,t);return e})};const o=i.clientOptions.middleware;return o.resolveCodeLens?o.resolveCodeLens(e,t,n):n(e,t)}:undefined};return[n.languages.registerCodeLensProvider(e.documentSelector,t),t]}}class DocumentFormattingFeature extends TextDocumentFeature{constructor(e){super(e,r.DocumentFormattingRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"formatting").dynamicRegistration=true}initialize(e,t){const i=this.getRegistrationOptions(t,e.documentFormattingProvider);if(!i){return}this.register(this.messages,{id:l.generateUuid(),registerOptions:i})}registerLanguageProvider(e){const t={provideDocumentFormattingEdits:(e,t,i)=>{const n=this._client;const o=(e,t,i)=>{const o={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e),options:n.code2ProtocolConverter.asFormattingOptions(t)};return n.sendRequest(r.DocumentFormattingRequest.type,o,i).then(n.protocol2CodeConverter.asTextEdits,e=>{n.logFailedRequest(r.DocumentFormattingRequest.type,e);return Promise.resolve([])})};const s=n.clientOptions.middleware;return s.provideDocumentFormattingEdits?s.provideDocumentFormattingEdits(e,t,i,o):o(e,t,i)}};return[n.languages.registerDocumentFormattingEditProvider(e.documentSelector,t),t]}}class DocumentRangeFormattingFeature extends TextDocumentFeature{constructor(e){super(e,r.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"rangeFormatting").dynamicRegistration=true}initialize(e,t){const i=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);if(!i){return}this.register(this.messages,{id:l.generateUuid(),registerOptions:i})}registerLanguageProvider(e){const t={provideDocumentRangeFormattingEdits:(e,t,i,n)=>{const o=this._client;const s=(e,t,i,n)=>{let s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),range:o.code2ProtocolConverter.asRange(t),options:o.code2ProtocolConverter.asFormattingOptions(i)};return o.sendRequest(r.DocumentRangeFormattingRequest.type,s,n).then(o.protocol2CodeConverter.asTextEdits,e=>{o.logFailedRequest(r.DocumentRangeFormattingRequest.type,e);return Promise.resolve([])})};let a=o.clientOptions.middleware;return a.provideDocumentRangeFormattingEdits?a.provideDocumentRangeFormattingEdits(e,t,i,n,s):s(e,t,i,n)}};return[n.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,t),t]}}class DocumentOnTypeFormattingFeature extends TextDocumentFeature{constructor(e){super(e,r.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"onTypeFormatting").dynamicRegistration=true}initialize(e,t){const i=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);if(!i){return}this.register(this.messages,{id:l.generateUuid(),registerOptions:i})}registerLanguageProvider(e){const t={provideOnTypeFormattingEdits:(e,t,i,n,o)=>{const s=this._client;const a=(e,t,i,n,o)=>{let a={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(e),position:s.code2ProtocolConverter.asPosition(t),ch:i,options:s.code2ProtocolConverter.asFormattingOptions(n)};return s.sendRequest(r.DocumentOnTypeFormattingRequest.type,a,o).then(s.protocol2CodeConverter.asTextEdits,e=>{s.logFailedRequest(r.DocumentOnTypeFormattingRequest.type,e);return Promise.resolve([])})};const u=s.clientOptions.middleware;return u.provideOnTypeFormattingEdits?u.provideOnTypeFormattingEdits(e,t,i,n,o,a):a(e,t,i,n,o)}};const i=e.moreTriggerCharacter||[];return[n.languages.registerOnTypeFormattingEditProvider(e.documentSelector,t,e.firstTriggerCharacter,...i),t]}}class RenameFeature extends TextDocumentFeature{constructor(e){super(e,r.RenameRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"rename");t.dynamicRegistration=true;t.prepareSupport=true}initialize(e,t){const i=this.getRegistrationOptions(t,e.renameProvider);if(!i){return}if(a.boolean(e.renameProvider)){i.prepareProvider=false}this.register(this.messages,{id:l.generateUuid(),registerOptions:i})}registerLanguageProvider(e){const t={provideRenameEdits:(e,t,i,n)=>{const o=this._client;const s=(e,t,i,n)=>{let s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),position:o.code2ProtocolConverter.asPosition(t),newName:i};return o.sendRequest(r.RenameRequest.type,s,n).then(o.protocol2CodeConverter.asWorkspaceEdit,e=>{o.logFailedRequest(r.RenameRequest.type,e);return Promise.reject(new Error(e.message))})};const a=o.clientOptions.middleware;return a.provideRenameEdits?a.provideRenameEdits(e,t,i,n,s):s(e,t,i,n)},prepareRename:e.prepareProvider?(e,t,i)=>{const n=this._client;const o=(e,t,i)=>{let o={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e),position:n.code2ProtocolConverter.asPosition(t)};return n.sendRequest(r.PrepareRenameRequest.type,o,i).then(e=>{if(r.Range.is(e)){return n.protocol2CodeConverter.asRange(e)}else if(e&&r.Range.is(e.range)){return{range:n.protocol2CodeConverter.asRange(e.range),placeholder:e.placeholder}}return Promise.reject(new Error(`The element can't be renamed.`))},e=>{n.logFailedRequest(r.PrepareRenameRequest.type,e);return Promise.reject(new Error(e.message))})};const s=n.clientOptions.middleware;return s.prepareRename?s.prepareRename(e,t,i,o):o(e,t,i)}:undefined};return[n.languages.registerRenameProvider(e.documentSelector,t),t]}}class DocumentLinkFeature extends TextDocumentFeature{constructor(e){super(e,r.DocumentLinkRequest.type)}fillClientCapabilities(e){const t=ensure(ensure(e,"textDocument"),"documentLink");t.dynamicRegistration=true;t.tooltipSupport=true}initialize(e,t){const i=this.getRegistrationOptions(t,e.documentLinkProvider);if(!i){return}this.register(this.messages,{id:l.generateUuid(),registerOptions:i})}registerLanguageProvider(e){const t={provideDocumentLinks:(e,t)=>{const i=this._client;const n=(e,t)=>{return i.sendRequest(r.DocumentLinkRequest.type,i.code2ProtocolConverter.asDocumentLinkParams(e),t).then(i.protocol2CodeConverter.asDocumentLinks,e=>{i.logFailedRequest(r.DocumentLinkRequest.type,e);return Promise.resolve([])})};const o=i.clientOptions.middleware;return o.provideDocumentLinks?o.provideDocumentLinks(e,t,n):n(e,t)},resolveDocumentLink:e.resolveProvider?(e,t)=>{const i=this._client;let n=(e,t)=>{return i.sendRequest(r.DocumentLinkResolveRequest.type,i.code2ProtocolConverter.asDocumentLink(e),t).then(i.protocol2CodeConverter.asDocumentLink,t=>{i.logFailedRequest(r.DocumentLinkResolveRequest.type,t);return Promise.resolve(e)})};const o=i.clientOptions.middleware;return o.resolveDocumentLink?o.resolveDocumentLink(e,t,n):n(e,t)}:undefined};return[n.languages.registerDocumentLinkProvider(e.documentSelector,t),t]}}class ConfigurationFeature{constructor(e){this._client=e;this._listeners=new Map}get messages(){return r.DidChangeConfigurationNotification.type}fillClientCapabilities(e){ensure(ensure(e,"workspace"),"didChangeConfiguration").dynamicRegistration=true}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;if(e!==void 0){this.register(this.messages,{id:l.generateUuid(),registerOptions:{section:e}})}}register(e,t){let i=n.workspace.onDidChangeConfiguration(e=>{this.onDidChangeConfiguration(t.registerOptions.section,e)});this._listeners.set(t.id,i);if(t.registerOptions.section!==void 0){this.onDidChangeConfiguration(t.registerOptions.section,undefined)}}unregister(e){let t=this._listeners.get(e);if(t){this._listeners.delete(e);t.dispose()}}dispose(){for(let e of this._listeners.values()){e.dispose()}this._listeners.clear()}onDidChangeConfiguration(e,t){let i;if(a.string(e)){i=[e]}else{i=e}if(i!==void 0&&t!==void 0){let e=i.some(e=>t.affectsConfiguration(e));if(!e){return}}let n=e=>{if(e===void 0){this._client.sendNotification(r.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(r.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(e)})};let o=this.getMiddleware();o?o(i,n):n(i)}extractSettingsInformation(e){function ensurePath(e,t){let i=e;for(let e=0;e<t.length-1;e++){let n=i[t[e]];if(!n){n=Object.create(null);i[t[e]]=n}i=n}return i}let t=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:undefined;let i=Object.create(null);for(let r=0;r<e.length;r++){let o=e[r];let s=o.indexOf(".");let a=null;if(s>=0){a=n.workspace.getConfiguration(o.substr(0,s),t).get(o.substr(s+1))}else{a=n.workspace.getConfiguration(o,t)}if(a){let t=e[r].split(".");ensurePath(i,t)[t[t.length-1]]=a}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration){return e.workspace.didChangeConfiguration}else{return undefined}}}class ExecuteCommandFeature{constructor(e){this._client=e;this._commands=new Map}get messages(){return r.ExecuteCommandRequest.type}fillClientCapabilities(e){ensure(ensure(e,"workspace"),"executeCommand").dynamicRegistration=true}initialize(e){if(!e.executeCommandProvider){return}this.register(this.messages,{id:l.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e,t){const i=this._client;const o=i.clientOptions.middleware;const s=(e,t)=>{let n={command:e,arguments:t};return i.sendRequest(r.ExecuteCommandRequest.type,n).then(undefined,e=>{i.logFailedRequest(r.ExecuteCommandRequest.type,e)})};if(t.registerOptions.commands){const e=[];for(const i of t.registerOptions.commands){e.push(n.commands.registerCommand(i,(...e)=>{return o.executeCommand?o.executeCommand(i,e,s):s(i,e)}))}this._commands.set(t.id,e)}}unregister(e){let t=this._commands.get(e);if(t){t.forEach(e=>e.dispose())}}dispose(){this._commands.forEach(e=>{e.forEach(e=>e.dispose())});this._commands.clear()}}var x;(function(e){function is(e){let t=e;return t&&r.MessageReader.is(e.reader)&&r.MessageWriter.is(e.writer)}e.is=is})(x=t.MessageTransports||(t.MessageTransports={}));class OnReady{constructor(e,t){this._resolve=e;this._reject=t;this._used=false}get isUsed(){return this._used}resolve(){this._used=true;this._resolve()}reject(e){this._used=true;this._reject(e)}}class BaseLanguageClient{constructor(e,t,i){this._traceFormat=r.TraceFormat.Text;this._features=[];this._method2Message=new Map;this._dynamicFeatures=new Map;this._id=e;this._name=t;i=i||{};this._clientOptions={documentSelector:i.documentSelector||[],synchronize:i.synchronize||{},diagnosticCollectionName:i.diagnosticCollectionName,outputChannelName:i.outputChannelName||this._name,revealOutputChannelOn:i.revealOutputChannelOn||d.Error,stdioEncoding:i.stdioEncoding||"utf8",initializationOptions:i.initializationOptions,initializationFailedHandler:i.initializationFailedHandler,progressOnInitialization:!!i.progressOnInitialization,errorHandler:i.errorHandler||new DefaultErrorHandler(this._name),middleware:i.middleware||{},uriConverters:i.uriConverters,workspaceFolder:i.workspaceFolder};this._clientOptions.synchronize=this._clientOptions.synchronize||{};this.state=p.Initial;this._connectionPromise=undefined;this._resolvedConnection=undefined;this._initializeResult=undefined;if(i.outputChannel){this._outputChannel=i.outputChannel;this._disposeOutputChannel=false}else{this._outputChannel=undefined;this._disposeOutputChannel=true}this._traceOutputChannel=i.traceOutputChannel;this._listeners=undefined;this._providers=undefined;this._diagnostics=undefined;this._fileEvents=[];this._fileEventDelayer=new u.Delayer(250);this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new OnReady(e,t)});this._onStop=undefined;this._telemetryEmitter=new r.Emitter;this._stateChangeEmitter=new r.Emitter;this._tracer={log:(e,t)=>{if(a.string(e)){this.logTrace(e,t)}else{this.logObjectTrace(e)}}};this._c2p=o.createConverter(i.uriConverters?i.uriConverters.code2Protocol:undefined);this._p2c=s.createConverter(i.uriConverters?i.uriConverters.protocol2Code:undefined);this._syncedDocuments=new Map;this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let i=this.getPublicState();if(i!==t){this._stateChangeEmitter.fire({oldState:t,newState:i})}}getPublicState(){if(this.state===p.Running){return m.Running}else if(this.state===p.Starting){return m.Starting}else{return m.Stopped}}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive()){throw new Error("Language client is not ready yet")}this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(t){this.error(`Sending request ${a.string(e)?e:e.method} failed.`,t);throw t}}onRequest(e,t){if(!this.isConnectionActive()){throw new Error("Language client is not ready yet")}try{this._resolvedConnection.onRequest(e,t)}catch(t){this.error(`Registering request handler ${a.string(e)?e:e.method} failed.`,t);throw t}}sendNotification(e,t){if(!this.isConnectionActive()){throw new Error("Language client is not ready yet")}this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,t)}catch(t){this.error(`Sending notification ${a.string(e)?e:e.method} failed.`,t);throw t}}onNotification(e,t){if(!this.isConnectionActive()){throw new Error("Language client is not ready yet")}try{this._resolvedConnection.onNotification(e,t)}catch(t){this.error(`Registering notification handler ${a.string(e)?e:e.method} failed.`,t);throw t}}onProgress(e,t,i){if(!this.isConnectionActive()){throw new Error("Language client is not ready yet")}try{return this._resolvedConnection.onProgress(e,t,i)}catch(e){this.error(`Registering progress handler for token ${t} failed.`,e);throw e}}sendProgress(e,t,i){if(!this.isConnectionActive()){throw new Error("Language client is not ready yet")}this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,t,i)}catch(e){this.error(`Sending progress for token ${t} failed.`,e);throw e}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){if(!this._outputChannel){this._outputChannel=n.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)}return this._outputChannel}get traceOutputChannel(){if(this._traceOutputChannel){return this._traceOutputChannel}return this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new DefaultErrorHandler(this._name)}set trace(e){this._trace=e;this.onReady().then(()=>{this.resolveConnection().then(e=>{e.trace(this._trace,this._tracer,{sendNotification:false,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof r.ResponseError){const t=e;return`  Message: ${t.message}\n  Code: ${t.code} ${t.data?"\n"+t.data.toString():""}`}if(e instanceof Error){if(a.string(e.stack)){return e.stack}return e.message}if(a.string(e)){return e}return e.toString()}info(e,t){this.outputChannel.appendLine(`[Info  - ${(new Date).toLocaleTimeString()}] ${e}`);if(t){this.outputChannel.appendLine(this.data2String(t))}if(this._clientOptions.revealOutputChannelOn<=d.Info){this.showNotificationMessage()}}warn(e,t){this.outputChannel.appendLine(`[Warn  - ${(new Date).toLocaleTimeString()}] ${e}`);if(t){this.outputChannel.appendLine(this.data2String(t))}if(this._clientOptions.revealOutputChannelOn<=d.Warn){this.showNotificationMessage()}}error(e,t){this.outputChannel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${e}`);if(t){this.outputChannel.appendLine(this.data2String(t))}if(this._clientOptions.revealOutputChannelOn<=d.Error){this.showNotificationMessage()}}showNotificationMessage(){n.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(true)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${e}`);if(t){this.traceOutputChannel.appendLine(this.data2String(t))}}logObjectTrace(e){if(e.isLSPMessage&&e.type){this.traceOutputChannel.append(`[LSP   - ${(new Date).toLocaleTimeString()}] `)}else{this.traceOutputChannel.append(`[Trace - ${(new Date).toLocaleTimeString()}] `)}if(e){this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}}needsStart(){return this.state===p.Initial||this.state===p.Stopping||this.state===p.Stopped}needsStop(){return this.state===p.Starting||this.state===p.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===p.Running&&!!this._resolvedConnection}start(){if(this._onReadyCallbacks.isUsed){this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new OnReady(e,t)})}this._listeners=[];this._providers=[];if(!this._diagnostics){this._diagnostics=this._clientOptions.diagnosticCollectionName?n.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):n.languages.createDiagnosticCollection()}this.state=p.Starting;this.resolveConnection().then(e=>{e.onLogMessage(e=>{switch(e.type){case r.MessageType.Error:this.error(e.message);break;case r.MessageType.Warning:this.warn(e.message);break;case r.MessageType.Info:this.info(e.message);break;default:this.outputChannel.appendLine(e.message)}});e.onShowMessage(e=>{switch(e.type){case r.MessageType.Error:n.window.showErrorMessage(e.message);break;case r.MessageType.Warning:n.window.showWarningMessage(e.message);break;case r.MessageType.Info:n.window.showInformationMessage(e.message);break;default:n.window.showInformationMessage(e.message)}});e.onRequest(r.ShowMessageRequest.type,e=>{let t;switch(e.type){case r.MessageType.Error:t=n.window.showErrorMessage;break;case r.MessageType.Warning:t=n.window.showWarningMessage;break;case r.MessageType.Info:t=n.window.showInformationMessage;break;default:t=n.window.showInformationMessage}let i=e.actions||[];return t(e.message,...i)});e.onTelemetry(e=>{this._telemetryEmitter.fire(e)});e.listen();return this.initialize(e)}).then(undefined,e=>{this.state=p.StartFailed;this._onReadyCallbacks.reject(e);this.error("Starting client failed",e);n.window.showErrorMessage(`Couldn't start client ${this._name}`)});return new n.Disposable(()=>{if(this.needsStop()){this.stop()}})}resolveConnection(){if(!this._connectionPromise){this._connectionPromise=this.createConnection()}return this._connectionPromise}initialize(e){this.refreshTrace(e,false);let t=this._clientOptions.initializationOptions;let i=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath();let o={processId:process.pid,clientInfo:{name:"vscode",version:n.version},rootPath:i?i:null,rootUri:i?this._c2p.asUri(n.Uri.file(i)):null,capabilities:this.computeClientCapabilities(),initializationOptions:a.func(t)?t():t,trace:r.Trace.toString(this._trace),workspaceFolders:null};this.fillInitializeParams(o);if(this._clientOptions.progressOnInitialization){const t=l.generateUuid();const i=new h.ProgressPart(e,t);o.workDoneToken=t;return this.doInitialize(e,o).then(e=>{i.done();return e},e=>{i.cancel();throw e})}else{return this.doInitialize(e,o)}}doInitialize(e,t){return e.initialize(t).then(t=>{this._resolvedConnection=e;this._initializeResult=t;this.state=p.Running;let i=undefined;if(a.number(t.capabilities.textDocumentSync)){if(t.capabilities.textDocumentSync===r.TextDocumentSyncKind.None){i={openClose:false,change:r.TextDocumentSyncKind.None,save:undefined}}else{i={openClose:true,change:t.capabilities.textDocumentSync,save:{includeText:false}}}}else if(t.capabilities.textDocumentSync!==void 0&&t.capabilities.textDocumentSync!==null){i=t.capabilities.textDocumentSync}this._capabilities=Object.assign({},t.capabilities,{resolvedTextDocumentSync:i});e.onDiagnostics(e=>this.handleDiagnostics(e));e.onRequest(r.RegistrationRequest.type,e=>this.handleRegistrationRequest(e));e.onRequest("client/registerFeature",e=>this.handleRegistrationRequest(e));e.onRequest(r.UnregistrationRequest.type,e=>this.handleUnregistrationRequest(e));e.onRequest("client/unregisterFeature",e=>this.handleUnregistrationRequest(e));e.onRequest(r.ApplyWorkspaceEditRequest.type,e=>this.handleApplyWorkspaceEdit(e));e.sendNotification(r.InitializedNotification.type,{});this.hookFileEvents(e);this.hookConfigurationChanged(e);this.initializeFeatures(e);this._onReadyCallbacks.resolve();return t}).then(undefined,t=>{if(this._clientOptions.initializationFailedHandler){if(this._clientOptions.initializationFailedHandler(t)){this.initialize(e)}else{this.stop();this._onReadyCallbacks.reject(t)}}else if(t instanceof r.ResponseError&&t.data&&t.data.retry){n.window.showErrorMessage(t.message,{title:"Retry",id:"retry"}).then(i=>{if(i&&i.id==="retry"){this.initialize(e)}else{this.stop();this._onReadyCallbacks.reject(t)}})}else{if(t&&t.message){n.window.showErrorMessage(t.message)}this.error("Server initialization failed.",t);this.stop();this._onReadyCallbacks.reject(t)}throw t})}_clientGetRootPath(){let e=n.workspace.workspaceFolders;if(!e||e.length===0){return undefined}let t=e[0];if(t.uri.scheme==="file"){return t.uri.fsPath}return undefined}stop(){this._initializeResult=undefined;if(!this._connectionPromise){this.state=p.Stopped;return Promise.resolve()}if(this.state===p.Stopping&&this._onStop){return this._onStop}this.state=p.Stopping;this.cleanUp(false);return this._onStop=this.resolveConnection().then(e=>{return e.shutdown().then(()=>{e.exit();e.dispose();this.state=p.Stopped;this.cleanUpChannel();this._onStop=undefined;this._connectionPromise=undefined;this._resolvedConnection=undefined})})}cleanUp(e=true,t=true){if(this._listeners){this._listeners.forEach(e=>e.dispose());this._listeners=undefined}if(this._providers){this._providers.forEach(e=>e.dispose());this._providers=undefined}if(this._syncedDocuments){this._syncedDocuments.clear()}for(let e of this._dynamicFeatures.values()){e.dispose()}if(e){this.cleanUpChannel()}if(t&&this._diagnostics){this._diagnostics.dispose();this._diagnostics=undefined}}cleanUpChannel(){if(this._outputChannel&&this._disposeOutputChannel){this._outputChannel.dispose();this._outputChannel=undefined}}notifyFileEvent(e){var t;const i=this;function didChangeWatchedFile(e){i._fileEvents.push(e);i._fileEventDelayer.trigger(()=>{i.onReady().then(()=>{i.resolveConnection().then(e=>{if(i.isConnectionActive()){i.forceDocumentSync();e.didChangeWatchedFiles({changes:i._fileEvents})}i._fileEvents=[]})},e=>{i.error(`Notify file events failed.`,e)})})}const n=(t=this.clientOptions.middleware)===null||t===void 0?void 0:t.workspace;(n===null||n===void 0?void 0:n.didChangeWatchedFile)?n.didChangeWatchedFile(e,didChangeWatchedFile):didChangeWatchedFile(e)}forceDocumentSync(){this._dynamicFeatures.get(r.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(e){if(!this._diagnostics){return}let t=this._p2c.asUri(e.uri);let i=this._p2c.asDiagnostics(e.diagnostics);let n=this.clientOptions.middleware;if(n.handleDiagnostics){n.handleDiagnostics(t,i,(e,t)=>this.setDiagnostics(e,t))}else{this.setDiagnostics(t,i)}}setDiagnostics(e,t){if(!this._diagnostics){return}this._diagnostics.set(e,t)}createConnection(){let e=(e,t,i)=>{this.handleConnectionError(e,t,i)};let t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(i=>{return createConnection(i.reader,i.writer,e,t)})}handleConnectionClosed(){if(this.state===p.Stopping||this.state===p.Stopped){return}try{if(this._resolvedConnection){this._resolvedConnection.dispose()}}catch(e){}let e=f.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch(e){}this._connectionPromise=undefined;this._resolvedConnection=undefined;if(e===f.DoNotRestart){this.error("Connection to server got closed. Server will not be restarted.");this.state=p.Stopped;this.cleanUp(false,true)}else if(e===f.Restart){this.info("Connection to server got closed. Server will restart.");this.cleanUp(false,false);this.state=p.Initial;this.start()}}handleConnectionError(e,t,i){let n=this._clientOptions.errorHandler.error(e,t,i);if(n===c.Shutdown){this.error("Connection to server is erroring. Shutting down server.");this.stop()}}hookConfigurationChanged(e){n.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,true)})}refreshTrace(e,t=false){let i=n.workspace.getConfiguration(this._id);let o=r.Trace.Off;let s=r.TraceFormat.Text;if(i){const e=i.get("trace.server","off");if(typeof e==="string"){o=r.Trace.fromString(e)}else{o=r.Trace.fromString(i.get("trace.server.verbosity","off"));s=r.TraceFormat.fromString(i.get("trace.server.format","text"))}}this._trace=o;this._traceFormat=s;e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t){return}let i;if(a.array(t)){i=t}else{i=[t]}if(!i){return}this._dynamicFeatures.get(r.DidChangeWatchedFilesNotification.type.method).registerRaw(l.generateUuid(),i)}registerFeatures(e){for(let t of e){this.registerFeature(t)}}registerFeature(e){this._features.push(e);if(C.is(e)){let t=e.messages;if(Array.isArray(t)){for(let i of t){this._method2Message.set(i.method,i);this._dynamicFeatures.set(i.method,e)}}else{this._method2Message.set(t.method,t);this._dynamicFeatures.set(t.method,e)}}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new ConfigurationFeature(this));this.registerFeature(new DidOpenTextDocumentFeature(this,this._syncedDocuments));this.registerFeature(new DidChangeTextDocumentFeature(this));this.registerFeature(new WillSaveFeature(this));this.registerFeature(new WillSaveWaitUntilFeature(this));this.registerFeature(new DidSaveTextDocumentFeature(this));this.registerFeature(new DidCloseTextDocumentFeature(this,this._syncedDocuments));this.registerFeature(new FileSystemWatcherFeature(this,e=>this.notifyFileEvent(e)));this.registerFeature(new CompletionItemFeature(this));this.registerFeature(new HoverFeature(this));this.registerFeature(new SignatureHelpFeature(this));this.registerFeature(new DefinitionFeature(this));this.registerFeature(new ReferencesFeature(this));this.registerFeature(new DocumentHighlightFeature(this));this.registerFeature(new DocumentSymbolFeature(this));this.registerFeature(new WorkspaceSymbolFeature(this));this.registerFeature(new CodeActionFeature(this));this.registerFeature(new CodeLensFeature(this));this.registerFeature(new DocumentFormattingFeature(this));this.registerFeature(new DocumentRangeFormattingFeature(this));this.registerFeature(new DocumentOnTypeFormattingFeature(this));this.registerFeature(new RenameFeature(this));this.registerFeature(new DocumentLinkFeature(this));this.registerFeature(new ExecuteCommandFeature(this))}fillInitializeParams(e){for(let t of this._features){if(a.func(t.fillInitializeParams)){t.fillInitializeParams(e)}}}computeClientCapabilities(){let e={};ensure(e,"workspace").applyEdit=true;let t=ensure(ensure(e,"workspace"),"workspaceEdit");t.documentChanges=true;t.resourceOperations=[r.ResourceOperationKind.Create,r.ResourceOperationKind.Rename,r.ResourceOperationKind.Delete];t.failureHandling=r.FailureHandlingKind.TextOnlyTransactional;let i=ensure(ensure(e,"textDocument"),"publishDiagnostics");i.relatedInformation=true;i.versionSupport=false;i.tagSupport={valueSet:[r.DiagnosticTag.Unnecessary,r.DiagnosticTag.Deprecated]};for(let t of this._features){t.fillClientCapabilities(e)}return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let e of this._features){e.initialize(this._capabilities,t)}}handleRegistrationRequest(e){return new Promise((t,i)=>{for(let t of e.registrations){const e=this._dynamicFeatures.get(t.method);if(!e){i(new Error(`No feature implementation for ${t.method} found. Registration failed.`));return}const n=t.registerOptions||{};n.documentSelector=n.documentSelector||this._clientOptions.documentSelector;const r={id:t.id,registerOptions:n};e.register(this._method2Message.get(t.method),r)}t()})}handleUnregistrationRequest(e){return new Promise((t,i)=>{for(let t of e.unregisterations){const e=this._dynamicFeatures.get(t.method);if(!e){i(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));return}e.unregister(t.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit;let i=new Map;n.workspace.textDocuments.forEach(e=>i.set(e.uri.toString(),e));let o=false;if(t.documentChanges){for(const e of t.documentChanges){if(r.TextDocumentEdit.is(e)&&e.textDocument.version&&e.textDocument.version>=0){let t=i.get(e.textDocument.uri);if(t&&t.version!==e.textDocument.version){o=true;break}}}}if(o){return Promise.resolve({applied:false})}return a.asPromise(n.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(e=>{return{applied:e}}))}logFailedRequest(e,t){if(t instanceof r.ResponseError&&(t.code===r.ErrorCodes.RequestCancelled||t.code===r.ErrorCodes.ContentModified)){return}this.error(`Request ${e.method} failed.`,t)}}t.BaseLanguageClient=BaseLanguageClient},389:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(480);const r=i(369);const o=i(719);function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}var s;(function(e){function asSemanticTokens(e){if(e===undefined||e===null){return undefined}return new n.SemanticTokens(new Uint32Array(e.data),e.resultId)}e.asSemanticTokens=asSemanticTokens;function asSemanticTokensEdit(e){return new n.SemanticTokensEdit(e.start,e.deleteCount,e.data!==undefined?new Uint32Array(e.data):undefined)}e.asSemanticTokensEdit=asSemanticTokensEdit;function asSemanticTokensEdits(e){if(e===undefined||e===null){return undefined}return new n.SemanticTokensEdits(e.edits.map(asSemanticTokensEdit),e.resultId)}e.asSemanticTokensEdits=asSemanticTokensEdits;function asLegend(e){return e}e.asLegend=asLegend})(s||(s={}));class SemanticTokensFeature extends r.TextDocumentFeature{constructor(e){super(e,o.Proposed.SemanticTokensRequest.type)}fillClientCapabilities(e){const t=e;let i=ensure(ensure(t,"textDocument"),"semanticTokens");i.dynamicRegistration=true;i.tokenTypes=[o.Proposed.SemanticTokenTypes.comment,o.Proposed.SemanticTokenTypes.keyword,o.Proposed.SemanticTokenTypes.number,o.Proposed.SemanticTokenTypes.regexp,o.Proposed.SemanticTokenTypes.operator,o.Proposed.SemanticTokenTypes.namespace,o.Proposed.SemanticTokenTypes.type,o.Proposed.SemanticTokenTypes.struct,o.Proposed.SemanticTokenTypes.class,o.Proposed.SemanticTokenTypes.interface,o.Proposed.SemanticTokenTypes.enum,o.Proposed.SemanticTokenTypes.typeParameter,o.Proposed.SemanticTokenTypes.function,o.Proposed.SemanticTokenTypes.member,o.Proposed.SemanticTokenTypes.macro,o.Proposed.SemanticTokenTypes.variable,o.Proposed.SemanticTokenTypes.parameter,o.Proposed.SemanticTokenTypes.property,o.Proposed.SemanticTokenTypes.label];i.tokenModifiers=[o.Proposed.SemanticTokenModifiers.declaration,o.Proposed.SemanticTokenModifiers.documentation,o.Proposed.SemanticTokenModifiers.static,o.Proposed.SemanticTokenModifiers.abstract,o.Proposed.SemanticTokenModifiers.deprecated,o.Proposed.SemanticTokenModifiers.async,o.Proposed.SemanticTokenModifiers.readonly]}initialize(e,t){const i=e;let[n,r]=this.getRegistration(t,i.semanticTokensProvider);if(!n||!r){return}this.register(this.messages,{id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentProvider!==undefined&&typeof e.documentProvider!=="boolean"&&e.documentProvider.edits===true;const i={provideDocumentSemanticTokens:(e,t)=>{const i=this._client;const n=i.clientOptions.middleware;const r=(e,t)=>{const n={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e)};return i.sendRequest(o.Proposed.SemanticTokensRequest.type,n,t).then(e=>{return s.asSemanticTokens(e)},e=>{i.logFailedRequest(o.Proposed.SemanticTokensRequest.type,e);return undefined})};return n.provideDocumentSemanticTokens?n.provideDocumentSemanticTokens(e,t,r):r(e,t)},provideDocumentSemanticTokensEdits:t?(e,t,i)=>{const n=this._client;const r=n.clientOptions.middleware;const a=(e,t,i)=>{const r={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e),previousResultId:t};return n.sendRequest(o.Proposed.SemanticTokensEditsRequest.type,r,i).then(e=>{if(o.Proposed.SemanticTokens.is(e)){return s.asSemanticTokens(e)}else{return s.asSemanticTokensEdits(e)}},e=>{n.logFailedRequest(o.Proposed.SemanticTokensEditsRequest.type,e);return undefined})};return r.provideDocumentSemanticTokensEdits?r.provideDocumentSemanticTokensEdits(e,t,i,a):a(e,t,i)}:undefined};const r=e.rangeProvider===true;const a=r?{provideDocumentRangeSemanticTokens:(e,t,i)=>{const n=this._client;const r=n.clientOptions.middleware;const a=(e,t,i)=>{const r={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e),range:n.code2ProtocolConverter.asRange(t)};return n.sendRequest(o.Proposed.SemanticTokensRangeRequest.type,r,i).then(e=>{return s.asSemanticTokens(e)},e=>{n.logFailedRequest(o.Proposed.SemanticTokensRangeRequest.type,e);return undefined})};return r.provideDocumentRangeSemanticTokens?r.provideDocumentRangeSemanticTokens(e,t,i,a):a(e,t,i)}}:undefined;const u=[];const l=s.asLegend(e.legend);u.push(n.languages.registerDocumentSemanticTokensProvider(e.documentSelector,i,l));if(a!==undefined){u.push(n.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,a,l))}return[new n.Disposable(()=>u.forEach(e=>e.dispose())),{document:i,range:a}]}}t.SemanticTokensFeature=SemanticTokensFeature},397:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(480);const r=i(719);class ConfigurationFeature{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{};e.workspace.configuration=true}initialize(){let e=this._client;e.onRequest(r.ConfigurationRequest.type,(t,i)=>{let n=e=>{let t=[];for(let i of e.items){let e=i.scopeUri!==void 0&&i.scopeUri!==null?this._client.protocol2CodeConverter.asUri(i.scopeUri):undefined;t.push(this.getConfiguration(e,i.section!==null?i.section:undefined))}return t};let r=e.clientOptions.middleware.workspace;return r&&r.configuration?r.configuration(t,i,n):n(t,i)})}getConfiguration(e,t){let i=null;if(t){let r=t.lastIndexOf(".");if(r===-1){i=n.workspace.getConfiguration(undefined,e).get(t)}else{let o=n.workspace.getConfiguration(t.substr(0,r),e);if(o){i=o.get(t.substr(r+1))}}}else{let t=n.workspace.getConfiguration(undefined,e);i={};for(let e of Object.keys(t)){if(t.has(e)){i[e]=t.get(e)}}}if(!i){return null}return i}}t.ConfigurationFeature=ConfigurationFeature},405:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(480);const r=i(719);const o=i(369);function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}class TypeDefinitionFeature extends o.TextDocumentFeature{constructor(e){super(e,r.TypeDefinitionRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"typeDefinition").dynamicRegistration=true;let t=ensure(ensure(e,"textDocument"),"typeDefinition");t.dynamicRegistration=true;t.linkSupport=true}initialize(e,t){let[i,n]=this.getRegistration(t,e.typeDefinitionProvider);if(!i||!n){return}this.register(this.messages,{id:i,registerOptions:n})}registerLanguageProvider(e){const t={provideTypeDefinition:(e,t,i)=>{const n=this._client;const o=(e,t,i)=>{return n.sendRequest(r.TypeDefinitionRequest.type,n.code2ProtocolConverter.asTextDocumentPositionParams(e,t),i).then(n.protocol2CodeConverter.asDefinitionResult,e=>{n.logFailedRequest(r.TypeDefinitionRequest.type,e);return Promise.resolve(null)})};const s=n.clientOptions.middleware;return s.provideTypeDefinition?s.provideTypeDefinition(e,t,i,o):o(e,t,i)}};return[n.languages.registerTypeDefinitionProvider(e.documentSelector,t),t]}}t.TypeDefinitionFeature=TypeDefinitionFeature},414:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(882);var r;(function(e){e.type=new n.ProtocolRequestType("workspace/configuration")})(r=t.ConfigurationRequest||(t.ConfigurationRequest={}))},417:function(e){e.exports=require("crypto")},422:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(3);const r=i(480);const o=i(719);function access(e,t){if(e===void 0){return undefined}return e[t]}function arrayDiff(e,t){return e.filter(e=>t.indexOf(e)<0)}t.arrayDiff=arrayDiff;class WorkspaceFoldersFeature{constructor(e){this._client=e;this._listeners=new Map}get messages(){return o.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=r.workspace.workspaceFolders;this.initializeWithFolders(t);if(t===void 0){e.workspaceFolders=null}else{e.workspaceFolders=t.map(e=>this.asProtocol(e))}}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{};e.workspace.workspaceFolders=true}initialize(e){let t=this._client;t.onRequest(o.WorkspaceFoldersRequest.type,e=>{let i=()=>{let e=r.workspace.workspaceFolders;if(e===void 0){return null}let t=e.map(e=>{return this.asProtocol(e)});return t};let n=t.clientOptions.middleware.workspace;return n&&n.workspaceFolders?n.workspaceFolders(e,i):i(e)});let i=access(access(access(e,"workspace"),"workspaceFolders"),"changeNotifications");let s;if(typeof i==="string"){s=i}else if(i===true){s=n.generateUuid()}if(s){this.register(this.messages,{id:s,registerOptions:undefined})}}sendInitialEvent(e){if(this._initialFolders&&e){const t=arrayDiff(this._initialFolders,e);const i=arrayDiff(e,this._initialFolders);if(i.length>0||t.length>0){this.doSendEvent(i,t)}}else if(this._initialFolders){this.doSendEvent([],this._initialFolders)}else if(e){this.doSendEvent(e,[])}}doSendEvent(e,t){let i={event:{added:e.map(e=>this.asProtocol(e)),removed:t.map(e=>this.asProtocol(e))}};this._client.sendNotification(o.DidChangeWorkspaceFoldersNotification.type,i)}register(e,t){let i=t.id;let n=this._client;let o=r.workspace.onDidChangeWorkspaceFolders(e=>{let t=e=>{this.doSendEvent(e.added,e.removed)};let i=n.clientOptions.middleware.workspace;i&&i.didChangeWorkspaceFolders?i.didChangeWorkspaceFolders(e,t):t(e)});this._listeners.set(i,o);this.sendInitialEvent(r.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);if(t===void 0){return}this._listeners.delete(e);t.dispose()}dispose(){for(let e of this._listeners.values()){e.dispose()}this._listeners.clear()}asProtocol(e){if(e===void 0){return null}return{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}}t.WorkspaceFoldersFeature=WorkspaceFoldersFeature},433:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(882);var r;(function(e){e["comment"]="comment";e["keyword"]="keyword";e["string"]="string";e["number"]="number";e["regexp"]="regexp";e["operator"]="operator";e["namespace"]="namespace";e["type"]="type";e["struct"]="struct";e["class"]="class";e["interface"]="interface";e["enum"]="enum";e["typeParameter"]="typeParameter";e["function"]="function";e["member"]="member";e["property"]="property";e["macro"]="macro";e["variable"]="variable";e["parameter"]="parameter";e["label"]="label"})(r=t.SemanticTokenTypes||(t.SemanticTokenTypes={}));var o;(function(e){e["documentation"]="documentation";e["declaration"]="declaration";e["definition"]="definition";e["reference"]="reference";e["static"]="static";e["abstract"]="abstract";e["deprecated"]="deprecated";e["async"]="async";e["volatile"]="volatile";e["readonly"]="readonly"})(o=t.SemanticTokenModifiers||(t.SemanticTokenModifiers={}));var s;(function(e){function is(e){const t=e;return t!==undefined&&(t.resultId===undefined||typeof t.resultId==="string")&&Array.isArray(t.data)&&(t.data.length===0||typeof t.data[0]==="number")}e.is=is})(s=t.SemanticTokens||(t.SemanticTokens={}));var a;(function(e){e.method="textDocument/semanticTokens";e.type=new n.ProtocolRequestType(e.method)})(a=t.SemanticTokensRequest||(t.SemanticTokensRequest={}));var u;(function(e){e.method="textDocument/semanticTokens/edits";e.type=new n.ProtocolRequestType(e.method)})(u=t.SemanticTokensEditsRequest||(t.SemanticTokensEditsRequest={}));var l;(function(e){e.method="textDocument/semanticTokens/range";e.type=new n.ProtocolRequestType(e.method)})(l=t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={}))},448:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(480);class ProtocolCompletionItem extends n.CompletionItem{constructor(e){super(e)}}t.default=ProtocolCompletionItem},454:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});function boolean(e){return e===true||e===false}t.boolean=boolean;function string(e){return typeof e==="string"||e instanceof String}t.string=string;function number(e){return typeof e==="number"||e instanceof Number}t.number=number;function error(e){return e instanceof Error}t.error=error;function func(e){return typeof e==="function"}t.func=func;function array(e){return Array.isArray(e)}t.array=array;function stringArray(e){return array(e)&&e.every(e=>string(e))}t.stringArray=stringArray;function typedArray(e,t){return Array.isArray(e)&&e.every(t)}t.typedArray=typedArray;function objectLiteral(e){return e!==null&&typeof e==="object"}t.objectLiteral=objectLiteral},480:function(module){module.exports=eval("require")("vscode")},530:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(631);const r=i(18);const o=i(142);function createClientSocketTransport(e,t="utf-8"){let i;let s=new Promise((e,t)=>{i=e});return new Promise((a,u)=>{let l=n.createServer(e=>{l.close();i([new r.SocketMessageReader(e,t),new o.SocketMessageWriter(e,t)])});l.on("error",u);l.listen(e,"127.0.0.1",()=>{l.removeListener("error",u);a({onConnected:()=>{return s}})})})}t.createClientSocketTransport=createClientSocketTransport;function createServerSocketTransport(e,t="utf-8"){const i=n.createConnection(e,"127.0.0.1");return[new r.SocketMessageReader(i,t),new o.SocketMessageWriter(i,t)]}t.createServerSocketTransport=createServerSocketTransport},545:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(480);class ProtocolCodeLens extends n.CodeLens{constructor(e){super(e)}}t.default=ProtocolCodeLens},581:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(480);const r=i(719);const o=i(730);class ProgressPart{constructor(e,t){this._client=e;this._token=t;this._reported=0;this._disposable=this._client.onProgress(r.WorkDoneProgress.type,this._token,e=>{switch(e.kind){case"begin":this.begin(e);break;case"report":this.report(e);break;case"end":this.done();break}})}begin(e){let t=e.cancellable?n.ProgressLocation.Notification:n.ProgressLocation.Window;n.window.withProgress({location:t,cancellable:e.cancellable,title:e.title},async(t,i)=>{this._progress=t;this._infinite=e.percentage===undefined;this._cancellationToken=i;this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(r.WorkDoneProgressCancelNotification.type,{token:this._token})});this.report(e);return new Promise((e,t)=>{this._resolve=e;this._reject=t})})}report(e){if(this._infinite&&o.string(e.message)){this._progress.report({message:e.message})}else if(o.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100));let i=Math.max(0,t-this._reported);this._progress.report({message:e.message,increment:i});this._reported+=i}}cancel(){if(this._disposable){this._disposable.dispose();this._disposable=undefined}if(this._reject){this._reject();this._resolve=undefined;this._reject=undefined}}done(){if(this._disposable){this._disposable.dispose();this._disposable=undefined}if(this._resolve){this._resolve();this._resolve=undefined;this._reject=undefined}}}t.ProgressPart=ProgressPart},608:function(e,t,i){(function(e,t){"use strict";var n=function(){return js_Boot.__string_rec(this,"")},r=r||{},o;class EReg{constructor(e,t){this.r=new RegExp(e,t.split("u").join(""))}match(e){if(this.r.global){this.r.lastIndex=0}this.r.m=this.r.exec(e);this.r.s=e;return this.r.m!=null}split(e){return e.replace(this.r,"#__delim__#").split("#__delim__#")}}EReg.__name__=true;class HxOverrides{static cca(e,t){let i=e.charCodeAt(t);if(i!=i){return undefined}return i}static substr(e,t,i){if(i==null){i=e.length}else if(i<0){if(t==0){i=e.length+i}else{return""}}return e.substr(t,i)}static remove(e,t){let i=e.indexOf(t);if(i==-1){return false}e.splice(i,1);return true}static now(){return Date.now()}}HxOverrides.__name__=true;class Lambda{static exists(e,t){let i=$getIterator(e);while(i.hasNext())if(t(i.next())){return true}return false}static iter(e,t){let i=$getIterator(e);while(i.hasNext())t(i.next())}static find(e,t){let i=$getIterator(e);while(i.hasNext()){let e=i.next();if(t(e)){return e}}return null}}Lambda.__name__=true;Math.__name__=true;class Reflect{static field(e,t){try{return e[t]}catch(e){return null}}static fields(e){let t=[];if(e!=null){let n=Object.prototype.hasOwnProperty;for(var i in e){if(i!="__id__"&&i!="hx__closures__"&&n.call(e,i)){t.push(i)}}}return t}static compare(e,t){if(e==t){return 0}else if(e>t){return 1}else{return-1}}static copy(e){if(e==null){return null}let t={};let i=0;let n=Reflect.fields(e);while(i<n.length){let r=n[i];++i;t[r]=Reflect.field(e,r)}return t}}Reflect.__name__=true;class Std{static string(e){return js_Boot.__string_rec(e,"")}}Std.__name__=true;class StringTools{static isSpace(e,t){let i=HxOverrides.cca(e,t);if(!(i>8&&i<14)){return i==32}else{return true}}static ltrim(e){let t=e.length;let i=0;while(i<t&&StringTools.isSpace(e,i))++i;if(i>0){return HxOverrides.substr(e,i,t-i)}else{return e}}static rtrim(e){let t=e.length;let i=0;while(i<t&&StringTools.isSpace(e,t-i-1))++i;if(i>0){return HxOverrides.substr(e,0,t-i)}else{return e}}static trim(e){return StringTools.ltrim(StringTools.rtrim(e))}static replace(e,t,i){return e.split(t).join(i)}}StringTools.__name__=true;class Sys{static systemName(){let e=process.platform;switch(e){case"darwin":return"Mac";case"freebsd":return"BSD";case"linux":return"Linux";case"win32":return"Windows";default:return e}}}Sys.__name__=true;var s=i(480);class haxe_Exception extends Error{constructor(e,t,i){super(e);this.message=e;this.__previousException=t;this.__nativeException=i!=null?i:this}unwrap(){return this.__nativeException}get_native(){return this.__nativeException}static caught(e){if(e instanceof haxe_Exception){return e}else if(e instanceof Error){return new haxe_Exception(e.message,null,e)}else{return new haxe_ValueException(e,null,e)}}static thrown(e){if(e instanceof haxe_Exception){return e.get_native()}else if(e instanceof Error){return e}else{let t=new haxe_ValueException(e);return t}}}haxe_Exception.__name__=true;class haxe_Timer{constructor(e){let t=this;this.id=setInterval(function(){t.run()},e)}stop(){if(this.id==null){return}clearInterval(this.id);this.id=null}run(){}static delay(e,t){let i=new haxe_Timer(t);i.run=function(){i.stop();e()};return i}}haxe_Timer.__name__=true;class haxe_ValueException extends haxe_Exception{constructor(e,t,i){super(String(e),t,i);this.value=e}unwrap(){return this.value}}haxe_ValueException.__name__=true;var a=r["haxe.display.NoData"]={__ename__:true,__constructs__:null};a.__constructs__=[];class haxe_ds_ArraySort{static sort(e,t){haxe_ds_ArraySort.rec(e,t,0,e.length)}static rec(e,t,i,n){let r=i+n>>1;if(n-i<12){if(n<=i){return}let r=i+1;while(r<n){let n=r++;while(n>i){if(t(e[n],e[n-1])<0){haxe_ds_ArraySort.swap(e,n-1,n)}else{break}--n}}return}haxe_ds_ArraySort.rec(e,t,i,r);haxe_ds_ArraySort.rec(e,t,r,n);haxe_ds_ArraySort.doMerge(e,t,i,r,n,r-i,n-r)}static doMerge(e,t,i,n,r,o,s){while(true){let a;let u;let l;let h;if(o==0||s==0){return}if(o+s==2){if(t(e[n],e[i])<0){haxe_ds_ArraySort.swap(e,n,i)}return}if(o>s){l=o>>1;a=i+l;u=haxe_ds_ArraySort.lower(e,t,n,r,a);h=u-n}else{h=s>>1;u=n+h;a=haxe_ds_ArraySort.upper(e,t,i,n,u);l=a-i}haxe_ds_ArraySort.rotate(e,t,a,n,u);let c=a+h;haxe_ds_ArraySort.doMerge(e,t,i,a,c,l,h);i=c;n=u;o-=l;s-=h}}static rotate(e,t,i,n,r){if(i==n||n==r){return}let o=haxe_ds_ArraySort.gcd(r-i,n-i);while(o--!=0){let t=e[i+o];let s=n-i;let a=i+o;let u=i+o+s;while(u!=i+o){e[a]=e[u];a=u;if(r-u>s){u+=s}else{u=i+(s-(r-u))}}e[a]=t}}static gcd(e,t){while(t!=0){let i=e%t;e=t;t=i}return e}static upper(e,t,i,n,r){let o=n-i;let s;let a;while(o>0){s=o>>1;a=i+s;if(t(e[r],e[a])<0){o=s}else{i=a+1;o=o-s-1}}return i}static lower(e,t,i,n,r){let o=n-i;let s;let a;while(o>0){s=o>>1;a=i+s;if(t(e[a],e[r])<0){i=a+1;o=o-s-1}else{o=s}}return i}static swap(e,t,i){let n=e[t];e[t]=e[i];e[i]=n}}haxe_ds_ArraySort.__name__=true;class haxe_ds_ObjectMap{constructor(){this.h={__keys__:{}}}set(e,i){let n=e.__id__;if(n==null){n=e.__id__=t.$haxeUID++}this.h[n]=i;this.h.__keys__[n]=e}remove(e){let t=e.__id__;if(this.h.__keys__[t]==null){return false}delete this.h[t];delete this.h.__keys__[t];return true}}haxe_ds_ObjectMap.__name__=true;class haxe_ds_StringMap{constructor(){this.h=Object.create(null)}static createCopy(e){let t=new haxe_ds_StringMap;for(var i in e)t.h[i]=e[i];return t}}haxe_ds_StringMap.__name__=true;class haxe_io_Path{constructor(e){switch(e){case".":case"..":this.dir=e;this.file="";return}let t=e.lastIndexOf("/");let i=e.lastIndexOf("\\");if(t<i){this.dir=HxOverrides.substr(e,0,i);e=HxOverrides.substr(e,i+1,null);this.backslash=true}else if(i<t){this.dir=HxOverrides.substr(e,0,t);e=HxOverrides.substr(e,t+1,null)}else{this.dir=null}let n=e.lastIndexOf(".");if(n!=-1){this.ext=HxOverrides.substr(e,n+1,null);this.file=HxOverrides.substr(e,0,n)}else{this.ext=null;this.file=e}}toString(){return(this.dir==null?"":this.dir+(this.backslash?"\\":"/"))+this.file+(this.ext==null?"":"."+this.ext)}static withoutDirectory(e){let t=new haxe_io_Path(e);t.dir=null;return t.toString()}static directory(e){let t=new haxe_io_Path(e);if(t.dir==null){return""}return t.dir}static extension(e){let t=new haxe_io_Path(e);if(t.ext==null){return""}return t.ext}static join(e){let t=[];let i=0;while(i<e.length){let n=e[i];++i;if(n!=null&&n!=""){t.push(n)}}if(t.length==0){return""}let n=t[0];let r=1;let o=t.length;while(r<o){n=haxe_io_Path.addTrailingSlash(n);n+=t[r++]}return haxe_io_Path.normalize(n)}static normalize(e){let t="/";e=e.split("\\").join(t);if(e==t){return t}let i=[];let n=0;let r=e.split(t);while(n<r.length){let t=r[n];++n;if(t==".."&&i.length>0&&i[i.length-1]!=".."){i.pop()}else if(t==""){if(i.length>0||HxOverrides.cca(e,0)==47){i.push(t)}}else if(t!="."){i.push(t)}}let o="";let s=false;let a=false;let u=0;let l=i.join(t);while(u<l.length){let e=l;let t=u++;let i=e.charCodeAt(t);if(i>=55296&&i<=56319){i=i-55232<<10|e.charCodeAt(t+1)&1023}let n=i;if(n>=65536){++u}let r=n;switch(r){case 47:if(!s){a=true}else{let e=r;s=false;if(a){o+="/";a=false}o+=String.fromCodePoint(e)}break;case 58:o+=":";s=true;break;default:let e=r;s=false;if(a){o+="/";a=false}o+=String.fromCodePoint(e)}}return o}static addTrailingSlash(e){if(e.length==0){return"/"}let t=e.lastIndexOf("/");let i=e.lastIndexOf("\\");if(t<i){if(i!=e.length-1){return e+"\\"}else{return e}}else if(t!=e.length-1){return e+"/"}else{return e}}static isAbsolute(e){if(e.startsWith("/")){return true}if(e.charAt(1)==":"){return true}if(e.startsWith("\\\\")){return true}return false}}haxe_io_Path.__name__=true;class haxe_iterators_ArrayIterator{constructor(e){this.current=0;this.array=e}hasNext(){return this.current<this.array.length}next(){return this.array[this.current++]}}haxe_iterators_ArrayIterator.__name__=true;class js_Boot{static __string_rec(e,t){if(e==null){return"null"}if(t.length>=5){return"<...>"}let i=typeof e;if(i=="function"&&(e.__name__||e.__ename__)){i="object"}switch(i){case"function":return"<function>";case"object":if(e.__enum__){let i=r[e.__enum__];let n=i.__constructs__[e._hx_index];let o=n._hx_name;if(n.__params__){t=t+"\t";return o+"("+function(i){var r;let o=[];{let i=0;let r=n.__params__;while(true){if(!(i<r.length)){break}let n=r[i];i=i+1;o.push(js_Boot.__string_rec(e[n],t))}}r=o;return r}(this).join(",")+")"}else{return o}}if(e instanceof Array){let i="[";t+="\t";let n=0;let r=e.length;while(n<r){let r=n++;i+=(r>0?",":"")+js_Boot.__string_rec(e[r],t)}i+="]";return i}let n;try{n=e.toString}catch(e){return"???"}if(n!=null&&n!=Object.toString&&typeof n=="function"){let t=e.toString();if(t!="[object Object]"){return t}}let o="{\n";t+="\t";let s=e.hasOwnProperty!=null;let a=null;for(a in e){if(s&&!e.hasOwnProperty(a)){continue}if(a=="prototype"||a=="__class__"||a=="__super__"||a=="__interfaces__"||a=="__properties__"){continue}if(o.length!=2){o+=", \n"}o+=t+a+" : "+js_Boot.__string_rec(e[a],t)}t=t.substring(1);o+="\n"+t+"}";return o;case"string":return e;default:return String(e)}}}js_Boot.__name__=true;var u=i(129);var l=i(747);var h=i(622);var c=i(293).Buffer;var f=r["jsonrpc.NoData"]={__ename__:true,__constructs__:null};f.__constructs__=[];class sys_FileSystem{static exists(e){try{l.accessSync(e);return true}catch(e){return false}}static isDirectory(e){try{return l.statSync(e).isDirectory()}catch(e){return false}}static createDirectory(e){try{l.mkdirSync(e)}catch(t){let i=haxe_Exception.caught(t).unwrap();if(i.code=="ENOENT"){sys_FileSystem.createDirectory(h.dirname(e));l.mkdirSync(e)}else{let t;try{t=l.statSync(e)}catch(e){throw i}if(!t.isDirectory()){throw i}}}}}sys_FileSystem.__name__=true;class sys_io_File{static copy(e,t){let i=l.openSync(e,"r");let n=l.openSync(t,"w",l.fstatSync(i).mode);let r;let o=0;while(true){r=l.readSync(i,sys_io_File.copyBuf,0,65536,o);if(!(r>0)){break}l.writeSync(n,sys_io_File.copyBuf,0,r);o+=r}l.closeSync(i);l.closeSync(n)}}sys_io_File.__name__=true;var d=i(480).Disposable;var m=i(480).EventEmitter;var p=i(480).IndentAction;var g=i(480).Location;var y=i(480).Position;var C=i(480).ProcessExecution;var x=i(480).Range;var w=i(480).RelativePattern;var S=i(480).StatusBarAlignment;var R=i(480).Task;var D=i(480).TaskGroup;var b=i(480).TaskPanelKind;var _=i(480).TaskRevealKind;var T=i(480).TaskScope;var E=i(480).ThemeColor;var v=i(480).TreeItem;var k=i(480).TreeItemCollapsibleState;var P=i(480).Uri;var F=i(480).ViewColumn;class vshaxe_AutoIndentation{constructor(e){let t=this;this.context=e;this.updateExtendedIndentation();this.updateLanguageConfiguration();e.subscriptions.push(s.workspace.onDidChangeConfiguration(function(e){t.updateExtendedIndentation()}))}updateLanguageConfiguration(){s.languages.setLanguageConfiguration("haxe",{indentationRules:{decreaseIndentPattern:new RegExp("^((?!.*?/\\*).*\\*/)?\\s*[\\}\\]].*$",""),increaseIndentPattern:new RegExp("^((?!//).)*(\\{[^}\"'`]*|\\([^)\"'`]*|\\[[^\\]\"'`]*)$",""),indentNextLinePattern:new RegExp("(^\\s*(for|while|do|if|else|try|catch)|function)\\b(?!.*[;{}]\\s*(//.*|/[*].*[*]/\\s*)?$)","")},onEnterRules:[{beforeText:new RegExp("^\\s*/\\*\\*(?!/)([^\\*]|\\*(?!/))*$",""),afterText:new RegExp("^\\s*\\*\\*/$",""),action:{indentAction:p.IndentOutdent}},{beforeText:new RegExp("^\\s*/\\*\\*(?!/)([^\\*]|\\*(?!/))*$",""),action:{indentAction:p.Indent}},{beforeText:new RegExp("^\\s*(\\bcase\\s.+:|\\bdefault:)\\s*$",""),afterText:new RegExp("^(?!\\s*(\\bcase\\b|\\bdefault\\b))",""),action:{indentAction:p.Indent}}]})}updateExtendedIndentation(){let e=this.typeDisposable!=null;let t=s.workspace.getConfiguration("haxe").get("enableExtendedIndentation",false);if(t==e){return}if(t){try{this.typeDisposable=s.commands.registerCommand("type",$bind(this,this.type));this.context.subscriptions.push(this.typeDisposable)}catch(e){s.window.showErrorMessage("Failed to register the 'type' command needed for the \"haxe.enableExtendedIndentation\" setting"+" - there is probably a conflict with another extension such as Vim.")}}else{if(this.typeDisposable!=null){this.typeDisposable.dispose()}this.typeDisposable=null}}type(e){let t=s.window.activeTextEditor;if(t!=null&&t.document.languageId=="haxe"&&e.text=="{"){this.indentCurlyBracket(t)}s.commands.executeCommand("default:type",e)}indentCurlyBracket(e){let t=[];let i=0;let n=e.selections;while(i<n.length){let r=n[i];++i;if(!r.isEmpty||r.active.line==0){continue}let o=e.document.lineAt(r.active.line);if(!o.isEmptyOrWhitespace){continue}let s=e.document.lineAt(r.active.line-1);if(s.text.length>0&&vshaxe_AutoIndentation.lineEndsWithOpenBracket.match(s.text)){continue}if(o.text.length<s.firstNonWhitespaceCharacterIndex){continue}t.push({range:o.range,spaces:HxOverrides.substr(s.text,0,s.firstNonWhitespaceCharacterIndex)})}if(t.length==0){return}e.edit(function(e){let i=0;while(i<t.length){let n=t[i];++i;e.replace(n.range,n.spaces)}},{undoStopBefore:false,undoStopAfter:false})}}vshaxe_AutoIndentation.__name__=true;class vshaxe_EvalDebugger{constructor(e,t){this.displayArguments=e;this.haxeExecutable=t;s.debug.registerDebugConfigurationProvider("haxe-eval",{resolveDebugConfiguration:$bind(this,this.resolveDebugConfiguration)})}resolveDebugConfiguration(e,t,i){let n=t;if(n.type==null){n.type="haxe-eval";n.name="Haxe Interpreter";n.request="launch"}if(n.cwd==null&&e!=null){n.cwd=e.uri.fsPath}if(n.args==null){if(this.displayArguments.arguments==null){s.window.showErrorMessage("No Haxe configuration exists. "+'Please create a HXML file, use the "haxe.configurations" setting or set `args` in the launch configuration.');return undefined}n.args=this.displayArguments.arguments}n.haxeExecutable=this.haxeExecutable.configuration;n.mergeScopes=s.workspace.getConfiguration("haxe.debug").get("mergeScopes",true);n.showGeneratedVariables=s.workspace.getConfiguration("haxe.debug").get("showGeneratedVariables",false);return n}}vshaxe_EvalDebugger.__name__=true;class vshaxe_ExtensionRecommender{constructor(e,t){this.context=e;this.folder=t}run(){this.check([".haxerc","haxe_libraries"],"lix","lix extension","lix.lix");this.check(["project.xml","Project.xml","project.hxp","project.lime"],"Lime","Lime extension","openfl.lime-vscode-extension");this.check(["khafile.js"],"Kha","Kha Extension Pack","kodetech.kha-extension-pack")}check(e,t,i,n){let r=this;let o=vshaxe_HaxeMementoKey._new("dontShowExtensionRecommendationAgain."+t);let a=this.context.globalState;if(a.get(o,false)){return}if(Lambda.exists(s.extensions.all,function(e){return e.id==n})){return}if(!Lambda.exists(e,function(e){return sys_FileSystem.exists(haxe_io_Path.join([r.folder.uri.fsPath,e]))})){return}s.window.showInformationMessage(""+t+" project detected. For the best experience, the "+i+" should be installed.","Install Extension","Don't Show Again").then(function(e){if(e!=null){switch(e){case"Don't Show Again":a.update(o,true);break;case"Install Extension":s.commands.executeCommand("workbench.extensions.installExtension",n);break}}})}}vshaxe_ExtensionRecommender.__name__=true;var I=r["vshaxe.Target"]={__ename__:true,__constructs__:null,None:{_hx_name:"None",_hx_index:0,__enum__:"vshaxe.Target",toString:n},Js:(o=function(e){return{_hx_index:1,file:e,__enum__:"vshaxe.Target",toString:n}},o._hx_name="Js",o.__params__=["file"],o),Lua:(o=function(e){return{_hx_index:2,file:e,__enum__:"vshaxe.Target",toString:n}},o._hx_name="Lua",o.__params__=["file"],o),Swf:(o=function(e){return{_hx_index:3,file:e,__enum__:"vshaxe.Target",toString:n}},o._hx_name="Swf",o.__params__=["file"],o),As3:(o=function(e){return{_hx_index:4,directory:e,__enum__:"vshaxe.Target",toString:n}},o._hx_name="As3",o.__params__=["directory"],o),Neko:(o=function(e){return{_hx_index:5,file:e,__enum__:"vshaxe.Target",toString:n}},o._hx_name="Neko",o.__params__=["file"],o),Php:(o=function(e){return{_hx_index:6,directory:e,__enum__:"vshaxe.Target",toString:n}},o._hx_name="Php",o.__params__=["directory"],o),Cpp:(o=function(e){return{_hx_index:7,directory:e,__enum__:"vshaxe.Target",toString:n}},o._hx_name="Cpp",o.__params__=["directory"],o),Cppia:(o=function(e){return{_hx_index:8,file:e,__enum__:"vshaxe.Target",toString:n}},o._hx_name="Cppia",o.__params__=["file"],o),Cs:(o=function(e){return{_hx_index:9,directory:e,__enum__:"vshaxe.Target",toString:n}},o._hx_name="Cs",o.__params__=["directory"],o),Java:(o=function(e){return{_hx_index:10,directory:e,__enum__:"vshaxe.Target",toString:n}},o._hx_name="Java",o.__params__=["directory"],o),Python:(o=function(e){return{_hx_index:11,file:e,__enum__:"vshaxe.Target",toString:n}},o._hx_name="Python",o.__params__=["file"],o),Hl:(o=function(e){return{_hx_index:12,file:e,__enum__:"vshaxe.Target",toString:n}},o._hx_name="Hl",o.__params__=["file"],o),Interp:{_hx_name:"Interp",_hx_index:13,__enum__:"vshaxe.Target",toString:n},Jvm:(o=function(e){return{_hx_index:14,file:e,__enum__:"vshaxe.Target",toString:n}},o._hx_name="Jvm",o.__params__=["file"],o)};I.__constructs__=[I.None,I.Js,I.Lua,I.Swf,I.As3,I.Neko,I.Php,I.Cpp,I.Cppia,I.Cs,I.Java,I.Python,I.Hl,I.Interp,I.Jvm];var L=r["vshaxe.HaxeExecutableSource"]={__ename__:true,__constructs__:null,Settings:{_hx_name:"Settings",_hx_index:0,__enum__:"vshaxe.HaxeExecutableSource",toString:n},Provider:(o=function(e){return{_hx_index:1,name:e,__enum__:"vshaxe.HaxeExecutableSource",toString:n}},o._hx_name="Provider",o.__params__=["name"],o)};L.__constructs__=[L.Settings,L.Provider];class vshaxe_HaxeMementoKey{static _new(e){return"haxe."+e}}class vshaxe_HxmlDiscovery{constructor(e,t){let i=this;this.folder=e;this.mementos=t;this.didChangeFilesEmitter=new m;this.files=t.getDefault(e,"haxe.hxmlDiscoveryFiles",[]);let n=new w(e,"*.hxml");this.fileWatcher=s.workspace.createFileSystemWatcher(n,false,true,false);this.fileWatcher.onDidCreate(function(e){i.files.push(vshaxe_helper_PathHelper.relativize(e.fsPath,i.folder.uri.fsPath));i.mementos.set(i.folder,"haxe.hxmlDiscoveryFiles",i.files);i.didChangeFilesEmitter.fire()});this.fileWatcher.onDidDelete(function(e){HxOverrides.remove(i.files,vshaxe_helper_PathHelper.relativize(e.fsPath,i.folder.uri.fsPath));i.mementos.set(i.folder,"haxe.hxmlDiscoveryFiles",i.files);i.didChangeFilesEmitter.fire()});s.workspace.findFiles(n).then(function(e){let t=[];if(e!=null){let n=new Array(e.length);let r=0;let o=e.length;while(r<o){let t=r++;n[t]=vshaxe_helper_PathHelper.relativize(e[t].fsPath,i.folder.uri.fsPath)}let s=[];let a=0;while(a<n.length){let e=n[a];++a;if(haxe_io_Path.withoutDirectory(e)!="extraParams.hxml"){s.push(e)}}t=s}if(!vshaxe_helper_ArrayExtensions_equals(i.files,t)){i.files=t;i.mementos.set(i.folder,"haxe.hxmlDiscoveryFiles",i.files);i.didChangeFilesEmitter.fire()}})}dispose(){this.fileWatcher.dispose();this.didChangeFilesEmitter.dispose()}}vshaxe_HxmlDiscovery.__name__=true;function vshaxe_Main_main(e){new vshaxe_commands_InitProject(e);new vshaxe_AutoIndentation(e);let t=s.workspace.workspaceFolders==null?null:s.workspace.workspaceFolders[0];if(t==null){return undefined}let i=new vshaxe_WorkspaceMementos(e.workspaceState);let n=new vshaxe_HxmlDiscovery(t,i);e.subscriptions.push(n);let r=new vshaxe_display_DisplayArguments(t,i);e.subscriptions.push(r);let o=new vshaxe_configuration_HaxeInstallation(t,i);e.subscriptions.push(o);let a=new vshaxe_helper_HaxeConfiguration(e,t,r,o);e.subscriptions.push(a);let u=["$haxe-absolute","$haxe","$haxe-error","$haxe-trace"];let l={haxeExecutable:o.haxe,haxelibExecutable:o.haxelib.accessor,enableCompilationServer:true,problemMatchers:u.slice(),taskPresentation:{},registerDisplayArgumentsProvider:$bind(r,r.registerProvider),registerHaxeInstallationProvider:$bind(o,o.registerProvider),parseHxmlToArguments:vshaxe_helper_HxmlParser.parseToArgs,getActiveConfiguration:$bind(a,a.getActiveConfiguration)};let h=new vshaxe_server_LanguageServer(t,e,o,r,l);e.subscriptions.push(h);new vshaxe_helper_HaxeCodeLensProvider;new vshaxe_view_HaxeServerViewContainer(e,h);new vshaxe_view_dependencies_DependencyTreeView(e,a);new vshaxe_EvalDebugger(r,o.haxe);new vshaxe_display_DisplayArgumentsSelector(e,r);let c=new vshaxe_display_HaxeDisplayArgumentsProvider(e,r,n);new vshaxe_commands_Commands(e,h,c);new vshaxe_ExtensionRecommender(e,t).run();let f=new vshaxe_tasks_TaskConfiguration(o,u,h,l);new vshaxe_tasks_HxmlTaskProvider(f,n);new vshaxe_tasks_HaxeTaskProvider(f,r,c);vshaxe_Main_scheduleStartup(r,o,h);return l}e["activate"]=vshaxe_Main_main;function vshaxe_Main_scheduleStartup(e,t,i){let n=e.isWaitingForProvider();let r=t.isWaitingForProvider();let o=false;let a=false;let u=[];let l=function(){if(!r&&(!n||o)&&!a){Lambda.iter(u,function(e){e.dispose()});a=true;s.commands.executeCommand("setContext","vshaxeActivated",true);i.start()}};if(n){u.push(e._onDidChangeArguments.event(function(e){n=false;l()}));let t=function(e){if(e.languageId=="haxe"){o=true;l()}};let i=function(e){if(e!=null){t(e.document)}};u.push(s.workspace.onDidOpenTextDocument(t));u.push(s.window.onDidChangeActiveTextEditor(i));i(s.window.activeTextEditor)}if(r){u.push(t._onDidChange.event(function(e){r=false;l()}))}l()}class vshaxe_WorkspaceMementos{constructor(e){this.storage=e;this.maybeMigrate()}getDefault(e,t,i){let n=this.get(e,t);if(n==null){return i}else{return n}}get(e,t){let i=this.storage.get(t);if(i==null){return null}return i[e.uri.toString()]}set(e,t,i){let n=this.storage.get(t);if(n==null){n={}}n[e.uri.toString()]=i;return this.storage.update(t,n)}maybeMigrate(){if(this.storage.get("haxe.mementoVersion")==null){this.storage.update("haxe.displayArgumentsProviderName",undefined);this.storage.update(vshaxe_display_HaxeDisplayArgumentsProvider.ConfigurationIndexKey,undefined);this.storage.update("haxe.hxmlDiscoveryFiles",undefined);this.storage.update("haxe.mementoVersion",1)}}}vshaxe_WorkspaceMementos.__name__=true;class vshaxe_commands_Commands{constructor(e,t,i){this.context=e;this.server=t;this.haxeDisplayArgumentsProvider=i;vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"restartLanguageServer",$bind(t,t.restart));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"showReferences",$bind(this,this.showReferences));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"runGlobalDiagnostics",$bind(t,t.runGlobalDiagnostics));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"toggleCodeLens",$bind(this,this.toggleCodeLens));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"debugSelectedConfiguration",$bind(this,this.debugSelectedConfiguration));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"codeAction.highlightInsertion",$bind(this,this.highlightInsertion))}showReferences(e,t,i){let n=new Array(i.length);let r=0;let o=i.length;while(r<o){let e=r++;let t=i[e];let o=P.parse(t.uri);let s=t.range.start;let a=new y(s.line,s.character);let u=t.range.end;n[e]=new g(o,new x(a,new y(u.line,u.character)))}s.commands.executeCommand("editor.action.showReferences",P.parse(e),new y(t.line,t.character),n).then(function(e){console.log("src/vshaxe/commands/Commands.hx:36:",e)},function(e){console.log("src/vshaxe/commands/Commands.hx:36:","err: "+e)})}toggleCodeLens(){let e=s.workspace.getConfiguration("haxe");let t=e.inspect("enableCodeLens");if(t==null){return}let i=this.getCurrentConfigValue(t,e);if(i==null){i=false}e.update("enableCodeLens",!i,t.workspaceValue==null)}debugSelectedConfiguration(){if(this.haxeDisplayArgumentsProvider.provideArguments==null){s.window.showErrorMessage("The built-in completion provider is not active, so there is no configuration to be debugged.");return}let e=this.haxeDisplayArgumentsProvider.getCurrentLabel();if(e==null){s.window.showErrorMessage("There is no configuration selected.");return}let t=null;if(s.workspace.workspaceFolders!=null){t=s.workspace.workspaceFolders[0]}s.debug.startDebugging(t,e).then(function(e){return},function(e){return s.window.showErrorMessage(Std.string(e))})}getCurrentConfigValue(e,t){let i=e.workspaceValue;if(i==null){i=e.globalValue}if(i==null){i=e.defaultValue}return i}highlightInsertion(e,t){s.window.showTextDocument(P.parse(e)).then(function(e){e.revealRange(t)})}}vshaxe_commands_Commands.__name__=true;class vshaxe_commands_InitProject{constructor(e){this.context=e;vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"initProject",$bind(this,this.initProject))}initProject(){let e=this;let t=s.workspace.workspaceFolders;if(t==null){s.window.showOpenDialog({canSelectFolders:true,canSelectFiles:false}).then(function(t){if(t!=null&&t.length>0){e.setupFolder(t[0].fsPath);s.commands.executeCommand("vscode.openFolder",t[0])}})}else{switch(t.length){case 0:s.window.showOpenDialog({canSelectFolders:true,canSelectFiles:false}).then(function(t){if(t!=null&&t.length>0){e.setupFolder(t[0].fsPath);s.commands.executeCommand("vscode.openFolder",t[0])}});break;case 1:this.setupFolder(t[0].uri.fsPath);break;default:s.window.showWorkspaceFolderPick({placeHolder:"Select a folder to set up a Haxe project into..."}).then(function(t){if(t==null){return}e.setupFolder(t.uri.fsPath)})}}}setupFolder(e){if(Lambda.exists(l.readdirSync(e),function(e){return!e.startsWith(".")})){s.window.showErrorMessage("To set up sample Haxe project, the folder must be empty");return}this.copyRec(this.context.asAbsolutePath("./scaffold/project"),e);s.window.setStatusBarMessage("Haxe project scaffolded",2e3)}copyRec(e,t){let i=null;i=function(n,r){let o=e+n;let s=t+r;if(sys_FileSystem.isDirectory(o)){sys_FileSystem.createDirectory(s);let e=0;let t=l.readdirSync(o);while(e<t.length){let o=t[e];++e;i(n+"/"+o,r+"/"+o)}}else{sys_io_File.copy(o,s)}};i("","")}}vshaxe_commands_InitProject.__name__=true;class vshaxe_configuration_ConfigurationAccessor{constructor(){this._onDidChangeConfiguration=new m}get_onDidChangeConfiguration(){return this._onDidChangeConfiguration.event}}vshaxe_configuration_ConfigurationAccessor.__name__=true;class vshaxe_configuration_ConfigurationWrapper{constructor(e,t){if(vshaxe_configuration_ConfigurationWrapper._hx_skip_constructor){return}this._hx_constructor(e,t)}_hx_constructor(e,t){this.section=e;this.folder=t;this.accessor=new vshaxe_configuration_ConfigurationAccessor;this.updateConfig();let i=this.accessor;let n=this.copyConfig();i.configuration=n;i._onDidChangeConfiguration.fire(n);this.changeConfigurationListener=s.workspace.onDidChangeConfiguration($bind(this,this.onWorkspaceConfigurationChanged))}get_onDidChangeConfiguration(){return this.accessor.get_onDidChangeConfiguration()}dispose(){this.changeConfigurationListener.dispose()}onWorkspaceConfigurationChanged(e){if(e.affectsConfiguration(this.section,this.folder.uri)){this.update()}}update(){let e=this.configuration;this.updateConfig();if(!this.isSame(this.configuration,e)){let e=this.accessor;let t=this.copyConfig();e.configuration=t;e._onDidChangeConfiguration.fire(t)}}isSame(e,t){return JSON.stringify(e)==JSON.stringify(t)}}vshaxe_configuration_ConfigurationWrapper.__name__=true;class vshaxe_configuration_HaxeExecutable extends vshaxe_configuration_ConfigurationWrapper{constructor(e){vshaxe_configuration_ConfigurationWrapper._hx_skip_constructor=true;super();vshaxe_configuration_ConfigurationWrapper._hx_skip_constructor=false;this._hx_constructor(e)}_hx_constructor(e){this.isDefault=false;super._hx_constructor("haxe.executable",e)}setAutoResolveValue(e,t){this.autoResolveProvider=e;this.autoResolveValue=t;this.update()}copyConfig(){return{executable:this.configuration.executable,source:this.configuration.source,isCommand:this.configuration.isCommand,version:this.configuration.version,env:this.configuration.env}}updateConfig(){let e=s.workspace.getConfiguration("haxe",this.folder.uri).get("executable","haxe");let t="auto";let i={};this.isDefault=false;let n=function(e){if(typeof e=="string"){t=e}else{let n=e;if(n.path!=null){t=n.path}if(n.env!=null){i=n.env}}};n(e);let r=Reflect.field(e,vshaxe_configuration_HaxeExecutable.SYSTEM_KEY);if(r!=null){n(r)}let o=L.Settings;if(t=="auto"){if(this.autoResolveProvider==null||this.autoResolveValue==null){t="haxe";this.isDefault=true}else{t=this.autoResolveValue;o=L.Provider(this.autoResolveProvider)}}let a=false;if(!haxe_io_Path.isAbsolute(t)){let e=vshaxe_helper_PathHelper.absolutize(t,this.folder.uri.fsPath);if(sys_FileSystem.exists(e)&&!sys_FileSystem.isDirectory(e)){t=e}else{a=true;if(Sys.systemName()=="Windows"&&haxe_io_Path.extension(t)==""){t+=".exe"}}}this.configuration={executable:t,source:o,isCommand:a,env:i,version:this.getVersion(t)}}getVersion(e){let t=u.spawnSync(e,["-version"],{cwd:this.folder.uri.fsPath});if(t!=null&&t.stderr!=null){let e=StringTools.trim(t.stderr.toString());if(e==""){e=StringTools.trim(t.stdout.toString())}if(e!=null){return StringTools.trim(e.split(" ")[0])}}return null}}vshaxe_configuration_HaxeExecutable.__name__=true;class vshaxe_configuration_HaxeInstallation{constructor(e,t){this._onDidChange=new m;this.ignoreEvents=false;this.providers=new haxe_ds_StringMap;let i=this;this.folder=e;this.mementos=t;this.haxe=new vshaxe_configuration_HaxeExecutable(e);this.haxelib=new vshaxe_configuration_HaxelibExecutable(e);this.env=this.updateEnv();this.haxe.get_onDidChangeConfiguration()(function(e){i.onDidChangeConfiguration()});this.haxelib.get_onDidChangeConfiguration()(function(e){i.onDidChangeConfiguration()});this.standardLibraryPath=this.getStandardLibraryPath();this.libraryBasePath=this.getLibraryBasePath();if(this.isWaitingForProvider()){haxe_Timer.delay(function(){if(i.isWaitingForProvider()){i.setCurrentProvider(null)}},2e3)}}onDidChangeConfiguration(){if(!this.ignoreEvents){this.env=this.updateEnv();this._onDidChange.fire()}}updateEnv(){let e=Reflect.copy(this.haxe.configuration.env);let t=this.haxelib.configuration.executable;if(!haxe_io_Path.isAbsolute(t)){t=vshaxe_helper_PathHelper.absolutize(t,this.folder.uri.fsPath)}if(sys_FileSystem.exists(t)&&!sys_FileSystem.isDirectory(t)){let i=Sys.systemName()=="Windows"?";":":";e["PATH"]=haxe_io_Path.directory(t)+i+process.env["PATH"]}return e}dispose(){this.haxe.dispose();this.haxelib.dispose()}getCurrentProvider(){if(this.currentProvider!=null){return this.providers.h[this.currentProvider]}else{return null}}resolveLibrary(e){let t=this.getCurrentProvider();if(t!=null&&t.resolveLibrary!=null){return t.resolveLibrary(e)}return null}listLibraries(){let e=this.getCurrentProvider();if(e!=null&&e.listLibraries!=null){return e.listLibraries()}if(this.libraryBasePath==null||!sys_FileSystem.exists(this.libraryBasePath)||!sys_FileSystem.isDirectory(this.libraryBasePath)){return[]}let t=l.readdirSync(this.libraryBasePath);let i=[];let n=0;while(n<t.length){let e=t[n];++n;if(!e.startsWith(".")){i.push(e)}}let r=new Array(i.length);let o=0;let s=i.length;while(o<s){let e=o++;r[e]={name:StringTools.replace(i[e],",",".")}}return r}isWaitingForProvider(){if(this.mementos.get(this.folder,vshaxe_configuration_HaxeInstallation.PreviousHaxeInstallationProviderKey)!=null){return this.currentProvider==null}else{return false}}registerProvider(e,t){let i=this;if(Object.prototype.hasOwnProperty.call(this.providers.h,e)){throw new Error("Haxe installation provider `"+e+"` is already registered.")}this.providers.h[e]=t;if(this.currentProvider==null){this.setCurrentProvider(e)}return new d(function(){if(e==i.currentProvider){i.setCurrentProvider(null)}let t=i.providers;if(Object.prototype.hasOwnProperty.call(t.h,e)){delete t.h[e]}})}setCurrentProvider(e){if(this.currentProvider!=null){let e=this.providers.h[this.currentProvider];if(e!=null){e.deactivate()}}this.currentProvider=e;this.mementos.set(this.folder,vshaxe_configuration_HaxeInstallation.PreviousHaxeInstallationProviderKey,e);if(e!=null){let t=this.providers.h[e];if(t!=null){t.activate($bind(this,this.provideInstallation))}}else{this.provideInstallation({})}}provideInstallation(e){this.ignoreEvents=true;this.haxe.setAutoResolveValue(this.currentProvider,e.haxeExecutable);this.haxelib.setAutoResolveValue(e.haxelibExecutable);this.ignoreEvents=false;this.standardLibraryPath=e.standardLibraryPath;if(this.standardLibraryPath==null){this.standardLibraryPath=this.getStandardLibraryPath()}this.env=this.updateEnv();this._onDidChange.fire()}getStandardLibraryPath(){let e=process.env["HAXE_STD_PATH"];if(e!=null){return e}if(Sys.systemName()=="Windows"){let e;if(this.haxe.configuration.isCommand){let t=vshaxe_helper_ProcessHelper_getProcessOutput("where "+this.haxe.configuration.executable)[0];if(t==null){return null}e=t}else{e=this.haxe.configuration.executable}return haxe_io_Path.join([haxe_io_Path.directory(e),"std"])}else{if(sys_FileSystem.exists("/usr/local/share/haxe/std/")){return"/usr/local/share/haxe/std/"}if(sys_FileSystem.exists("/usr/local/lib/haxe/std/")){return"/usr/local/lib/haxe/std/"}if(sys_FileSystem.exists("/usr/share/haxe/std/")){return"/usr/share/haxe/std/"}if(sys_FileSystem.exists("/usr/lib/haxe/std/")){return"/usr/lib/haxe/std/"}}return null}getLibraryBasePath(){let e=vshaxe_helper_ProcessHelper_getProcessOutput(""+this.haxelib.configuration.executable+" config")[0];if(e==null){console.log("src/vshaxe/configuration/HaxeInstallation.hx:194:","`haxelib config` call failed, Haxe Dependencies won't be populated.");return null}else{return haxe_io_Path.normalize(e)}}}vshaxe_configuration_HaxeInstallation.__name__=true;class vshaxe_configuration_HaxelibExecutable extends vshaxe_configuration_ConfigurationWrapper{constructor(e){super("haxelib.executable",e)}setAutoResolveValue(e){this.autoResolveValue=e;this.update()}copyConfig(){return{executable:this.configuration.executable}}updateConfig(){let e=s.workspace.getConfiguration("haxelib",this.folder.uri).get("executable","haxelib");if(e=="auto"){e=this.autoResolveValue==null?"haxelib":this.autoResolveValue}this.configuration={executable:e}}}vshaxe_configuration_HaxelibExecutable.__name__=true;class vshaxe_display_DisplayArguments{constructor(e,t){this._onDidChangeCurrentProvider=new m;this._onDidChangeArguments=new m;this.providers=new haxe_ds_StringMap;this.folder=e;this.mementos=t}dispose(){this._onDidChangeArguments.dispose();this._onDidChangeCurrentProvider.dispose()}registerProvider(e,t){let i=this;if(Object.prototype.hasOwnProperty.call(this.providers.h,e)){throw new Error("Display arguments provider `"+e+"` is already registered.")}this.providers.h[e]=t;let n=this.mementos.get(this.folder,"haxe.displayArgumentsProviderName");if(this.currentProvider==null||n==null||n==e){this.setCurrentProvider(e,false)}return new d(function(){let t=i.providers;let n;if(Object.prototype.hasOwnProperty.call(t.h,e)){delete t.h[e];n=true}else{n=false}if(n&&e==i.currentProvider){i.setCurrentProvider(Object.keys(i.providers.h)[0],false)}})}isWaitingForProvider(){return this.arguments==null}setCurrentProvider(e,t){if(this.currentProvider!=null){let e=this.providers.h[this.currentProvider];if(e!=null){e.deactivate()}}this.currentProvider=e;s.commands.executeCommand("setContext","haxeCompletionProvider",e);if(e!=null){let t=this.providers.h[e];if(t!=null){let i=$bind(this,this.provideArguments);let n=e;t.activate(function(e){i(n,e)})}}if(t){this.mementos.set(this.folder,"haxe.displayArgumentsProviderName",e)}this._onDidChangeCurrentProvider.fire(this.currentProvider)}provideArguments(e,t){if(Object.prototype.hasOwnProperty.call(this.providers.h,e)&&!vshaxe_helper_ArrayExtensions_equals(t,this.arguments)){this.arguments=t;this._onDidChangeArguments.fire(t)}}}vshaxe_display_DisplayArguments.__name__=true;class vshaxe_display_DisplayArgumentsSelector{constructor(e,t){let i=this;this.displayArguments=t;this.statusBarItem=s.window.createStatusBarItem(S.Left,11);this.statusBarItem.tooltip="Select Haxe Completion Provider";this.statusBarItem.command="haxe."+"selectDisplayArgumentsProvider";e.subscriptions.push(this.statusBarItem);vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"selectDisplayArgumentsProvider",$bind(this,this.selectProvider));t._onDidChangeCurrentProvider.event(function(e){i.updateStatusBarItem()});this.updateStatusBarItem()}selectProvider(){let e=this;let t=[];let i=this.displayArguments.providers.h;let n=Object.keys(i);let r=n.length;let o=0;while(o<r){let e=n[o++];t.push({label:e,description:i[e].description})}if(t.length==0){s.window.showErrorMessage("No Haxe completion providers registered.");return}vshaxe_helper_ArrayExtensions_moveToStart(t,function(t){return t.label==e.displayArguments.currentProvider});s.window.showQuickPick(t,{placeHolder:"Select Haxe Completion Provider"}).then(function(t){if(t!=null){e.displayArguments.setCurrentProvider(t.label,true)}})}updateStatusBarItem(){if(this.displayArguments.currentProvider==null){this.statusBarItem.hide();return}let e=this.displayArguments.currentProvider;let t=null;if(!Object.prototype.hasOwnProperty.call(this.displayArguments.providers.h,this.displayArguments.currentProvider)){e+=" (not available)";t=vshaxe_display_DisplayArgumentsSelector.statusBarWarningThemeColor}this.statusBarItem.color=t;this.statusBarItem.text="$(gear) "+e;this.statusBarItem.show()}}vshaxe_display_DisplayArgumentsSelector.__name__=true;class vshaxe_display_HaxeDisplayArgumentsProvider{constructor(e,t,i){this.description="Project using haxe.configurations or HXML files (built-in)";this.configurations=[];let n=this;this.context=e;this.displayArguments=t;this.hxmlDiscovery=i;this.statusBarItem=s.window.createStatusBarItem(S.Left,10);this.statusBarItem.tooltip="Select Haxe Configuration";this.statusBarItem.command="haxe."+"selectConfiguration";e.subscriptions.push(this.statusBarItem);vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"selectConfiguration",$bind(this,this.selectConfiguration));e.subscriptions.push(s.workspace.onDidChangeConfiguration(function(e){n.refresh()}));i.didChangeFilesEmitter.event(function(e){n.refresh()});this.refresh()}updateConfigurations(){let e=s.workspace.getConfiguration("haxe").get("configurations",[]);if(e==null||e.length==0){e=s.workspace.getConfiguration("haxe").get("displayConfigurations",[])}this.configurations=[];let t=0;let i=e.length;while(t<i){let i=t++;let n=e[i];let r;let o=null;if(n instanceof Array){r=n}else{let e=n;r=e.args;o=e.label}this.configurations.push({kind:A.Configured(i,o),args:r})}let n=0;let r=this.hxmlDiscovery.files;while(n<r.length){let t=r[n];++n;let i=[t];if(!Lambda.exists(e,function(e){return vshaxe_helper_ArrayExtensions_equals(e,i)})){this.configurations.push({kind:A.Discovered(t),args:i})}}}activate(e){this.provideArguments=e;this.setCurrent(this.getCurrent())}deactivate(){this.provideArguments=null;this.updateStatusBarItem(null)}selectConfiguration(){let e=this;if(this.configurations.length==0){s.window.showErrorMessage("No Haxe configurations are available. Please provide the haxe.configurations setting.",{title:"Edit settings"}).then(function(e){if(e==null){return}s.workspace.getConfiguration("haxe").update("configurations",[],false).then(function(e){if(s.workspace.workspaceFolders==null){return}s.workspace.openTextDocument(s.workspace.workspaceFolders[0].uri.fsPath+"/.vscode/settings.json").then(function(e){return s.window.showTextDocument(e)})})});return}let t=[];let i=0;let n=this.configurations;while(i<n.length){let e=n[i];++i;let r=e.kind._hx_index==1;t.push({label:this.getConfigurationLabel(e),description:r?"auto-discovered":"from settings.json",config:e})}let r=this.getCurrent();if(r!=null){vshaxe_helper_ArrayExtensions_moveToStart(t,function(e){return e.config==r})}s.window.showQuickPick(t,{matchOnDescription:true,placeHolder:"Select Haxe Configuration"}).then(function(t){if(t==null||t.config==r){return}let i=e.context.workspaceState;let n;let o=t.config.kind;switch(o._hx_index){case 0:n=o.index;break;case 1:n=o.id;break}i.update(vshaxe_display_HaxeDisplayArgumentsProvider.ConfigurationIndexKey,n);e.setCurrent(t.config)})}getCurrentLabel(){let e=this.getCurrent();if(e==null){return null}return this.getConfigurationLabel(e)}getConfigurationLabel(e){let t=e.kind;switch(t._hx_index){case 0:let i=t.label;if(i!=null){return i}else{return e.args.join(" ")}break;case 1:return t.id}}getCurrent(){let e=this.context.workspaceState.get(vshaxe_display_HaxeDisplayArgumentsProvider.ConfigurationIndexKey,null);let t=0;let i=this.configurations;while(t<i.length){let n=i[t];++t;let r=n.kind;switch(r._hx_index){case 0:if(r.index==e){return n}break;case 1:if(r.id==e){return n}break;default:}}return this.configurations[0]}setCurrent(e){this.updateStatusBarItem(e);if(this.provideArguments!=null){this.provideArguments(e==null?[]:e.args)}}refresh(){this.updateConfigurations();this.updateDisplayArgumentsProviderRegistration();this.setCurrent(this.getCurrent())}updateDisplayArgumentsProviderRegistration(){let e=this.configurations.length>0;if(e&&this.providerDisposable==null){this.providerDisposable=this.displayArguments.registerProvider("Haxe",this)}else if(!e&&this.providerDisposable!=null){this.providerDisposable.dispose();this.providerDisposable=null}}updateStatusBarItem(e){if(this.provideArguments!=null&&e!=null){let t=e.kind;let i=t._hx_index==0?t.label:null;if(i==null){i=e.args.join(" ");if(i.length>50){i=StringTools.rtrim(HxOverrides.substr(i,0,47))+"..."}}this.statusBarItem.text=i;this.statusBarItem.show();return}this.statusBarItem.hide()}}vshaxe_display_HaxeDisplayArgumentsProvider.__name__=true;var A=r["vshaxe.display._HaxeDisplayArgumentsProvider.ConfigurationKind"]={__ename__:true,__constructs__:null,Configured:(o=function(e,t){return{_hx_index:0,index:e,label:t,__enum__:"vshaxe.display._HaxeDisplayArgumentsProvider.ConfigurationKind",toString:n}},o._hx_name="Configured",o.__params__=["index","label"],o),Discovered:(o=function(e){return{_hx_index:1,id:e,__enum__:"vshaxe.display._HaxeDisplayArgumentsProvider.ConfigurationKind",toString:n}},o._hx_name="Discovered",o.__params__=["id"],o)};A.__constructs__=[A.Configured,A.Discovered];function vshaxe_helper_ArrayExtensions_equals(e,t){if(e==null&&t==null){return true}if(e==null&&t!=null){return false}if(e!=null&&t==null){return false}if(e.length!=t.length){return false}let i=0;let n=e.length;while(i<n){let n=i++;if(e[n]!=t[n]){return false}}return true}function vshaxe_helper_ArrayExtensions_moveToStart(e,t){let i=Lambda.find(e,t);if(i!=null){HxOverrides.remove(e,i);e.unshift(i)}}function vshaxe_helper_ContextExtensions_registerHaxeCommand(e,t,i){e.subscriptions.push(s.commands.registerCommand(t,i))}class vshaxe_helper_HaxeCodeLensProvider{constructor(){this._onDidChangeCodeLenses=new m;this.onDidChangeCodeLenses=this._onDidChangeCodeLenses.event;this.enableCodeLens=this.getEnableCodeLens();s.languages.registerCodeLensProvider("haxe",this);s.workspace.onDidChangeConfiguration($bind(this,this.onDidChangeConfiguration))}getEnableCodeLens(){return s.workspace.getConfiguration("haxe").get("enableCodeLens",false)}onDidChangeConfiguration(e){let t=this.getEnableCodeLens();if(t!=this.enableCodeLens){this._onDidChangeCodeLenses.fire();this.enableCodeLens=t}}provideCodeLenses(e,t){return[]}resolveCodeLens(e,t){return e}}vshaxe_helper_HaxeCodeLensProvider.__name__=true;var O=r["vshaxe.helper.ClassPathOrLib"]={__ename__:true,__constructs__:null,ClassPath:(o=function(e){return{_hx_index:0,path:e,__enum__:"vshaxe.helper.ClassPathOrLib",toString:n}},o._hx_name="ClassPath",o.__params__=["path"],o),Lib:(o=function(e){return{_hx_index:1,name:e,__enum__:"vshaxe.helper.ClassPathOrLib",toString:n}},o._hx_name="Lib",o.__params__=["name"],o)};O.__constructs__=[O.ClassPath,O.Lib];class vshaxe_helper_HaxeConfiguration{constructor(e,t,i,n){let r=this;this.folder=t;this.haxeInstallation=n;this.didChangeEmitter=new m;let o=i.arguments;this.rawArguments=o==null?[]:o;let a=s.workspace.createFileSystemWatcher("**/*.hxml");e.subscriptions.push(a.onDidCreate($bind(this,this.onDidChangeHxml)));e.subscriptions.push(a.onDidChange($bind(this,this.onDidChangeHxml)));e.subscriptions.push(a.onDidDelete($bind(this,this.onDidChangeHxml)));e.subscriptions.push(a);e.subscriptions.push(n._onDidChange.event(function(e){r.invalidate()}));e.subscriptions.push(i._onDidChangeArguments.event($bind(this,this.onDidChangeDisplayArguments)))}onDidChangeHxml(e){if(this.extractedConfiguration!=null){let t=0;let i=this.extractedConfiguration.hxmls;while(t<i.length)if(vshaxe_helper_PathHelper.areEqual(e.fsPath,i[t++])){this.update();break}}}onDidChangeDisplayArguments(e){this.rawArguments=e;this.update()}update(){if(this.haxeInstallation.isWaitingForProvider()){return}let e=this.extract(vshaxe_helper_HxmlParser.parseArray(this.rawArguments));if(JSON.stringify(this.extractedConfiguration)==JSON.stringify(e)){return}this.extractedConfiguration=e;this.resolvedConfiguration=this.resolve(this.extractedConfiguration);this.didChangeEmitter.fire(this.resolvedConfiguration)}dispose(){this.didChangeEmitter.dispose()}invalidate(){this.extractedConfiguration=null;this.resolvedConfiguration=null;this.update()}getActiveConfiguration(){let e=this;return new Promise(function(t,i){let n=function(){let n=e.resolvedConfiguration;if(n==null){i("No Haxe configuration available")}else{t({classPaths:n.classPaths.slice(),defines:haxe_ds_StringMap.createCopy(n.defines.h),target:n.target,main:n.main})}};if(e.haxeInstallation.isWaitingForProvider()){let t=null;t=e.didChangeEmitter.event(function(e){t.dispose();n()})}else{n()}})}extract(e){let t=this.folder.uri.fsPath;let i=[];let n=[];let r=new haxe_ds_StringMap;let o=I.None;let s=null;let a=function(e,t){e=vshaxe_helper_PathHelper.absolutize(e,t);i.push(e);if(e==null||!sys_FileSystem.exists(e)){return[]}return vshaxe_helper_HxmlParser.parseFile(l.readFileSync(e,{encoding:"utf8"}))};let u=null;u=function(e){let i=0;while(i<e.length){let l=e[i];++i;switch(l._hx_index){case 1:let e=l.name;switch(e){case"--interp":case"-interp":o=I.Interp;break;default:if(e.endsWith(".hxml")){u(a(e,t))}}break;case 2:let i=l.value;switch(l.name){case"--as3":case"-as3":o=I.As3(i);break;case"--cwd":case"-C":if(haxe_io_Path.isAbsolute(i)){t=i}else{t=haxe_io_Path.join([t,i])}break;case"--define":case"-D":let e=i.split("=");r.h[e[0]]=e.length==1?"1":e[1];break;case"--jvm":o=I.Jvm(i);break;case"--python":case"-python":o=I.Python(i);break;case"--run":s=i;o=I.Interp;break;case"--swf":case"-swf":o=I.Swf(i);break;case"--library":case"-L":case"-lib":n.push(O.Lib(i));break;case"--cpp":case"-cpp":o=I.Cpp(i);break;case"--cppia":case"-cppia":o=I.Cppia(i);break;case"--cs":case"-cs":o=I.Cs(i);break;case"--hl":case"-hl":o=I.Hl(i);break;case"--java":case"-java":o=I.Java(i);break;case"--js":case"-js":o=I.Js(i);break;case"--lua":case"-lua":o=I.Lua(i);break;case"--main":case"-m":case"-main":s=i;break;case"--neko":case"-neko":o=I.Neko(i);break;case"--class-path":case"-cp":case"-p":n.push(O.ClassPath(vshaxe_helper_PathHelper.absolutize(i,t)));break;case"--php":case"-php":o=I.Php(i);break;default:}break;default:}}};u(e);return{hxmls:i,classPathsAndLibs:n,defines:r,target:o,main:s}}resolve(e){let t=[];let i=this;let n=haxe_ds_StringMap.createCopy(e.defines.h);let r=[];let o=function(){let e=i.resolveHaxelibs(r);let o=i.extract(vshaxe_helper_HxmlParser.parseFile(e.join("\n")));let s=0;let a=o.classPathsAndLibs;while(s<a.length){let e=a[s];++s;switch(e._hx_index){case 0:t.push({path:e.path});break;case 1:break}}let u=o.defines.h;let l=Object.keys(u);let h=l.length;let c=0;while(c<h){let e=l[c++];n.h[e]=u[e]}};let s=0;let a=e.classPathsAndLibs;while(s<a.length){let e=a[s];++s;switch(e._hx_index){case 0:o();t.push({path:e.path});break;case 1:r.push(e.name);break}}o();let u=new Array(t.length);let l=0;let h=t.length;while(l<h){let e=l++;u[e]=t[e].path}let c=this.resolveDependencies(u);t.unshift({path:this.folder.uri.fsPath});let f=this.haxeInstallation.standardLibraryPath;if(f!=null){t.unshift({path:f})}t.reverse();return{dependencies:c,defines:n,classPaths:t,target:e.target,main:e.main}}resolveHaxelibs(e){let t=[];let i=vshaxe_helper_ProcessHelper_getProcessOutput(""+this.haxeInstallation.haxelib.configuration.executable+" path "+e.join(" "));let n=0;while(n<i.length){let e=i[n];++n;e=StringTools.trim(e);if(e.length==0){continue}if(HxOverrides.cca(e,0)==45){t.push(e)}else{t.push("-cp "+e)}}return t}resolveDependencies(e){e=this.pruneSubdirectories(e);let t=[];let i=this.haxeInstallation.libraryBasePath;if(i!=null){let n=0;while(n<e.length){let r=e[n];++n;let o=this.haxeInstallation.resolveLibrary(r);if(o==null){o=this.getDependencyInfo(r,i)}if(o!=null){t.push(o)}}}let n=this.haxeInstallation.haxe.configuration;let r=this.haxeInstallation.standardLibraryPath;if(r!=null&&sys_FileSystem.exists(r)){t.push({name:"haxe",version:n.version==null?"?":n.version,path:r})}return t}pruneSubdirectories(e){let t=haxe_io_Path.addTrailingSlash;let i=new Array(e.length);let n=0;let r=e.length;while(n<r){let r=n++;i[r]=t(e[r])}let o=[];let s=0;let a=i;while(s<a.length){let e=a[s];++s;let t=e;if(!Lambda.exists(i,function(e){if(e!=t){return t.startsWith(e)}else{return false}})){o.push(e)}}return o}getDependencyInfo(e,t){if(s.workspace.workspaceFolders==null){return null}let i=s.workspace.workspaceFolders[0].uri.fsPath;let n=vshaxe_helper_PathHelper.absolutize(e,i);if(t==null||!sys_FileSystem.exists(n)){return null}t=haxe_io_Path.normalize(t);if(!n.includes(t)){let t=haxe_io_Path.normalize(i);if(!n.includes(t)){let t=this.searchHaxelibJson(n);if(t==null){return{name:e,version:null,path:n}}return t}return null}e=StringTools.replace(n,t+"/","");let r=e.split("/");let o=r[0];let a=r[1];e=""+t+"/"+o;if(o!=null){o=StringTools.replace(o,",",".")}if(a!=null){e+="/"+a;a=StringTools.replace(a,",",".")}else{a=e}if(!sys_FileSystem.exists(e)){return null}return{name:o,version:a,path:e}}searchHaxelibJson(e,t){if(t==null){t=3}if(t<=0){return null}let i=haxe_io_Path.join([e,"haxelib.json"]);if(sys_FileSystem.exists(i)){let t=JSON.parse(l.readFileSync(i,{encoding:"utf8"}));if(t.name==null){return null}e=haxe_io_Path.normalize(e);return{name:t.name,version:"dev",path:e}}return this.searchHaxelibJson(haxe_io_Path.join([e,".."]),t-1)}}vshaxe_helper_HaxeConfiguration.__name__=true;var N=r["vshaxe.helper.HxmlLine"]={__ename__:true,__constructs__:null,Comment:(o=function(e){return{_hx_index:0,comment:e,__enum__:"vshaxe.helper.HxmlLine",toString:n}},o._hx_name="Comment",o.__params__=["comment"],o),Simple:(o=function(e){return{_hx_index:1,name:e,__enum__:"vshaxe.helper.HxmlLine",toString:n}},o._hx_name="Simple",o.__params__=["name"],o),Param:(o=function(e,t){return{_hx_index:2,name:e,value:t,__enum__:"vshaxe.helper.HxmlLine",toString:n}},o._hx_name="Param",o.__params__=["name","value"],o)};N.__constructs__=[N.Comment,N.Simple,N.Param];class vshaxe_helper_HxmlParser{static unquote(e){let t=e.length;if(t>0&&e.charCodeAt(0)==34&&e.charCodeAt(t-1)==34){return e.substring(1,t-1)}else{return e}}static parseFile(e){let t=[];let i=new EReg("[\n\r]+","g").split(e);let n=0;while(n<i.length){let e=i[n];++n;e=vshaxe_helper_HxmlParser.unquote(StringTools.trim(e));if(e.length==0){continue}if(e.startsWith("#")){t.push(N.Comment(StringTools.ltrim(HxOverrides.substr(e,1,null))))}else if(e.startsWith("-")){let i=e.indexOf(" ");if(i==-1){t.push(N.Simple(e))}else{t.push(N.Param(HxOverrides.substr(e,0,i),vshaxe_helper_HxmlParser.unquote(StringTools.ltrim(HxOverrides.substr(e,i,null)))))}}else{t.push(N.Simple(e))}}return t}static parseToArgs(e){let t=[];let i=0;let n=vshaxe_helper_HxmlParser.parseFile(e);while(i<n.length){let e=n[i];++i;switch(e._hx_index){case 0:break;case 1:t.push(e.name);break;case 2:t.push(e.name);t.push(e.value);break}}return t}static parseArray(e){let t=[];let i=null;let n=0;while(n<e.length){let r=e[n];++n;if(r.startsWith("-")){if(i!=null){t.push(N.Simple(i));i=null}i=r}else if(i!=null){t.push(N.Param(i,r));i=null}else{t.push(N.Simple(r))}}if(i!=null){t.push(N.Simple(i))}return t}}vshaxe_helper_HxmlParser.__name__=true;class vshaxe_helper_PathHelper{static absolutize(e,t){return haxe_io_Path.normalize(haxe_io_Path.isAbsolute(e)?e:haxe_io_Path.join([t,e]))}static relativize(e,t){e=haxe_io_Path.normalize(e);t=haxe_io_Path.normalize(t)+"/";let i=e.split(t);i.shift();return i.join(t)}static containsFile(e,t){e=haxe_io_Path.normalize(e)+"/";let i=haxe_io_Path.normalize(haxe_io_Path.directory(t))+"/";if(Sys.systemName()=="Windows"){e=e.toLowerCase();i=i.toLowerCase()}return i.startsWith(e)}static areEqual(e,t){if(Sys.systemName()=="Windows"){e=e.toLowerCase();t=t.toLowerCase()}return haxe_io_Path.normalize(e)==haxe_io_Path.normalize(t)}static capitalizeDriveLetter(e){if(Sys.systemName()=="Windows"&&haxe_io_Path.isAbsolute(e)){e=e.charAt(0).toUpperCase()+HxOverrides.substr(e,1,null)}return e}}vshaxe_helper_PathHelper.__name__=true;function vshaxe_helper_ProcessHelper_getProcessOutput(e){try{let t=process.cwd();if(s.workspace.workspaceFolders!=null){let e=s.workspace.workspaceFolders[0].uri.fsPath;process.chdir(e)}let i=u.execSync(e);process.chdir(t);let n=i.toString().split("\n");let r=[];let o=0;while(o<n.length)r.push(StringTools.trim(n[o++]));return r}catch(e){return[]}}var H=i(643).LanguageClient;class vshaxe_server_LanguageServer{constructor(e,t,i,n,r){this._onDidChangeRequestQueue=new m;this._onDidRunMethod=new m;let o=this;this.folder=e;this.context=t;this.displayArguments=n;this.haxeInstallation=i;this.api=r;this.serverModulePath=t.asAbsolutePath("bin/server.js");this.hxFileWatcher=s.workspace.createFileSystemWatcher(new w(e,"**/*.hx"),false,true,false);let a=this.haxeInstallation.haxe.configuration.executable;let u=this.haxeInstallation.env;let l=s.workspace.getConfiguration("haxe");let h=l.get("displayServer.arguments",[]);let c=l.get("displayServer.useSocket",true);this.displayServerConfig={path:a,env:u,arguments:h,print:l.get("displayServer.print",{completion:false,reusing:false}),useSocket:c};this.displayServerConfigSerialized=JSON.stringify(this.displayServerConfig);this.restartDisposables=[];this.queuedNotifications=[];this.clientStartingUp=false;this.disposables=[this.hxFileWatcher,s.workspace.onDidChangeConfiguration(function(e){o.refreshDisplayServerConfig(false)}),i._onDidChange.event(function(e){o.refreshDisplayServerConfig(true)}),s.window.onDidChangeActiveTextEditor($bind(this,this.onDidChangeActiveTextEditor)),n._onDidChangeArguments.event(function(e){o.sendNotification("haxe/didChangeDisplayArguments",{arguments:e})})]}dispose(){let e=0;let t=this.restartDisposables;while(e<t.length)t[e++].dispose();let i=0;let n=this.disposables;while(i<n.length)n[i++].dispose()}sendNotification(e,t){if(this.client==null){return}if(this.clientStartingUp){this.queuedNotifications.push({method:e,params:t});return}if(t==null){this.client.sendNotification(e)}else{this.client.sendNotification(e,t)}}sendRequest(e,t){if(this.client!=null){return this.client.sendRequest(e,t)}else{return Promise.reject("client not initialized")}}onNotification(e,t){if(this.client!=null){this.client.onNotification(e,t)}}onRequest(e,t){if(this.client!=null){this.client.onRequest(e,t)}}refreshDisplayServerConfig(e){if(this.prepareDisplayServerConfig()||e){this.sendNotification("haxe/didChangeDisplayServerConfig",this.displayServerConfig)}}onDidChangeActiveTextEditor(e){if(e!=null&&e.document.languageId=="haxe"){this.sendNotification("haxe/didChangeActiveTextEditor",{uri:e.document.uri.toString()})}}start(){let e=this;let t=new H("haxe","Haxe",{run:{module:this.serverModulePath,options:{env:process.env}},debug:{module:this.serverModulePath,options:{env:process.env,execArgv:["--nolazy","--inspect=6504"]}}},{documentSelector:[{language:"haxe",scheme:"file"},{language:"haxe",scheme:"untitled"},{language:"hxml",scheme:"file"},{language:"hxml",scheme:"untitled"}],synchronize:{configurationSection:"haxe",fileEvents:this.hxFileWatcher},initializationOptions:{displayArguments:this.displayArguments.arguments,displayServerConfig:this.displayServerConfig,haxelibConfig:{executable:this.haxeInstallation.haxelib.configuration.executable},sendMethodResults:true},revealOutputChannelOn:4,workspaceFolder:this.folder});t.onReady().then(function(i){t.outputChannel.appendLine("Haxe language server started");e.clientStartingUp=false;let n=0;let r=e.queuedNotifications;while(n<r.length){let t=r[n];++n;e.sendNotification(t.method,t.params)}e.queuedNotifications=[];e.restartDisposables.push(new vshaxe_server_PackageInserter(e.hxFileWatcher,e));e.onNotification("haxe/didChangeDisplayPort",$bind(e,e.onDidChangeDisplayPort));e.onNotification("haxe/didRunGlobalDiagnostics",$bind(e,e.onDidRunGlobalDiangostics));e.onNotification("haxe/didRunHaxeMethod",$bind(e,e.onDidRunMethodCallback));e.onNotification("haxe/didChangeRequestQueue",$bind(e,e.onDidChangeRequestQueueCallback));e.onNotification("haxe/cacheBuildFailed",$bind(e,e.onCacheBuildFailed));e.onNotification("haxe/haxeKeepsCrashing",$bind(e,e.onHaxeKeepsCrashing));e.onNotification("haxe/didDetectOldHaxeVersion",$bind(e,e.onDidDetectOldHaxeVersion));e.onRequest("haxe/listLibraries",$bind(e,e.onListLibraries))});this.clientStartingUp=true;this.restartDisposables.push(t.start());this.client=t}prepareDisplayServerConfig(){let e=this.haxeInstallation.haxe.configuration.executable;let t=this.haxeInstallation.env;let i=s.workspace.getConfiguration("haxe");let n=i.get("displayServer.arguments",[]);let r=i.get("displayServer.useSocket",true);this.displayServerConfig={path:e,env:t,arguments:n,print:i.get("displayServer.print",{completion:false,reusing:false}),useSocket:r};let o=this.displayServerConfigSerialized;this.displayServerConfigSerialized=JSON.stringify(this.displayServerConfig);return this.displayServerConfigSerialized!=o}onDidChangeDisplayPort(e){this.displayPort=e.port;this.api.displayPort=e.port}restart(){if(this.client!=null&&this.client.outputChannel!=null){this.client.outputChannel.dispose()}let e=0;let t=this.restartDisposables;while(e<t.length)t[e++].dispose();this.restartDisposables=[];this.start()}runGlobalDiagnostics(){this.sendNotification("haxe/runGlobalDiagnostics")}runMethod(e,t){return this.sendRequest("haxe/runMethod",{method:e,params:t})}onDidRunGlobalDiangostics(e){s.commands.executeCommand("workbench.action.problems.focus")}onDidRunMethodCallback(e){this._onDidRunMethod.fire(e)}onDidChangeRequestQueueCallback(e){this._onDidChangeRequestQueue.fire(e.queue)}onCacheBuildFailed(e){this.showRestartLanguageServerMessage((o=s.window,$bind(o,o.showWarningMessage)),"Unable to build cache - completion features may be slower than expected. Try fixing the error(s) and restarting the language server.")}onHaxeKeepsCrashing(e){this.showRestartLanguageServerMessage((o=s.window,$bind(o,o.showErrorMessage)),"Haxe process has crashed 3 times, not attempting any more restarts.")}showRestartLanguageServerMessage(e,t){let i=null;let n=this;i=function(r,o){e(t,{},r,o).then(function(e){if(e==null){return}if(e!=null){switch(e){case"Retry":n.restart();break;case"Show Error":if(n.client!=null){n.client.outputChannel.show();i("Retry",undefined)}break;default:}}})};i("Show Error","Retry")}onDidDetectOldHaxeVersion(e){let t=this.context.globalState;if(t.get(vshaxe_server_LanguageServer.DontShowOldPreviewHintAgainKey,false)){return}let i="You are using "+(e.haxe4Preview?"a Haxe 4 preview build":"Haxe "+e.version)+". Consider upgrading to Haxe 4 for greatly improved completion features and stability.";if(!this.haxeInstallation.haxe.isDefault){i+=" Current Haxe executable is "+this.haxeInstallation.haxe.configuration.executable}s.window.showInformationMessage(i,"Visit Download Page","Don't Show Again").then(function(e){if(e!=null){switch(e){case"Don't Show Again":t.update(vshaxe_server_LanguageServer.DontShowOldPreviewHintAgainKey,true);break;case"Visit Download Page":s.env.openExternal(P.parse("https://haxe.org/download"));break}}})}onListLibraries(e){let t=this;return new Promise(function(e,i){e(t.haxeInstallation.listLibraries())})}}vshaxe_server_LanguageServer.__name__=true;class vshaxe_server_PackageInserter{constructor(e,t){let i=this;this.server=t;this.createEvent=e.onDidCreate(function(e){let t=s.window.activeTextEditor;if(t==null||t.document.uri.fsPath!=e.fsPath){i.lastCreatedFile=e}else{i.insertPackageStatement(t)}});this.openEvent=s.window.onDidChangeActiveTextEditor(function(e){if(e!=null&&i.lastCreatedFile!=null&&e.document.uri.fsPath==i.lastCreatedFile.fsPath){i.insertPackageStatement(e)}})}insertPackageStatement(e){this.lastCreatedFile=null;if(e.document.getText(new x(0,0,0,1)).length>0){return}this.server.sendRequest("haxe/determinePackage",{fsPath:e.document.uri.fsPath}).then(function(t){if(t.pack==""){return}e.edit(function(e){e.insert(new y(0,0),"package "+t.pack+";\n\n")})})}dispose(){this.createEvent.dispose();this.openEvent.dispose()}}vshaxe_server_PackageInserter.__name__=true;class vshaxe_tasks_HaxeTaskProvider{constructor(e,t,i){this.taskConfiguration=e;this.displayArguments=t;this.haxeDisplayArgumentsProvider=i;s.tasks.registerTaskProvider("haxe",this)}provideTasks(e){if(this.haxeDisplayArgumentsProvider.configurations.length==0||this.displayArguments.arguments==null){return[]}return[this.taskConfiguration.createTask({type:"haxe",args:"active configuration"},"active configuration",this.displayArguments.arguments)]}resolveTask(e,t){return e}}vshaxe_tasks_HaxeTaskProvider.__name__=true;class vshaxe_tasks_HxmlTaskProvider{constructor(e,t){this.taskConfiguration=e;this.hxmlDiscovery=t;s.tasks.registerTaskProvider("hxml",this)}provideTasks(e){let t=[];let i=0;let n=this.hxmlDiscovery.files;while(i<n.length){let e=n[i];++i;t.push(this.taskConfiguration.createTask({type:"hxml",file:e},e,[e]))}return t}resolveTask(e,t){return e}}vshaxe_tasks_HxmlTaskProvider.__name__=true;class vshaxe_tasks_TaskConfiguration{constructor(e,t,i,n){let r=this;this.haxeInstallation=e;this.problemMatchers=t;this.server=i;this.api=n;this.enableCompilationServer=s.workspace.getConfiguration("haxe").get("enableCompilationServer",true);let o=s.workspace.getConfiguration("haxe").get("taskPresentation",{});let a=o.reveal;let u;if(a==null){u=_.Always}else{switch(a){case"always":u=_.Always;break;case"never":u=_.Never;break;case"silent":u=_.Silent;break;default:u=_.Always}}let l=o.panel;let h;if(l==null){h=b.Shared}else{switch(l){case"dedicated":h=b.Dedicated;break;case"new":h=b.New;break;case"shared":h=b.Shared;break;default:h=b.Shared}}this.taskPresentation={echo:o.echo,reveal:u,focus:o.focus,panel:h,showReuseMessage:o.showReuseMessage,clear:o.clear};let c=this.api;c.enableCompilationServer=this.enableCompilationServer;c.taskPresentation=this.taskPresentation;s.workspace.onDidChangeConfiguration(function(e){r.update()})}update(){this.enableCompilationServer=s.workspace.getConfiguration("haxe").get("enableCompilationServer",true);let e=s.workspace.getConfiguration("haxe").get("taskPresentation",{});let t=e.reveal;let i;if(t==null){i=_.Always}else{switch(t){case"always":i=_.Always;break;case"never":i=_.Never;break;case"silent":i=_.Silent;break;default:i=_.Always}}let n=e.panel;let r;if(n==null){r=b.Shared}else{switch(n){case"dedicated":r=b.Dedicated;break;case"new":r=b.New;break;case"shared":r=b.Shared;break;default:r=b.Shared}}this.taskPresentation={echo:e.echo,reveal:i,focus:e.focus,panel:r,showReuseMessage:e.showReuseMessage,clear:e.clear};let o=this.api;o.enableCompilationServer=this.enableCompilationServer;o.taskPresentation=this.taskPresentation}createTask(e,t,i){let n=this.haxeInstallation.haxe.configuration.executable;if(this.server.displayPort!=null&&this.enableCompilationServer){i=["--connect",Std.string(this.server.displayPort)].concat(i)}let r=new R(e,T.Workspace,t,"haxe",new C(n,i,{env:this.haxeInstallation.env}),this.problemMatchers);r.group=D.Build;r.presentationOptions=this.taskPresentation;return r}}vshaxe_tasks_TaskConfiguration.__name__=true;class vshaxe_view_HaxeServerViewContainer{constructor(e,t){let i=this;this.methodTreeView=new vshaxe_view_methods_MethodTreeView(e,t);new vshaxe_view_cache_CacheTreeView(e,t);this.enabled=s.workspace.getConfiguration("haxe").get("enableServerView",false);s.commands.executeCommand("setContext","enableHaxeServerView",this.enabled);this.methodTreeView.enabled=this.enabled;s.workspace.onDidChangeConfiguration(function(e){i.update()})}update(){this.enabled=s.workspace.getConfiguration("haxe").get("enableServerView",false);s.commands.executeCommand("setContext","enableHaxeServerView",this.enabled);this.methodTreeView.enabled=this.enabled}}vshaxe_view_HaxeServerViewContainer.__name__=true;class vshaxe_view_cache_CacheTreeView{constructor(e,t){this.resolveTreeItem=undefined;this.getParent=function(e){return e.parent};this.skipRefresh=new haxe_ds_ObjectMap;this.didChangeTreeData=new m;this.context=e;this.server=t;this.onDidChangeTreeData=this.didChangeTreeData.event;vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"cache.copyNodeValue",$bind(this,this.copyNodeValue));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"cache.reloadNode",$bind(this,this.reloadNode));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"cache.gotoNode",$bind(this,this.gotoNode));s.window.registerTreeDataProvider("haxe.cache",this);this.view=s.window.createTreeView("haxe.cache",{treeDataProvider:this,showCollapseAll:true})}getTreeItem(e){return e}getChildren(e){let t=this;if(e==null){return[new vshaxe_view_cache_Node("server",null,q.ServerRoot),new vshaxe_view_cache_Node("memory",null,q.MemoryRoot)]}let i=this.skipRefresh.h[e.__id__];if(i!=null){this.skipRefresh.remove(e);return i}else{let i=e;let n=function(e){i.description=e.length==null?"null":""+e.length;t.skipRefresh.set(i,e);t.didChangeTreeData.fire(i)};let r=i.kind;switch(r._hx_index){case 0:return this.server.runMethod("server/contexts").then(function(e){let t=[];let i=0;while(i<e.length){let n=e[i];++i;haxe_ds_ArraySort.sort(n.defines,function(e,t){return Reflect.compare(e.key,t.key)});t.push(new vshaxe_view_cache_Node(n.platform,n.desc,q.Context(n)))}return t},function(e){return e});case 1:return this.server.runMethod("server/memory").then(function(e){let t=[];let n=[{key:"context cache",value:vshaxe_view_cache_CacheTreeView.formatSize(e.memory.contextCache)},{key:"haxelib cache",value:vshaxe_view_cache_CacheTreeView.formatSize(e.memory.haxelibCache)},{key:"directory cache",value:vshaxe_view_cache_CacheTreeView.formatSize(e.memory.directoryCache)},{key:"native lib cache",value:vshaxe_view_cache_CacheTreeView.formatSize(e.memory.nativeLibCache)}];let r=[new vshaxe_view_cache_Node("total cache",vshaxe_view_cache_CacheTreeView.formatSize(e.memory.totalCache),q.StringMapping(n),i)];if(e.memory.additionalSizes!=null){let t=0;let n=e.memory.additionalSizes;while(t<n.length){let e=n[t];++t;r.push(new vshaxe_view_cache_Node(e.name,vshaxe_view_cache_CacheTreeView.formatSize(e.size),q.Leaf,i))}}t.push(new vshaxe_view_cache_Node("overview",null,q.Nodes(r),i));let o=0;let s=e.contexts;while(o<s.length){let e=s[o];++o;t.push(new vshaxe_view_cache_Node(e.context==null?"?":""+e.context.platform+" ("+e.context.desc+", "+e.context.index+")",vshaxe_view_cache_CacheTreeView.formatSize(e.size),q.ContextMemory(e.context),i))}return t},function(e){return e});case 2:let e=r.ctx;return this.server.runMethod("server/memory/context",{signature:e.signature}).then(function(t){let n=t.moduleCache.list;let r=new Array(n.length);let o=0;let s=n.length;while(o<s){let t=o++;let i=n[t];r[t]=new vshaxe_view_cache_Node(i.path,vshaxe_view_cache_CacheTreeView.formatSize(i.size),i.hasTypes?q.ModuleMemory(e.signature,i.path):q.Leaf)}r.unshift(new vshaxe_view_cache_Node("?sizes",null,q.Nodes([new vshaxe_view_cache_Node("syntax cache",vshaxe_view_cache_CacheTreeView.formatSize(t.syntaxCache.size),q.Leaf,i),new vshaxe_view_cache_Node("module cache",vshaxe_view_cache_CacheTreeView.formatSize(t.moduleCache.size),q.Leaf,i)]),i));if(t.leaks!=null){let e=[];let n=0;let o=t.leaks;while(n<o.length){let t=o[n];++n;let i=t.path;let r=t.leaks;let s=new Array(r.length);let a=0;let u=r.length;while(a<u){let e=a++;s[e]=r[e].path}e.push(new vshaxe_view_cache_Node(i,null,q.StringList(s)))}r.unshift(new vshaxe_view_cache_Node("?LEAKS",null,q.Nodes(e),i))}return r},function(e){return e});case 3:return this.server.runMethod("server/memory/module",{signature:r.sign,path:r.path}).then(function(e){let t=[];t.push(new vshaxe_view_cache_Node("?module extra size",vshaxe_view_cache_CacheTreeView.formatSize(e.moduleExtra),q.Leaf,i));let n=0;let r=e.types;while(n<r.length){let e=r[n];++n;let o=e.fields;let s=new Array(o.length);let a=0;let u=o.length;while(a<u){let e=a++;let t=o[e];let n=new vshaxe_view_cache_Node(t.name,vshaxe_view_cache_CacheTreeView.formatSize(t.size),q.Leaf,i);if(t.pos!=null){n.setGotoPosition(t.pos)}s[e]=n}let l=new vshaxe_view_cache_Node(e.name,vshaxe_view_cache_CacheTreeView.formatSize(e.size),q.Nodes(s),i);if(e.pos!=null){l.setGotoPosition(e.pos)}t.push(l)}return t},function(e){return e});case 4:let t=r.ctx;return[new vshaxe_view_cache_Node("index",""+t.index,q.Leaf,i),new vshaxe_view_cache_Node("desc",t.desc,q.Leaf,i),new vshaxe_view_cache_Node("signature",t.signature,q.Leaf,i),new vshaxe_view_cache_Node("class paths",Std.string(t.classPaths.length),q.StringList(t.classPaths),i),new vshaxe_view_cache_Node("defines",Std.string(t.defines.length),q.StringMapping(t.defines),i),new vshaxe_view_cache_Node("modules","?",q.ContextModules(t),i),new vshaxe_view_cache_Node("files","?",q.ContextFiles(t),i)];case 5:let o=r.ctx;return this.server.runMethod("server/modules",{signature:o.signature}).then(function(e){let t=[];haxe_ds_ArraySort.sort(e,Reflect.compare);let i=0;while(i<e.length){let n=e[i];++i;t.push(new vshaxe_view_cache_Node(n,null,q.ModuleInfo(o.signature,n)))}n(t);return t},function(e){return e});case 6:return this.server.runMethod("server/files",{signature:r.ctx.signature}).then(function(e){let t=new Array(e.length);let r=0;let o=e.length;while(r<o){let n=r++;let o=e[n];t[n]=new vshaxe_view_cache_Node(o.file,null,q.StringMapping([{key:"mtime",value:""+o.time},{key:"package",value:o.pack}]),i)}n(t);return t},function(e){return e});case 7:return this.server.runMethod("server/module",{signature:r.sign,path:r.path}).then(function(e){let t=e.types;let n=new Array(t.length);let r=0;let o=t.length;while(r<o){let e=r++;n[e]=t[e].typeName}haxe_ds_ArraySort.sort(n,Reflect.compare);return[new vshaxe_view_cache_Node("id",""+e.id,q.Leaf,i),new vshaxe_view_cache_Node("path",vshaxe_view_cache_CacheTreeView.printPath(e.path),q.Leaf,i),new vshaxe_view_cache_Node("file",e.file,q.Leaf,i),new vshaxe_view_cache_Node("sign",e.sign,q.Leaf,i),new vshaxe_view_cache_Node("types",n.length==null?"null":""+n.length,q.StringList(n),i),new vshaxe_view_cache_Node("dependencies",Std.string(e.dependencies.length),q.ModuleList(e.dependencies),i)]},function(e){return e});case 8:let s=r.modules;let a=[];let u=0;while(u<s.length){let e=s[u];++u;a.push(new vshaxe_view_cache_Node(e.path,null,q.ModuleInfo(e.sign,e.path)))}return a;case 9:let l=r.strings;let h=new Array(l.length);let c=0;let f=l.length;while(c<f){let e=c++;h[e]=new vshaxe_view_cache_Node(l[e],null,q.Leaf,i)}return h;case 10:let d=r.mapping;let m=new Array(d.length);let p=0;let g=d.length;while(p<g){let e=p++;let t=d[e];m[e]=new vshaxe_view_cache_Node(t.key,t.value,q.Leaf,i)}return m;case 11:return r.nodes;case 12:return[]}}}copyNodeValue(e){let t=function(e){let t=new Array(e.length);let i=0;let n=e.length;while(i<n){let n=i++;let r=e[n];t[n]=""+r.key+"="+r.value}return t.join(" ")};let i;let n=e.kind;switch(n._hx_index){case 4:let e=n.ctx;let r="";let o=function(e,t){r+=Std.string(""+e+": "+t+"\n")};o("index",""+e.index);o("desc",e.desc);o("signature",e.signature);o("platform",e.platform);o("classPaths",e.classPaths.join(" "));o("defines",t(e.defines));i=r;break;case 9:i=n.strings.join(" ");break;case 10:i=t(n.mapping);break;default:throw haxe_Exception.thrown(false)}s.env.clipboard.writeText(i)}gotoNode(e){if(e.gotoPosition!=null){let t=e.gotoPosition;let i=t.range.start;let n=new x(i.line,i.character,i.line,i.character);s.workspace.openTextDocument(t.file).then(function(e){return s.window.showTextDocument(e,{selection:n})})}}reloadNode(e){this.didChangeTreeData.fire(e)}static printPath(e){let t="";if(e.pack.length>0){t+=Std.string(e.pack.join("."));t+=String.fromCodePoint(46)}t+=Std.string(e.moduleName);if(e.typeName!=null){t+=String.fromCodePoint(46);t+=Std.string(e.typeName)}return t}static formatSize(e){if(e<1024){return e+" B"}else if(e<1048576){return(e>>>10)+" KB"}else{let t=Std.string(e/1048576);let i=t.indexOf(".");if(i<0){return t+" MB"}else{return HxOverrides.substr(t,0,i+2)+" MB"}}}}vshaxe_view_cache_CacheTreeView.__name__=true;var q=r["vshaxe.view.cache.Kind"]={__ename__:true,__constructs__:null,ServerRoot:{_hx_name:"ServerRoot",_hx_index:0,__enum__:"vshaxe.view.cache.Kind",toString:n},MemoryRoot:{_hx_name:"MemoryRoot",_hx_index:1,__enum__:"vshaxe.view.cache.Kind",toString:n},ContextMemory:(o=function(e){return{_hx_index:2,ctx:e,__enum__:"vshaxe.view.cache.Kind",toString:n}},o._hx_name="ContextMemory",o.__params__=["ctx"],o),ModuleMemory:(o=function(e,t){return{_hx_index:3,sign:e,path:t,__enum__:"vshaxe.view.cache.Kind",toString:n}},o._hx_name="ModuleMemory",o.__params__=["sign","path"],o),Context:(o=function(e){return{_hx_index:4,ctx:e,__enum__:"vshaxe.view.cache.Kind",toString:n}},o._hx_name="Context",o.__params__=["ctx"],o),ContextModules:(o=function(e){return{_hx_index:5,ctx:e,__enum__:"vshaxe.view.cache.Kind",toString:n}},o._hx_name="ContextModules",o.__params__=["ctx"],o),ContextFiles:(o=function(e){return{_hx_index:6,ctx:e,__enum__:"vshaxe.view.cache.Kind",toString:n}},o._hx_name="ContextFiles",o.__params__=["ctx"],o),ModuleInfo:(o=function(e,t){return{_hx_index:7,sign:e,path:t,__enum__:"vshaxe.view.cache.Kind",toString:n}},o._hx_name="ModuleInfo",o.__params__=["sign","path"],o),ModuleList:(o=function(e){return{_hx_index:8,modules:e,__enum__:"vshaxe.view.cache.Kind",toString:n}},o._hx_name="ModuleList",o.__params__=["modules"],o),StringList:(o=function(e){return{_hx_index:9,strings:e,__enum__:"vshaxe.view.cache.Kind",toString:n}},o._hx_name="StringList",o.__params__=["strings"],o),StringMapping:(o=function(e){return{_hx_index:10,mapping:e,__enum__:"vshaxe.view.cache.Kind",toString:n}},o._hx_name="StringMapping",o.__params__=["mapping"],o),Nodes:(o=function(e){return{_hx_index:11,nodes:e,__enum__:"vshaxe.view.cache.Kind",toString:n}},o._hx_name="Nodes",o.__params__=["nodes"],o),Leaf:{_hx_name:"Leaf",_hx_index:12,__enum__:"vshaxe.view.cache.Kind",toString:n}};q.__constructs__=[q.ServerRoot,q.MemoryRoot,q.ContextMemory,q.ModuleMemory,q.Context,q.ContextModules,q.ContextFiles,q.ModuleInfo,q.ModuleList,q.StringList,q.StringMapping,q.Nodes,q.Leaf];class vshaxe_view_cache_Node extends v{constructor(e,t,i,n){super(e,i==q.Leaf?k.None:k.Collapsed);this.description=t;this.parent=n;this.kind=i;switch(i._hx_index){case 0:case 1:this.contextValue="reloadable";break;case 2:this.contextValue="reloadable";break;case 3:this.contextValue="reloadable";break;case 4:this.contextValue="copyable";break;case 5:this.contextValue="reloadable";break;case 6:this.contextValue="reloadable";break;case 7:this.contextValue="reloadable";break;case 9:this.contextValue="copyable";break;case 10:this.contextValue="copyable";break;default:}}setGotoPosition(e){this.gotoPosition=e;this.contextValue+="gotoable"}}vshaxe_view_cache_Node.__name__=true;class vshaxe_view_dependencies_DependencyTreeView{constructor(e,t){this.resolveTreeItem=undefined;this.getParent=function(e){return e.parent};this._onDidChangeTreeData=new m;this.refreshNeeded=true;this.dependencyNodes=[];let i=this;this.context=e;this.haxeConfiguration=t;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.autoRevealEnabled=s.workspace.getConfiguration("explorer").get("autoReveal",true);s.window.registerTreeDataProvider("haxe.dependencies",this);this.view=s.window.createTreeView("haxe.dependencies",{treeDataProvider:this,showCollapseAll:true});vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"refreshDependencies",$bind(this,this.refresh));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"revealActiveFileInSideBar",$bind(this,this.revealActiveFile));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"dependencies.openTextDocument",$bind(this,this.openTextDocument));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"dependencies.refresh",$bind(this,this.refresh));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"dependencies.openPreview",$bind(this,this.openPreview));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"dependencies.openToTheSide",$bind(this,this.openToTheSide));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"dependencies.revealInExplorer",$bind(this,this.revealInExplorer));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"dependencies.openInCommandPrompt",$bind(this,this.openInCommandPrompt));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"dependencies.findInFolder",$bind(this,this.findInFolder));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"dependencies.copyPath",$bind(this,this.copyPath));e.subscriptions.push(s.workspace.onDidChangeConfiguration(function(e){i.updateAutoReveal()}));e.subscriptions.push(s.window.onDidChangeActiveTextEditor(function(e){i.autoReveal()}));e.subscriptions.push(this.view.onDidChangeVisibility(function(e){i.autoReveal()}));e.subscriptions.push(t.didChangeEmitter.event($bind(this,this.onDidChangeHaxeConfiguration)))}onDidChangeHaxeConfiguration(e){this.refreshNeeded=true;this._onDidChangeTreeData.fire()}refresh(){let e=0;let t=this.dependencyNodes;while(e<t.length)t[e++].refresh();this.haxeConfiguration.invalidate()}updateNodes(e){let t=[];let i=0;let n=e;while(i<n.length){let e=n[i];++i;if(Lambda.find(t,function(t){return vshaxe_helper_PathHelper.areEqual(t.path,e.path)})!=null){continue}let r=Lambda.find(this.dependencyNodes,function(t){return t.path==e.path});if(r!=null){t.push(r);continue}let o=this.createNode(e);if(o!=null){t.push(o)}}vshaxe_view_dependencies_Node.sort(t);haxe_ds_ArraySort.sort(t,function(e,t){if(e.type==W.StandardLibrary){return 1}else if(t.type==W.StandardLibrary){return-1}return 0});return t}createNode(e){if(e==null){return null}let t=e.name;if(e.version!=null){t+=" ("+e.version+")"}return new vshaxe_view_dependencies_Node(null,t,e.path,e.name=="haxe"?W.StandardLibrary:W.Haxelib)}updateAutoReveal(){this.autoRevealEnabled=s.workspace.getConfiguration("explorer").get("autoReveal",true)}autoReveal(){let e=s.window.activeTextEditor;if(e==null||!this.view.visible||!this.autoRevealEnabled){return}this.reveal(e.document.fileName,false)}reveal(e,t){let i=false;let n=null;let r=this;n=function(o){let s=0;while(s<o.length){let a=o[s];++s;if(a.type!=W.File&&vshaxe_helper_PathHelper.containsFile(a.path,e)){n(a.get_children())}else if(vshaxe_helper_PathHelper.areEqual(a.path,e)){i=true;r.view.reveal(a,{select:true,focus:t});break}}};n(this.dependencyNodes);return i}getTreeItem(e){return e}getChildren(e){let t=this.haxeConfiguration.resolvedConfiguration;if(t==null){return[]}if(this.refreshNeeded){this.dependencyNodes=this.updateNodes(t.dependencies);this.refreshNeeded=false}if(e==null){return this.dependencyNodes}else{return e.get_children()}}revealActiveFile(){let e=s.window.activeTextEditor;if(e==null){return}this.getChildren();if(!this.reveal(e.document.fileName,true)){s.commands.executeCommand("workbench.files.action.showActiveFileInExplorer")}}openTextDocument(e){let t=(new Date).getTime();let i=this.previousSelection==null||this.previousSelection.node!=e||t-this.previousSelection.time>=500;s.workspace.openTextDocument(e.path).then(function(e){return s.window.showTextDocument(e,{preview:i})});this.previousSelection={node:e,time:t}}openPreview(e){s.commands.executeCommand("markdown.showPreview",e.path)}openToTheSide(e){if(e.resourceUri!=null){s.window.showTextDocument(e.resourceUri,{viewColumn:F.Three})}}revealInExplorer(e){let t='"'+e.path+'"';let i;switch(Sys.systemName()){case"Linux":i="xdg-open "+t;break;case"Mac":i="open "+t+" -R";break;case"Windows":i="explorer /select,"+t;break;default:throw haxe_Exception.thrown("unsupported OS")}u.spawnSync(i,{shell:true,stdio:"inherit"})}openInCommandPrompt(e){let t=e.path;if(e.type==W.File){t=haxe_io_Path.directory(e.path)}s.window.createTerminal({cwd:t}).show()}findInFolder(e){if(e.type==W.File){return}s.commands.executeCommand("workbench.action.findInFiles",{query:"",filesToInclude:vshaxe_helper_PathHelper.capitalizeDriveLetter(e.path)})}copyPath(e){s.env.clipboard.writeText(vshaxe_helper_PathHelper.capitalizeDriveLetter(e.path))}}vshaxe_view_dependencies_DependencyTreeView.__name__=true;var W=r["vshaxe.view.dependencies.NodeType"]={__ename__:true,__constructs__:null,File:{_hx_name:"File",_hx_index:0,__enum__:"vshaxe.view.dependencies.NodeType",toString:n},Folder:{_hx_name:"Folder",_hx_index:1,__enum__:"vshaxe.view.dependencies.NodeType",toString:n},Haxelib:{_hx_name:"Haxelib",_hx_index:2,__enum__:"vshaxe.view.dependencies.NodeType",toString:n},StandardLibrary:{_hx_name:"StandardLibrary",_hx_index:3,__enum__:"vshaxe.view.dependencies.NodeType",toString:n}};W.__constructs__=[W.File,W.Folder,W.Haxelib,W.StandardLibrary];class vshaxe_view_dependencies_Node extends v{constructor(e,t,i,n){super(t);this.parent=e;this.resourceUri=P.file(i);this.path=this.resourceUri.fsPath;if(n==null){n=sys_FileSystem.isDirectory(i)?W.Folder:W.File}this.type=n;if(this.type!=W.File){this.collapsibleState=k.Collapsed;this.contextValue="folder"}else{this.contextValue="file."+haxe_io_Path.extension(i);this.command={command:"haxe."+"dependencies.openTextDocument",arguments:[this],title:"Open File"}}}refresh(){if(this.type==W.File||this.get_children()==null){return}let e=[];let t=this;this.forEachChild(function(i,n){let r=null;if(t.get_children()!=null){r=Lambda.find(t.get_children(),function(e){return e.label==i})}if(r!=null){r.refresh();e.push(r)}else{e.push(new vshaxe_view_dependencies_Node(t,i,n))}});vshaxe_view_dependencies_Node.sort(e);this._children=e}get_children(){if(this._children==null){this._children=this.createChildren()}return this._children}createChildren(){if(this.type==W.File){return[]}let e=[];let t=this;this.forEachChild(function(i,n){e.push(new vshaxe_view_dependencies_Node(t,i,n))});vshaxe_view_dependencies_Node.sort(e);return e}forEachChild(e){let t=0;let i=l.readdirSync(this.path);while(t<i.length){let n=i[t];++t;if(!this.isExcluded(n)){e(n,""+this.path+"/"+n)}}}isExcluded(e){if(!(e==".git"||e==".svn"||e==".hg"||e=="CVS")){return e==".DS_Store"}else{return true}}static sort(e){haxe_ds_ArraySort.sort(e,function(e,t){let i=function(e,t){if(e==null||t==null){return 0}e=e.toLowerCase();t=t.toLowerCase();if(e<t){return-1}if(e>t){return 1}return 0};if(e.type!=W.File&&t.type!=W.File){return i(e.label,t.label)}else if(e.type!=W.File){return-1}else if(t.type!=W.File){return 1}else{return i(e.label,t.label)}})}}vshaxe_view_dependencies_Node.__name__=true;class vshaxe_view_methods_MethodTreeView{constructor(e,t){this.resolveTreeItem=undefined;this.getParent=function(e){return e.parent};this.enabled=false;this.queue=[];this.methods=[];this._onDidChangeTreeData=new m;this.context=e;this.server=t;this.onDidChangeTreeData=this._onDidChangeTreeData.event;let i="timers";this.viewType=i;s.commands.executeCommand("setContext","haxeMethodsViewType",Std.string(i));s.window.registerTreeDataProvider("haxe.methods",this);this.treeView=s.window.createTreeView("haxe.methods",{treeDataProvider:this,showCollapseAll:true});t._onDidRunMethod.event($bind(this,this.onDidRunMethod));t._onDidChangeRequestQueue.event($bind(this,this.onDidChangeRequestQueue));let n=$bind(this,this.switchTo);let r="queue";vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"methods.switchToQueue",function(){n(r)});let o=$bind(this,this.switchTo);let a="timers";vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"methods.switchToTimers",function(){o(a)});vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"methods.copy",$bind(this,this.copy));vshaxe_helper_ContextExtensions_registerHaxeCommand(e,"haxe."+"methods.track",$bind(this,this.track))}setMethodsViewType(e){this.viewType=e;s.commands.executeCommand("setContext","haxeMethodsViewType",Std.string(e))}switchTo(e){this.setMethodsViewType(e);this._onDidChangeTreeData.fire()}onDidRunMethod(e){if(!this.enabled){return}let t=e.response.timers;if(t==null){t=this.makeTimer("",0,[])}if(t.children!=null&&e.additionalTimes!=null&&e.response.timestamp!=null){t.children.push(this.createAdditionalTimers(e.additionalTimes,e.response.timestamp))}let i=e.method;let n=this.methods;let r=[];let o=0;while(o<n.length){let e=n[o];++o;if(e.method!=i){r.push(e)}}this.methods=r;let s=new vshaxe_view_methods_Node(this.context,null,t,e.kind,e.method,e.debugInfo);this.methods.push(s);this.methods.sort(function(e,t){return Reflect.compare(e.method,t.method)});if(this.viewType=="timers"){this._onDidChangeTreeData.fire();if(this.treeView.visible){this.treeView.reveal(s,{select:true})}}}createAdditionalTimers(e,t){let i=e.arrival-t*1e3;let n=e.beforeProcessing-e.arrival;let r=e.afterProcessing-e.beforeProcessing;return this.makeTimer("vshaxe",i+n+r,[this.makeTimer("display call",e.arrival-e.beforeCall),this.makeTimer("transmission",i),this.makeTimer("parsing",n),this.makeTimer("processing",r)])}makeTimer(e,t,i){let n=new Date(t);return{name:e,time:n.getSeconds()+n.getMilliseconds()/1e3,children:i}}onDidChangeRequestQueue(e){this.queue=[];let t=0;let i=e.length;while(t<i){let i=t++;this.queue.push(new vshaxe_view_methods_Node(this.context,null,null,null,e[i],null,i==null?"null":""+i))}if(this.viewType=="queue"){this._onDidChangeTreeData.fire()}}getTreeItem(e){return e}getChildren(e){if(this.viewType=="queue"){return this.queue}if(e==null){return this.methods}else{return e.children}}copy(e){let t=s.env.clipboard;let i;if(e==null){let e=this.methods;let t=new Array(e.length);let n=0;let r=e.length;while(n<r){let i=n++;t[i]=e[i].toString()}i=t.join("\n\n")}else{i=e.toString()}t.writeText(i)}track(e){if(e!=null){s.commands.executeCommand("vshaxeDebugTools.methodResultsView.track",e.method)}}}vshaxe_view_methods_MethodTreeView.__name__=true;class vshaxe_view_methods_Node extends v{constructor(e,t,i,n,r,o,s){if(s==null){s=""}super("");this.context=e;this.parent=t;this.timer=i;this.kind=n;this.method=r;this.debugInfo=o;this.children=[];this.name=this.formatName();this.label=this.formatLabel();this.tooltip=this.formatTooltip();this.id=s+">"+this.name;if(i==null||i.children==null||n=="Lsp"){this.collapsibleState=k.None}else{let t=i.children;let o=e;let s=this;let a=n;let u=r;let l=null;let h=this.id;let c=function(e){return new vshaxe_view_methods_Node(o,s,e,a,u,l,h)};let f=new Array(t.length);let d=0;let m=t.length;while(d<m){let e=d++;f[e]=c(t[e])}this.children=f;this.collapsibleState=k.Collapsed}if(this.parent==null){let t=n=="Lsp"?"lsp-method":"haxe-method";this.iconPath={light:e.asAbsolutePath("images/light/"+t+".svg"),dark:e.asAbsolutePath("images/dark/"+t+".svg")}}}formatName(){let e=this.parent==null||this.timer==null?this.method:this.timer.name;if(this.timer!=null&&this.timer.info!=null&&this.timer.info!=""){e=""+this.timer.info+"."+e}return e}formatLabel(){if(this.timer==null||this.kind=="Lsp"){return this.name}let e=this.truncate(this.timer.time,5);let t=this.timer.percentTotal!=null?this.truncate(this.timer.percentTotal,4):null;let i=""+this.name+" - "+e+"s";if(this.parent!=null&&t!=null){i+=" ("+t+"%) ["+this.timer.calls+" call"+(this.timer.calls==1?"":"s")+"]"}if(this.debugInfo!=null){i+=" ["+this.debugInfo+"]"}return i}formatTooltip(){if(this.timer==null){return null}let e=new Date;return""+("["+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+"]")+" "+(this.timer.calls!=null?""+this.timer.calls+" calls ":"")+"- "+this.truncate(this.timer.time,7)+"s"}truncate(e,t){return HxOverrides.substr(e==null?"null":""+e,0,t)}toString(e){if(e==null){e=""}let t=e+(this.label==null?"":this.label);if(this.children!=null){let i=this.children;let n=new Array(i.length);let r=0;let o=i.length;while(r<o){let t=r++;n[t]=i[t].toString(e+"  ")}t+="\n"+n.join("\n")}return t}}vshaxe_view_methods_Node.__name__=true;function $getIterator(e){if(e instanceof Array)return new haxe_iterators_ArrayIterator(e);else return e.iterator()}function $bind(e,i){if(i==null)return null;if(i.__id__==null)i.__id__=t.$haxeUID++;var n;if(e.hx__closures__==null)e.hx__closures__={};else n=e.hx__closures__[i.__id__];if(n==null){n=i.bind(e);e.hx__closures__[i.__id__]=n}return n}t.$haxeUID|=0;if(typeof performance!="undefined"?typeof performance.now=="function":false){HxOverrides.now=performance.now.bind(performance)}if(String.fromCodePoint==null)String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode((e>>10)+55232)+String.fromCharCode((e&1023)+56320)};{String.__name__=true;Array.__name__=true;Date.__name__="Date"}haxe_ds_ObjectMap.count=0;js_Boot.__toStr={}.toString;sys_io_File.copyBuf=c.alloc(65536);vshaxe_AutoIndentation.lineEndsWithOpenBracket=new EReg("[([{][\t ]*(//.*|/[*].*[*]/[\t ]*)?$","");vshaxe_configuration_ConfigurationWrapper._hx_skip_constructor=false;vshaxe_configuration_HaxeExecutable.SYSTEM_KEY=function(e){var t;switch(Sys.systemName()){case"Mac":t="osx";break;case"Windows":t="windows";break;default:t="linux"}return t}(this);vshaxe_configuration_HaxeInstallation.PreviousHaxeInstallationProviderKey=vshaxe_HaxeMementoKey._new("previousHaxeInstallationProvider");vshaxe_display_DisplayArgumentsSelector.statusBarWarningThemeColor=new E("errorForeground");vshaxe_display_HaxeDisplayArgumentsProvider.ConfigurationIndexKey=vshaxe_HaxeMementoKey._new("displayConfigurationIndex");vshaxe_server_LanguageServer.DontShowOldPreviewHintAgainKey=vshaxe_HaxeMementoKey._new("dontShowHaxe4HintAgain")})(true?t:undefined,typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this)},622:function(e){e.exports=require("path")},630:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});function boolean(e){return e===true||e===false}t.boolean=boolean;function string(e){return typeof e==="string"||e instanceof String}t.string=string;function number(e){return typeof e==="number"||e instanceof Number}t.number=number;function error(e){return e instanceof Error}t.error=error;function func(e){return typeof e==="function"}t.func=func;function array(e){return Array.isArray(e)}t.array=array;function stringArray(e){return array(e)&&e.every(e=>string(e))}t.stringArray=stringArray},631:function(e){e.exports=require("net")},643:function(e,t,i){"use strict";function __export(e){for(var i in e)if(!t.hasOwnProperty(i))t[i]=e[i]}Object.defineProperty(t,"__esModule",{value:true});const n=i(129);const r=i(747);const o=i(280);const s=i(369);const a=i(480);const u=i(719);const l=i(988);const h=i(397);const c=i(65);const f=i(405);const d=i(422);const m=i(155);const p=i(258);const g=i(794);const y=i(960);const C=i(839);const x=i(389);const w=i(730);const S=i(184);__export(i(369));const R="^1.42.0";var D;(function(e){function is(e){return w.string(e.command)}e.is=is})(D||(D={}));var b;(function(e){e[e["stdio"]=0]="stdio";e[e["ipc"]=1]="ipc";e[e["pipe"]=2]="pipe";e[e["socket"]=3]="socket"})(b=t.TransportKind||(t.TransportKind={}));var _;(function(e){function isSocket(e){let t=e;return t&&t.kind===b.socket&&w.number(t.port)}e.isSocket=isSocket})(_||(_={}));var T;(function(e){function is(e){return w.string(e.module)}e.is=is})(T||(T={}));var E;(function(e){function is(e){let t=e;return t&&t.writer!==void 0&&t.reader!==void 0}e.is=is})(E||(E={}));var v;(function(e){function is(e){let t=e;return t&&t.process!==void 0&&typeof t.detached==="boolean"}e.is=is})(v||(v={}));class LanguageClient extends s.BaseLanguageClient{constructor(e,t,i,n,r){let o;let s;let a;let u;let l;if(w.string(t)){o=e;s=t;a=i;u=n;l=!!r}else{o=e.toLowerCase();s=e;a=t;u=i;l=n}if(l===void 0){l=false}super(o,s,u);this._serverOptions=a;this._forceDebug=l;try{this.checkVersion()}catch(e){if(w.string(e.message)){this.outputChannel.appendLine(e.message)}throw e}}checkVersion(){let e=o.parse(a.version);if(!e){throw new Error(`No valid VS Code version detected. Version string is: ${a.version}`)}if(e.prerelease&&e.prerelease.length>0){e.prerelease=[]}if(!o.satisfies(e,R)){throw new Error(`The language client requires VS Code version ${R} but received version ${a.version}`)}}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=undefined;if(this._isDetached===void 0||!this._isDetached){this.checkProcessDied(e)}this._isDetached=undefined}})}checkProcessDied(e){if(!e){return}setTimeout(()=>{try{process.kill(e.pid,0);S.terminate(e)}catch(e){}},2e3)}handleConnectionClosed(){this._serverProcess=undefined;super.handleConnectionClosed()}createMessageTransports(e){function getEnvironment(e,t){if(!e&&!t){return undefined}let i=Object.create(null);Object.keys(process.env).forEach(e=>i[e]=process.env[e]);if(t){i["ELECTRON_RUN_AS_NODE"]="1";i["ELECTRON_NO_ASAR"]="1"}if(e){Object.keys(e).forEach(t=>i[t]=e[t])}return i}const t=["--debug=","--debug-brk=","--inspect=","--inspect-brk="];const i=["--debug","--debug-brk","--inspect","--inspect-brk"];function startedInDebugMode(){let e=process.execArgv;if(e){return e.some(e=>{return t.some(t=>e.startsWith(t))||i.some(t=>e===t)})}return false}function assertStdio(e){if(e.stdin===null||e.stdout===null||e.stderr===null){throw new Error("Process created without stdio streams")}}let r=this._serverOptions;if(w.func(r)){return r().then(t=>{if(s.MessageTransports.is(t)){this._isDetached=!!t.detached;return t}else if(E.is(t)){this._isDetached=!!t.detached;return{reader:new u.StreamMessageReader(t.reader),writer:new u.StreamMessageWriter(t.writer)}}else{let i;if(v.is(t)){i=t.process;this._isDetached=t.detached}else{i=t;this._isDetached=false}i.stderr.on("data",t=>this.outputChannel.append(w.string(t)?t:t.toString(e)));return{reader:new u.StreamMessageReader(i.stdout),writer:new u.StreamMessageWriter(i.stdin)}}})}let o;let a=r;if(a.run||a.debug){if(this._forceDebug||startedInDebugMode()){o=a.debug}else{o=a.run}}else{o=r}return this._getServerWorkingDir(o.options).then(t=>{if(T.is(o)&&o.module){let i=o;let r=i.transport||b.stdio;if(i.runtime){let o=[];let s=i.options||Object.create(null);if(s.execArgv){s.execArgv.forEach(e=>o.push(e))}o.push(i.module);if(i.args){i.args.forEach(e=>o.push(e))}let a=Object.create(null);a.cwd=t;a.env=getEnvironment(s.env,false);let l=undefined;if(r===b.ipc){a.stdio=[null,null,null,"ipc"];o.push("--node-ipc")}else if(r===b.stdio){o.push("--stdio")}else if(r===b.pipe){l=u.generateRandomPipeName();o.push(`--pipe=${l}`)}else if(_.isSocket(r)){o.push(`--socket=${r.port}`)}o.push(`--clientProcessId=${process.pid.toString()}`);if(r===b.ipc||r===b.stdio){let t=n.spawn(i.runtime,o,a);if(!t||!t.pid){return Promise.reject(`Launching server using runtime ${i.runtime} failed.`)}this._serverProcess=t;t.stderr.on("data",t=>this.outputChannel.append(w.string(t)?t:t.toString(e)));if(r===b.ipc){t.stdout.on("data",t=>this.outputChannel.append(w.string(t)?t:t.toString(e)));return Promise.resolve({reader:new u.IPCMessageReader(t),writer:new u.IPCMessageWriter(t)})}else{return Promise.resolve({reader:new u.StreamMessageReader(t.stdout),writer:new u.StreamMessageWriter(t.stdin)})}}else if(r===b.pipe){return u.createClientPipeTransport(l).then(t=>{let r=n.spawn(i.runtime,o,a);if(!r||!r.pid){return Promise.reject(`Launching server using runtime ${i.runtime} failed.`)}this._serverProcess=r;r.stderr.on("data",t=>this.outputChannel.append(w.string(t)?t:t.toString(e)));r.stdout.on("data",t=>this.outputChannel.append(w.string(t)?t:t.toString(e)));return t.onConnected().then(e=>{return{reader:e[0],writer:e[1]}})})}else if(_.isSocket(r)){return u.createClientSocketTransport(r.port).then(t=>{let r=n.spawn(i.runtime,o,a);if(!r||!r.pid){return Promise.reject(`Launching server using runtime ${i.runtime} failed.`)}this._serverProcess=r;r.stderr.on("data",t=>this.outputChannel.append(w.string(t)?t:t.toString(e)));r.stdout.on("data",t=>this.outputChannel.append(w.string(t)?t:t.toString(e)));return t.onConnected().then(e=>{return{reader:e[0],writer:e[1]}})})}}else{let o=undefined;return new Promise((s,a)=>{let l=i.args&&i.args.slice()||[];if(r===b.ipc){l.push("--node-ipc")}else if(r===b.stdio){l.push("--stdio")}else if(r===b.pipe){o=u.generateRandomPipeName();l.push(`--pipe=${o}`)}else if(_.isSocket(r)){l.push(`--socket=${r.port}`)}l.push(`--clientProcessId=${process.pid.toString()}`);let h=i.options||Object.create(null);h.env=getEnvironment(h.env,true);h.execArgv=h.execArgv||[];h.cwd=t;h.silent=true;if(r===b.ipc||r===b.stdio){let t=n.fork(i.module,l||[],h);assertStdio(t);this._serverProcess=t;t.stderr.on("data",t=>this.outputChannel.append(w.string(t)?t:t.toString(e)));if(r===b.ipc){t.stdout.on("data",t=>this.outputChannel.append(w.string(t)?t:t.toString(e)));s({reader:new u.IPCMessageReader(this._serverProcess),writer:new u.IPCMessageWriter(this._serverProcess)})}else{s({reader:new u.StreamMessageReader(t.stdout),writer:new u.StreamMessageWriter(t.stdin)})}}else if(r===b.pipe){u.createClientPipeTransport(o).then(t=>{let r=n.fork(i.module,l||[],h);assertStdio(r);this._serverProcess=r;r.stderr.on("data",t=>this.outputChannel.append(w.string(t)?t:t.toString(e)));r.stdout.on("data",t=>this.outputChannel.append(w.string(t)?t:t.toString(e)));t.onConnected().then(e=>{s({reader:e[0],writer:e[1]})})})}else if(_.isSocket(r)){u.createClientSocketTransport(r.port).then(t=>{let r=n.fork(i.module,l||[],h);assertStdio(r);this._serverProcess=r;r.stderr.on("data",t=>this.outputChannel.append(w.string(t)?t:t.toString(e)));r.stdout.on("data",t=>this.outputChannel.append(w.string(t)?t:t.toString(e)));t.onConnected().then(e=>{s({reader:e[0],writer:e[1]})})})}})}}else if(D.is(o)&&o.command){let i=o;let r=i.args||[];let s=Object.assign({},i.options);s.cwd=s.cwd||t;let a=n.spawn(i.command,r,s);if(!a||!a.pid){return Promise.reject(`Launching server using command ${i.command} failed.`)}a.stderr.on("data",t=>this.outputChannel.append(w.string(t)?t:t.toString(e)));this._serverProcess=a;this._isDetached=!!s.detached;return Promise.resolve({reader:new u.StreamMessageReader(a.stdout),writer:new u.StreamMessageWriter(a.stdin)})}return Promise.reject(new Error(`Unsupported server configuration `+JSON.stringify(r,null,4)))})}registerProposedFeatures(){this.registerFeatures(k.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures();this.registerFeature(new h.ConfigurationFeature(this));this.registerFeature(new f.TypeDefinitionFeature(this));this.registerFeature(new c.ImplementationFeature(this));this.registerFeature(new l.ColorProviderFeature(this));this.registerFeature(new d.WorkspaceFoldersFeature(this));this.registerFeature(new m.FoldingRangeFeature(this));this.registerFeature(new p.DeclarationFeature(this));this.registerFeature(new g.SelectionRangeFeature(this));this.registerFeature(new y.ProgressFeature(this))}_mainGetRootPath(){let e=a.workspace.workspaceFolders;if(!e||e.length===0){return undefined}let t=e[0];if(t.uri.scheme==="file"){return t.uri.fsPath}return undefined}_getServerWorkingDir(e){let t=e&&e.cwd;if(!t){t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()}if(t){return new Promise(e=>{r.lstat(t,(i,n)=>{e(!i&&n.isDirectory()?t:undefined)})})}return Promise.resolve(undefined)}}t.LanguageClient=LanguageClient;class SettingMonitor{constructor(e,t){this._client=e;this._setting=t;this._listeners=[]}start(){a.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners);this.onDidChangeConfiguration();return new a.Disposable(()=>{if(this._client.needsStop()){this._client.stop()}})}onDidChangeConfiguration(){let e=this._setting.indexOf(".");let t=e>=0?this._setting.substr(0,e):this._setting;let i=e>=0?this._setting.substr(e+1):undefined;let n=i?a.workspace.getConfiguration(t).get(i,false):a.workspace.getConfiguration(t);if(n&&this._client.needsStart()){this._client.start()}else if(!n&&this._client.needsStop()){this._client.stop()}}}t.SettingMonitor=SettingMonitor;var k;(function(e){function createAll(e){let t=[new C.CallHierarchyFeature(e),new x.SemanticTokensFeature(e)];return t}e.createAll=createAll})(k=t.ProposedFeatures||(t.ProposedFeatures={}))},709:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(480);class ProtocolDocumentLink extends n.DocumentLink{constructor(e,t){super(e,t)}}t.default=ProtocolDocumentLink},719:function(e,t,i){"use strict";function __export(e){for(var i in e)if(!t.hasOwnProperty(i))t[i]=e[i]}Object.defineProperty(t,"__esModule",{value:true});const n=i(993);t.ErrorCodes=n.ErrorCodes;t.ResponseError=n.ResponseError;t.CancellationToken=n.CancellationToken;t.CancellationTokenSource=n.CancellationTokenSource;t.Disposable=n.Disposable;t.Event=n.Event;t.Emitter=n.Emitter;t.Trace=n.Trace;t.TraceFormat=n.TraceFormat;t.SetTraceNotification=n.SetTraceNotification;t.LogTraceNotification=n.LogTraceNotification;t.RequestType=n.RequestType;t.RequestType0=n.RequestType0;t.NotificationType=n.NotificationType;t.NotificationType0=n.NotificationType0;t.MessageReader=n.MessageReader;t.MessageWriter=n.MessageWriter;t.ConnectionStrategy=n.ConnectionStrategy;t.StreamMessageReader=n.StreamMessageReader;t.StreamMessageWriter=n.StreamMessageWriter;t.IPCMessageReader=n.IPCMessageReader;t.IPCMessageWriter=n.IPCMessageWriter;t.createClientPipeTransport=n.createClientPipeTransport;t.createServerPipeTransport=n.createServerPipeTransport;t.generateRandomPipeName=n.generateRandomPipeName;t.createClientSocketTransport=n.createClientSocketTransport;t.createServerSocketTransport=n.createServerSocketTransport;t.ProgressType=n.ProgressType;__export(i(732));__export(i(855));const r=i(825);const o=i(433);var s;(function(e){let t;(function(e){e.method=r.CallHierarchyPrepareRequest.method;e.type=r.CallHierarchyPrepareRequest.type})(t=e.CallHierarchyPrepareRequest||(e.CallHierarchyPrepareRequest={}));let i;(function(e){e.method=r.CallHierarchyIncomingCallsRequest.method;e.type=r.CallHierarchyIncomingCallsRequest.type})(i=e.CallHierarchyIncomingCallsRequest||(e.CallHierarchyIncomingCallsRequest={}));let n;(function(e){e.method=r.CallHierarchyOutgoingCallsRequest.method;e.type=r.CallHierarchyOutgoingCallsRequest.type})(n=e.CallHierarchyOutgoingCallsRequest||(e.CallHierarchyOutgoingCallsRequest={}));e.SemanticTokenTypes=o.SemanticTokenTypes;e.SemanticTokenModifiers=o.SemanticTokenModifiers;e.SemanticTokens=o.SemanticTokens;let s;(function(e){e.method=o.SemanticTokensRequest.method;e.type=o.SemanticTokensRequest.type})(s=e.SemanticTokensRequest||(e.SemanticTokensRequest={}));let a;(function(e){e.method=o.SemanticTokensEditsRequest.method;e.type=o.SemanticTokensEditsRequest.type})(a=e.SemanticTokensEditsRequest||(e.SemanticTokensEditsRequest={}));let u;(function(e){e.method=o.SemanticTokensRangeRequest.method;e.type=o.SemanticTokensRangeRequest.type})(u=e.SemanticTokensRangeRequest||(e.SemanticTokensRangeRequest={}))})(s=t.Proposed||(t.Proposed={}));function createProtocolConnection(e,t,i,r){return n.createMessageConnection(e,t,i,r)}t.createProtocolConnection=createProtocolConnection},730:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});function boolean(e){return e===true||e===false}t.boolean=boolean;function string(e){return typeof e==="string"||e instanceof String}t.string=string;function number(e){return typeof e==="number"||e instanceof Number}t.number=number;function error(e){return e instanceof Error}t.error=error;function func(e){return typeof e==="function"}t.func=func;function array(e){return Array.isArray(e)}t.array=array;function stringArray(e){return array(e)&&e.every(e=>string(e))}t.stringArray=stringArray;function typedArray(e,t){return Array.isArray(e)&&e.every(t)}t.typedArray=typedArray;function thenable(e){return e&&func(e.then)}t.thenable=thenable;function asPromise(e){if(e instanceof Promise){return e}else if(thenable(e)){return new Promise((t,i)=>{e.then(e=>t(e),e=>i(e))})}else{return Promise.resolve(e)}}t.asPromise=asPromise},732:function(e,t){(function(i){if(true&&typeof e.exports==="object"){var n=i(require,t);if(n!==undefined)e.exports=n}else if(typeof define==="function"&&define.amd){define(["require","exports"],i)}})(function(){"use strict";Object.defineProperty(t,"__esModule",{value:true});var e;(function(e){function create(e,t){return{line:e,character:t}}e.create=create;function is(e){var t=e;return Y.objectLiteral(t)&&Y.number(t.line)&&Y.number(t.character)}e.is=is})(e=t.Position||(t.Position={}));var i;(function(t){function create(t,i,n,r){if(Y.number(t)&&Y.number(i)&&Y.number(n)&&Y.number(r)){return{start:e.create(t,i),end:e.create(n,r)}}else if(e.is(t)&&e.is(i)){return{start:t,end:i}}else{throw new Error("Range#create called with invalid arguments["+t+", "+i+", "+n+", "+r+"]")}}t.create=create;function is(t){var i=t;return Y.objectLiteral(i)&&e.is(i.start)&&e.is(i.end)}t.is=is})(i=t.Range||(t.Range={}));var n;(function(e){function create(e,t){return{uri:e,range:t}}e.create=create;function is(e){var t=e;return Y.defined(t)&&i.is(t.range)&&(Y.string(t.uri)||Y.undefined(t.uri))}e.is=is})(n=t.Location||(t.Location={}));var r;(function(e){function create(e,t,i,n){return{targetUri:e,targetRange:t,targetSelectionRange:i,originSelectionRange:n}}e.create=create;function is(e){var t=e;return Y.defined(t)&&i.is(t.targetRange)&&Y.string(t.targetUri)&&(i.is(t.targetSelectionRange)||Y.undefined(t.targetSelectionRange))&&(i.is(t.originSelectionRange)||Y.undefined(t.originSelectionRange))}e.is=is})(r=t.LocationLink||(t.LocationLink={}));var o;(function(e){function create(e,t,i,n){return{red:e,green:t,blue:i,alpha:n}}e.create=create;function is(e){var t=e;return Y.number(t.red)&&Y.number(t.green)&&Y.number(t.blue)&&Y.number(t.alpha)}e.is=is})(o=t.Color||(t.Color={}));var s;(function(e){function create(e,t){return{range:e,color:t}}e.create=create;function is(e){var t=e;return i.is(t.range)&&o.is(t.color)}e.is=is})(s=t.ColorInformation||(t.ColorInformation={}));var a;(function(e){function create(e,t,i){return{label:e,textEdit:t,additionalTextEdits:i}}e.create=create;function is(e){var t=e;return Y.string(t.label)&&(Y.undefined(t.textEdit)||p.is(t))&&(Y.undefined(t.additionalTextEdits)||Y.typedArray(t.additionalTextEdits,p.is))}e.is=is})(a=t.ColorPresentation||(t.ColorPresentation={}));var u;(function(e){e["Comment"]="comment";e["Imports"]="imports";e["Region"]="region"})(u=t.FoldingRangeKind||(t.FoldingRangeKind={}));var l;(function(e){function create(e,t,i,n,r){var o={startLine:e,endLine:t};if(Y.defined(i)){o.startCharacter=i}if(Y.defined(n)){o.endCharacter=n}if(Y.defined(r)){o.kind=r}return o}e.create=create;function is(e){var t=e;return Y.number(t.startLine)&&Y.number(t.startLine)&&(Y.undefined(t.startCharacter)||Y.number(t.startCharacter))&&(Y.undefined(t.endCharacter)||Y.number(t.endCharacter))&&(Y.undefined(t.kind)||Y.string(t.kind))}e.is=is})(l=t.FoldingRange||(t.FoldingRange={}));var h;(function(e){function create(e,t){return{location:e,message:t}}e.create=create;function is(e){var t=e;return Y.defined(t)&&n.is(t.location)&&Y.string(t.message)}e.is=is})(h=t.DiagnosticRelatedInformation||(t.DiagnosticRelatedInformation={}));var c;(function(e){e.Error=1;e.Warning=2;e.Information=3;e.Hint=4})(c=t.DiagnosticSeverity||(t.DiagnosticSeverity={}));var f;(function(e){e.Unnecessary=1;e.Deprecated=2})(f=t.DiagnosticTag||(t.DiagnosticTag={}));var d;(function(e){function create(e,t,i,n,r,o){var s={range:e,message:t};if(Y.defined(i)){s.severity=i}if(Y.defined(n)){s.code=n}if(Y.defined(r)){s.source=r}if(Y.defined(o)){s.relatedInformation=o}return s}e.create=create;function is(e){var t=e;return Y.defined(t)&&i.is(t.range)&&Y.string(t.message)&&(Y.number(t.severity)||Y.undefined(t.severity))&&(Y.number(t.code)||Y.string(t.code)||Y.undefined(t.code))&&(Y.string(t.source)||Y.undefined(t.source))&&(Y.undefined(t.relatedInformation)||Y.typedArray(t.relatedInformation,h.is))}e.is=is})(d=t.Diagnostic||(t.Diagnostic={}));var m;(function(e){function create(e,t){var i=[];for(var n=2;n<arguments.length;n++){i[n-2]=arguments[n]}var r={title:e,command:t};if(Y.defined(i)&&i.length>0){r.arguments=i}return r}e.create=create;function is(e){var t=e;return Y.defined(t)&&Y.string(t.title)&&Y.string(t.command)}e.is=is})(m=t.Command||(t.Command={}));var p;(function(e){function replace(e,t){return{range:e,newText:t}}e.replace=replace;function insert(e,t){return{range:{start:e,end:e},newText:t}}e.insert=insert;function del(e){return{range:e,newText:""}}e.del=del;function is(e){var t=e;return Y.objectLiteral(t)&&Y.string(t.newText)&&i.is(t.range)}e.is=is})(p=t.TextEdit||(t.TextEdit={}));var g;(function(e){function create(e,t){return{textDocument:e,edits:t}}e.create=create;function is(e){var t=e;return Y.defined(t)&&b.is(t.textDocument)&&Array.isArray(t.edits)}e.is=is})(g=t.TextDocumentEdit||(t.TextDocumentEdit={}));var y;(function(e){function create(e,t){var i={kind:"create",uri:e};if(t!==void 0&&(t.overwrite!==void 0||t.ignoreIfExists!==void 0)){i.options=t}return i}e.create=create;function is(e){var t=e;return t&&t.kind==="create"&&Y.string(t.uri)&&(t.options===void 0||(t.options.overwrite===void 0||Y.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||Y.boolean(t.options.ignoreIfExists)))}e.is=is})(y=t.CreateFile||(t.CreateFile={}));var C;(function(e){function create(e,t,i){var n={kind:"rename",oldUri:e,newUri:t};if(i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)){n.options=i}return n}e.create=create;function is(e){var t=e;return t&&t.kind==="rename"&&Y.string(t.oldUri)&&Y.string(t.newUri)&&(t.options===void 0||(t.options.overwrite===void 0||Y.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||Y.boolean(t.options.ignoreIfExists)))}e.is=is})(C=t.RenameFile||(t.RenameFile={}));var x;(function(e){function create(e,t){var i={kind:"delete",uri:e};if(t!==void 0&&(t.recursive!==void 0||t.ignoreIfNotExists!==void 0)){i.options=t}return i}e.create=create;function is(e){var t=e;return t&&t.kind==="delete"&&Y.string(t.uri)&&(t.options===void 0||(t.options.recursive===void 0||Y.boolean(t.options.recursive))&&(t.options.ignoreIfNotExists===void 0||Y.boolean(t.options.ignoreIfNotExists)))}e.is=is})(x=t.DeleteFile||(t.DeleteFile={}));var w;(function(e){function is(e){var t=e;return t&&(t.changes!==void 0||t.documentChanges!==void 0)&&(t.documentChanges===void 0||t.documentChanges.every(function(e){if(Y.string(e.kind)){return y.is(e)||C.is(e)||x.is(e)}else{return g.is(e)}}))}e.is=is})(w=t.WorkspaceEdit||(t.WorkspaceEdit={}));var S=function(){function TextEditChangeImpl(e){this.edits=e}TextEditChangeImpl.prototype.insert=function(e,t){this.edits.push(p.insert(e,t))};TextEditChangeImpl.prototype.replace=function(e,t){this.edits.push(p.replace(e,t))};TextEditChangeImpl.prototype.delete=function(e){this.edits.push(p.del(e))};TextEditChangeImpl.prototype.add=function(e){this.edits.push(e)};TextEditChangeImpl.prototype.all=function(){return this.edits};TextEditChangeImpl.prototype.clear=function(){this.edits.splice(0,this.edits.length)};return TextEditChangeImpl}();var R=function(){function WorkspaceChange(e){var t=this;this._textEditChanges=Object.create(null);if(e){this._workspaceEdit=e;if(e.documentChanges){e.documentChanges.forEach(function(e){if(g.is(e)){var i=new S(e.edits);t._textEditChanges[e.textDocument.uri]=i}})}else if(e.changes){Object.keys(e.changes).forEach(function(i){var n=new S(e.changes[i]);t._textEditChanges[i]=n})}}}Object.defineProperty(WorkspaceChange.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:true,configurable:true});WorkspaceChange.prototype.getTextEditChange=function(e){if(b.is(e)){if(!this._workspaceEdit){this._workspaceEdit={documentChanges:[]}}if(!this._workspaceEdit.documentChanges){throw new Error("Workspace edit is not configured for document changes.")}var t=e;var i=this._textEditChanges[t.uri];if(!i){var n=[];var r={textDocument:t,edits:n};this._workspaceEdit.documentChanges.push(r);i=new S(n);this._textEditChanges[t.uri]=i}return i}else{if(!this._workspaceEdit){this._workspaceEdit={changes:Object.create(null)}}if(!this._workspaceEdit.changes){throw new Error("Workspace edit is not configured for normal text edit changes.")}var i=this._textEditChanges[e];if(!i){var n=[];this._workspaceEdit.changes[e]=n;i=new S(n);this._textEditChanges[e]=i}return i}};WorkspaceChange.prototype.createFile=function(e,t){this.checkDocumentChanges();this._workspaceEdit.documentChanges.push(y.create(e,t))};WorkspaceChange.prototype.renameFile=function(e,t,i){this.checkDocumentChanges();this._workspaceEdit.documentChanges.push(C.create(e,t,i))};WorkspaceChange.prototype.deleteFile=function(e,t){this.checkDocumentChanges();this._workspaceEdit.documentChanges.push(x.create(e,t))};WorkspaceChange.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges){throw new Error("Workspace edit is not configured for document changes.")}};return WorkspaceChange}();t.WorkspaceChange=R;var D;(function(e){function create(e){return{uri:e}}e.create=create;function is(e){var t=e;return Y.defined(t)&&Y.string(t.uri)}e.is=is})(D=t.TextDocumentIdentifier||(t.TextDocumentIdentifier={}));var b;(function(e){function create(e,t){return{uri:e,version:t}}e.create=create;function is(e){var t=e;return Y.defined(t)&&Y.string(t.uri)&&(t.version===null||Y.number(t.version))}e.is=is})(b=t.VersionedTextDocumentIdentifier||(t.VersionedTextDocumentIdentifier={}));var _;(function(e){function create(e,t,i,n){return{uri:e,languageId:t,version:i,text:n}}e.create=create;function is(e){var t=e;return Y.defined(t)&&Y.string(t.uri)&&Y.string(t.languageId)&&Y.number(t.version)&&Y.string(t.text)}e.is=is})(_=t.TextDocumentItem||(t.TextDocumentItem={}));var T;(function(e){e.PlainText="plaintext";e.Markdown="markdown"})(T=t.MarkupKind||(t.MarkupKind={}));(function(e){function is(t){var i=t;return i===e.PlainText||i===e.Markdown}e.is=is})(T=t.MarkupKind||(t.MarkupKind={}));var E;(function(e){function is(e){var t=e;return Y.objectLiteral(e)&&T.is(t.kind)&&Y.string(t.value)}e.is=is})(E=t.MarkupContent||(t.MarkupContent={}));var v;(function(e){e.Text=1;e.Method=2;e.Function=3;e.Constructor=4;e.Field=5;e.Variable=6;e.Class=7;e.Interface=8;e.Module=9;e.Property=10;e.Unit=11;e.Value=12;e.Enum=13;e.Keyword=14;e.Snippet=15;e.Color=16;e.File=17;e.Reference=18;e.Folder=19;e.EnumMember=20;e.Constant=21;e.Struct=22;e.Event=23;e.Operator=24;e.TypeParameter=25})(v=t.CompletionItemKind||(t.CompletionItemKind={}));var k;(function(e){e.PlainText=1;e.Snippet=2})(k=t.InsertTextFormat||(t.InsertTextFormat={}));var P;(function(e){e.Deprecated=1})(P=t.CompletionItemTag||(t.CompletionItemTag={}));var F;(function(e){function create(e){return{label:e}}e.create=create})(F=t.CompletionItem||(t.CompletionItem={}));var I;(function(e){function create(e,t){return{items:e?e:[],isIncomplete:!!t}}e.create=create})(I=t.CompletionList||(t.CompletionList={}));var L;(function(e){function fromPlainText(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=fromPlainText;function is(e){var t=e;return Y.string(t)||Y.objectLiteral(t)&&Y.string(t.language)&&Y.string(t.value)}e.is=is})(L=t.MarkedString||(t.MarkedString={}));var A;(function(e){function is(e){var t=e;return!!t&&Y.objectLiteral(t)&&(E.is(t.contents)||L.is(t.contents)||Y.typedArray(t.contents,L.is))&&(e.range===void 0||i.is(e.range))}e.is=is})(A=t.Hover||(t.Hover={}));var O;(function(e){function create(e,t){return t?{label:e,documentation:t}:{label:e}}e.create=create})(O=t.ParameterInformation||(t.ParameterInformation={}));var N;(function(e){function create(e,t){var i=[];for(var n=2;n<arguments.length;n++){i[n-2]=arguments[n]}var r={label:e};if(Y.defined(t)){r.documentation=t}if(Y.defined(i)){r.parameters=i}else{r.parameters=[]}return r}e.create=create})(N=t.SignatureInformation||(t.SignatureInformation={}));var H;(function(e){e.Text=1;e.Read=2;e.Write=3})(H=t.DocumentHighlightKind||(t.DocumentHighlightKind={}));var q;(function(e){function create(e,t){var i={range:e};if(Y.number(t)){i.kind=t}return i}e.create=create})(q=t.DocumentHighlight||(t.DocumentHighlight={}));var W;(function(e){e.File=1;e.Module=2;e.Namespace=3;e.Package=4;e.Class=5;e.Method=6;e.Property=7;e.Field=8;e.Constructor=9;e.Enum=10;e.Interface=11;e.Function=12;e.Variable=13;e.Constant=14;e.String=15;e.Number=16;e.Boolean=17;e.Array=18;e.Object=19;e.Key=20;e.Null=21;e.EnumMember=22;e.Struct=23;e.Event=24;e.Operator=25;e.TypeParameter=26})(W=t.SymbolKind||(t.SymbolKind={}));var U;(function(e){e.Deprecated=1})(U=t.SymbolTag||(t.SymbolTag={}));var j;(function(e){function create(e,t,i,n,r){var o={name:e,kind:t,location:{uri:n,range:i}};if(r){o.containerName=r}return o}e.create=create})(j=t.SymbolInformation||(t.SymbolInformation={}));var V;(function(e){function create(e,t,i,n,r,o){var s={name:e,detail:t,kind:i,range:n,selectionRange:r};if(o!==void 0){s.children=o}return s}e.create=create;function is(e){var t=e;return t&&Y.string(t.name)&&Y.number(t.kind)&&i.is(t.range)&&i.is(t.selectionRange)&&(t.detail===void 0||Y.string(t.detail))&&(t.deprecated===void 0||Y.boolean(t.deprecated))&&(t.children===void 0||Array.isArray(t.children))}e.is=is})(V=t.DocumentSymbol||(t.DocumentSymbol={}));var M;(function(e){e.Empty="";e.QuickFix="quickfix";e.Refactor="refactor";e.RefactorExtract="refactor.extract";e.RefactorInline="refactor.inline";e.RefactorRewrite="refactor.rewrite";e.Source="source";e.SourceOrganizeImports="source.organizeImports";e.SourceFixAll="source.fixAll"})(M=t.CodeActionKind||(t.CodeActionKind={}));var $;(function(e){function create(e,t){var i={diagnostics:e};if(t!==void 0&&t!==null){i.only=t}return i}e.create=create;function is(e){var t=e;return Y.defined(t)&&Y.typedArray(t.diagnostics,d.is)&&(t.only===void 0||Y.typedArray(t.only,Y.string))}e.is=is})($=t.CodeActionContext||(t.CodeActionContext={}));var z;(function(e){function create(e,t,i){var n={title:e};if(m.is(t)){n.command=t}else{n.edit=t}if(i!==void 0){n.kind=i}return n}e.create=create;function is(e){var t=e;return t&&Y.string(t.title)&&(t.diagnostics===void 0||Y.typedArray(t.diagnostics,d.is))&&(t.kind===void 0||Y.string(t.kind))&&(t.edit!==void 0||t.command!==void 0)&&(t.command===void 0||m.is(t.command))&&(t.isPreferred===void 0||Y.boolean(t.isPreferred))&&(t.edit===void 0||w.is(t.edit))}e.is=is})(z=t.CodeAction||(t.CodeAction={}));var K;(function(e){function create(e,t){var i={range:e};if(Y.defined(t)){i.data=t}return i}e.create=create;function is(e){var t=e;return Y.defined(t)&&i.is(t.range)&&(Y.undefined(t.command)||m.is(t.command))}e.is=is})(K=t.CodeLens||(t.CodeLens={}));var B;(function(e){function create(e,t){return{tabSize:e,insertSpaces:t}}e.create=create;function is(e){var t=e;return Y.defined(t)&&Y.number(t.tabSize)&&Y.boolean(t.insertSpaces)}e.is=is})(B=t.FormattingOptions||(t.FormattingOptions={}));var G;(function(e){function create(e,t,i){return{range:e,target:t,data:i}}e.create=create;function is(e){var t=e;return Y.defined(t)&&i.is(t.range)&&(Y.undefined(t.target)||Y.string(t.target))}e.is=is})(G=t.DocumentLink||(t.DocumentLink={}));var X;(function(e){function create(e,t){return{range:e,parent:t}}e.create=create;function is(t){var n=t;return n!==undefined&&i.is(n.range)&&(n.parent===undefined||e.is(n.parent))}e.is=is})(X=t.SelectionRange||(t.SelectionRange={}));t.EOL=["\n","\r\n","\r"];var J;(function(e){function create(e,t,i,n){return new Q(e,t,i,n)}e.create=create;function is(e){var t=e;return Y.defined(t)&&Y.string(t.uri)&&(Y.undefined(t.languageId)||Y.string(t.languageId))&&Y.number(t.lineCount)&&Y.func(t.getText)&&Y.func(t.positionAt)&&Y.func(t.offsetAt)?true:false}e.is=is;function applyEdits(e,t){var i=e.getText();var n=mergeSort(t,function(e,t){var i=e.range.start.line-t.range.start.line;if(i===0){return e.range.start.character-t.range.start.character}return i});var r=i.length;for(var o=n.length-1;o>=0;o--){var s=n[o];var a=e.offsetAt(s.range.start);var u=e.offsetAt(s.range.end);if(u<=r){i=i.substring(0,a)+s.newText+i.substring(u,i.length)}else{throw new Error("Overlapping edit")}r=a}return i}e.applyEdits=applyEdits;function mergeSort(e,t){if(e.length<=1){return e}var i=e.length/2|0;var n=e.slice(0,i);var r=e.slice(i);mergeSort(n,t);mergeSort(r,t);var o=0;var s=0;var a=0;while(o<n.length&&s<r.length){var u=t(n[o],r[s]);if(u<=0){e[a++]=n[o++]}else{e[a++]=r[s++]}}while(o<n.length){e[a++]=n[o++]}while(s<r.length){e[a++]=r[s++]}return e}})(J=t.TextDocument||(t.TextDocument={}));var Q=function(){function FullTextDocument(e,t,i,n){this._uri=e;this._languageId=t;this._version=i;this._content=n;this._lineOffsets=undefined}Object.defineProperty(FullTextDocument.prototype,"uri",{get:function(){return this._uri},enumerable:true,configurable:true});Object.defineProperty(FullTextDocument.prototype,"languageId",{get:function(){return this._languageId},enumerable:true,configurable:true});Object.defineProperty(FullTextDocument.prototype,"version",{get:function(){return this._version},enumerable:true,configurable:true});FullTextDocument.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start);var i=this.offsetAt(e.end);return this._content.substring(t,i)}return this._content};FullTextDocument.prototype.update=function(e,t){this._content=e.text;this._version=t;this._lineOffsets=undefined};FullTextDocument.prototype.getLineOffsets=function(){if(this._lineOffsets===undefined){var e=[];var t=this._content;var i=true;for(var n=0;n<t.length;n++){if(i){e.push(n);i=false}var r=t.charAt(n);i=r==="\r"||r==="\n";if(r==="\r"&&n+1<t.length&&t.charAt(n+1)==="\n"){n++}}if(i&&t.length>0){e.push(t.length)}this._lineOffsets=e}return this._lineOffsets};FullTextDocument.prototype.positionAt=function(t){t=Math.max(Math.min(t,this._content.length),0);var i=this.getLineOffsets();var n=0,r=i.length;if(r===0){return e.create(0,t)}while(n<r){var o=Math.floor((n+r)/2);if(i[o]>t){r=o}else{n=o+1}}var s=n-1;return e.create(s,t-i[s])};FullTextDocument.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length){return this._content.length}else if(e.line<0){return 0}var i=t[e.line];var n=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(i+e.character,n),i)};Object.defineProperty(FullTextDocument.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:true,configurable:true});return FullTextDocument}();var Y;(function(e){var t=Object.prototype.toString;function defined(e){return typeof e!=="undefined"}e.defined=defined;function undefined(e){return typeof e==="undefined"}e.undefined=undefined;function boolean(e){return e===true||e===false}e.boolean=boolean;function string(e){return t.call(e)==="[object String]"}e.string=string;function number(e){return t.call(e)==="[object Number]"}e.number=number;function func(e){return t.call(e)==="[object Function]"}e.func=func;function objectLiteral(e){return e!==null&&typeof e==="object"}e.objectLiteral=objectLiteral;function typedArray(e,t){return Array.isArray(e)&&e.every(t)}e.typedArray=typedArray})(Y||(Y={}))})},734:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(993);const r=i(882);var o;(function(e){e.method="textDocument/documentColor";e.type=new r.ProtocolRequestType(e.method);e.resultType=new n.ProgressType})(o=t.DocumentColorRequest||(t.DocumentColorRequest={}));var s;(function(e){e.type=new r.ProtocolRequestType("textDocument/colorPresentation")})(s=t.ColorPresentationRequest||(t.ColorPresentationRequest={}))},747:function(e){e.exports=require("fs")},762:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(993);const r=i(882);let o;var s;(function(e){e.method="textDocument/implementation";e.type=new r.ProtocolRequestType(e.method);e.resultType=new n.ProgressType})(s=t.ImplementationRequest||(t.ImplementationRequest={}))},794:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(480);const r=i(719);const o=i(369);function ensure(e,t){if(e[t]===void 0){e[t]=Object.create(null)}return e[t]}class SelectionRangeFeature extends o.TextDocumentFeature{constructor(e){super(e,r.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"selectionRange");t.dynamicRegistration=true}initialize(e,t){let[i,n]=this.getRegistration(t,e.selectionRangeProvider);if(!i||!n){return}this.register(this.messages,{id:i,registerOptions:n})}registerLanguageProvider(e){const t={provideSelectionRanges:(e,t,i)=>{const n=this._client;const o=(e,t,i)=>{const o={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e),positions:n.code2ProtocolConverter.asPositions(t)};return n.sendRequest(r.SelectionRangeRequest.type,o,i).then(e=>n.protocol2CodeConverter.asSelectionRanges(e),e=>{n.logFailedRequest(r.SelectionRangeRequest.type,e);return Promise.resolve(null)})};const s=n.clientOptions.middleware;return s.provideSelectionRanges?s.provideSelectionRanges(e,t,i,o):o(e,t,i)}};return[n.languages.registerSelectionRangeProvider(e.documentSelector,t),t]}}t.SelectionRangeFeature=SelectionRangeFeature},825:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(882);var r;(function(e){e.method="textDocument/prepareCallHierarchy";e.type=new n.ProtocolRequestType(e.method)})(r=t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={}));var o;(function(e){e.method="callHierarchy/incomingCalls";e.type=new n.ProtocolRequestType(e.method)})(o=t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={}));var s;(function(e){e.method="callHierarchy/outgoingCalls";e.type=new n.ProtocolRequestType(e.method)})(s=t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={}))},831:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(993);const r=i(882);let o;var s;(function(e){e.method="textDocument/declaration";e.type=new r.ProtocolRequestType(e.method);e.resultType=new n.ProgressType})(s=t.DeclarationRequest||(t.DeclarationRequest={}))},839:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(480);const r=i(719);const o=i(369);function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}var s;(function(e){function asCallHierarchyItem(e,t){if(t===null){return undefined}let i=new n.CallHierarchyItem(e.asSymbolKind(t.kind),t.name,t.detail||"",e.asUri(t.uri),e.asRange(t.range),e.asRange(t.selectionRange));if(t.tags!==undefined){i.tags=e.asSymbolTags(t.tags)}return i}e.asCallHierarchyItem=asCallHierarchyItem;function asCallHierarchyItems(e,t){if(t===null){return undefined}let i=t.map(t=>asCallHierarchyItem(e,t));return i[0]}e.asCallHierarchyItems=asCallHierarchyItems;function asCallHierarchyIncomingCall(e,t){return new n.CallHierarchyIncomingCall(asCallHierarchyItem(e,t.from),e.asRanges(t.fromRanges))}e.asCallHierarchyIncomingCall=asCallHierarchyIncomingCall;function asCallHierarchyIncomingCalls(e,t){if(t===null){return undefined}return t.map(t=>asCallHierarchyIncomingCall(e,t))}e.asCallHierarchyIncomingCalls=asCallHierarchyIncomingCalls;function asCallHierarchyOutgoingCall(e,t){return new n.CallHierarchyOutgoingCall(asCallHierarchyItem(e,t.to),e.asRanges(t.fromRanges))}e.asCallHierarchyOutgoingCall=asCallHierarchyOutgoingCall;function asCallHierarchyOutgoingCalls(e,t){if(t===null){return undefined}return t.map(t=>asCallHierarchyOutgoingCall(e,t))}e.asCallHierarchyOutgoingCalls=asCallHierarchyOutgoingCalls})(s||(s={}));var a;(function(e){function asCallHierarchyItem(e,t){const i={name:t.name,kind:e.asSymbolKind(t.kind),uri:e.asUri(t.uri),range:e.asRange(t.range),selectionRange:e.asRange(t.selectionRange)};if(t.detail!==undefined&&t.detail.length>0){i.detail=t.detail}if(t.tags!==undefined){i.tags=e.asSymbolTags(t.tags)}return i}e.asCallHierarchyItem=asCallHierarchyItem})(a||(a={}));class CallHierarchyProvider{constructor(e){this.client=e;this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,t,i){const n=this.client;const o=this.middleware;const a=(e,t,i)=>{const o=n.code2ProtocolConverter.asTextDocumentPositionParams(e,t);return n.sendRequest(r.Proposed.CallHierarchyPrepareRequest.type,o,i).then(e=>{return s.asCallHierarchyItems(this.client.protocol2CodeConverter,e)},e=>{n.logFailedRequest(r.Proposed.CallHierarchyPrepareRequest.type,e);return Promise.resolve(null)})};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,i,a):a(e,t,i)}provideCallHierarchyIncomingCalls(e,t){const i=this.client;const n=this.middleware;const o=(e,t)=>{const n={item:a.asCallHierarchyItem(i.code2ProtocolConverter,e)};return i.sendRequest(r.Proposed.CallHierarchyIncomingCallsRequest.type,n,t).then(e=>{return s.asCallHierarchyIncomingCalls(i.protocol2CodeConverter,e)},e=>{i.logFailedRequest(r.Proposed.CallHierarchyIncomingCallsRequest.type,e);return Promise.resolve(null)})};return n.provideCallHierarchyIncomingCalls?n.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){const i=this.client;const n=this.middleware;const o=(e,t)=>{const n={item:a.asCallHierarchyItem(i.code2ProtocolConverter,e)};return i.sendRequest(r.Proposed.CallHierarchyOutgoingCallsRequest.type,n,t).then(e=>{return s.asCallHierarchyOutgoingCalls(i.protocol2CodeConverter,e)},e=>{i.logFailedRequest(r.Proposed.CallHierarchyOutgoingCallsRequest.type,e);return Promise.resolve(null)})};return n.provideCallHierarchyOutgingCalls?n.provideCallHierarchyOutgingCalls(e,t,o):o(e,t)}}class CallHierarchyFeature extends o.TextDocumentFeature{constructor(e){super(e,r.Proposed.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){const t=e;const i=ensure(ensure(t,"textDocument"),"callHierarchy");i.dynamicRegistration=true}initialize(e,t){const i=e;const[n,r]=this.getRegistration(t,i.callHierarchyProvider);if(!n||!r){return}this.register(this.messages,{id:n,registerOptions:r})}registerLanguageProvider(e){const t=this._client;const i=new CallHierarchyProvider(t);return[n.languages.registerCallHierarchyProvider(e.documentSelector,i),i]}}t.CallHierarchyFeature=CallHierarchyFeature},855:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(454);const r=i(993);const o=i(882);const s=i(762);t.ImplementationRequest=s.ImplementationRequest;const a=i(22);t.TypeDefinitionRequest=a.TypeDefinitionRequest;const u=i(127);t.WorkspaceFoldersRequest=u.WorkspaceFoldersRequest;t.DidChangeWorkspaceFoldersNotification=u.DidChangeWorkspaceFoldersNotification;const l=i(414);t.ConfigurationRequest=l.ConfigurationRequest;const h=i(734);t.DocumentColorRequest=h.DocumentColorRequest;t.ColorPresentationRequest=h.ColorPresentationRequest;const c=i(324);t.FoldingRangeRequest=c.FoldingRangeRequest;const f=i(831);t.DeclarationRequest=f.DeclarationRequest;const d=i(940);t.SelectionRangeRequest=d.SelectionRangeRequest;const m=i(226);t.WorkDoneProgress=m.WorkDoneProgress;t.WorkDoneProgressCreateRequest=m.WorkDoneProgressCreateRequest;t.WorkDoneProgressCancelNotification=m.WorkDoneProgressCancelNotification;let p;var g;(function(e){function is(e){const t=e;return n.string(t.language)||n.string(t.scheme)||n.string(t.pattern)}e.is=is})(g=t.DocumentFilter||(t.DocumentFilter={}));var y;(function(e){function is(e){if(!Array.isArray(e)){return false}for(let t of e){if(!n.string(t)&&!g.is(t)){return false}}return true}e.is=is})(y=t.DocumentSelector||(t.DocumentSelector={}));var C;(function(e){e.type=new o.ProtocolRequestType("client/registerCapability")})(C=t.RegistrationRequest||(t.RegistrationRequest={}));var x;(function(e){e.type=new o.ProtocolRequestType("client/unregisterCapability")})(x=t.UnregistrationRequest||(t.UnregistrationRequest={}));var w;(function(e){e.Create="create";e.Rename="rename";e.Delete="delete"})(w=t.ResourceOperationKind||(t.ResourceOperationKind={}));var S;(function(e){e.Abort="abort";e.Transactional="transactional";e.TextOnlyTransactional="textOnlyTransactional";e.Undo="undo"})(S=t.FailureHandlingKind||(t.FailureHandlingKind={}));var R;(function(e){function hasId(e){const t=e;return t&&n.string(t.id)&&t.id.length>0}e.hasId=hasId})(R=t.StaticRegistrationOptions||(t.StaticRegistrationOptions={}));var D;(function(e){function is(e){const t=e;return t&&(t.documentSelector===null||y.is(t.documentSelector))}e.is=is})(D=t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={}));var b;(function(e){function is(e){const t=e;return n.objectLiteral(t)&&(t.workDoneProgress===undefined||n.boolean(t.workDoneProgress))}e.is=is;function hasWorkDoneProgress(e){const t=e;return t&&n.boolean(t.workDoneProgress)}e.hasWorkDoneProgress=hasWorkDoneProgress})(b=t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={}));var _;(function(e){e.type=new o.ProtocolRequestType("initialize")})(_=t.InitializeRequest||(t.InitializeRequest={}));var T;(function(e){e.unknownProtocolVersion=1})(T=t.InitializeError||(t.InitializeError={}));var E;(function(e){e.type=new o.ProtocolNotificationType("initialized")})(E=t.InitializedNotification||(t.InitializedNotification={}));var v;(function(e){e.type=new o.ProtocolRequestType0("shutdown")})(v=t.ShutdownRequest||(t.ShutdownRequest={}));var k;(function(e){e.type=new o.ProtocolNotificationType0("exit")})(k=t.ExitNotification||(t.ExitNotification={}));var P;(function(e){e.type=new o.ProtocolNotificationType("workspace/didChangeConfiguration")})(P=t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={}));var F;(function(e){e.Error=1;e.Warning=2;e.Info=3;e.Log=4})(F=t.MessageType||(t.MessageType={}));var I;(function(e){e.type=new o.ProtocolNotificationType("window/showMessage")})(I=t.ShowMessageNotification||(t.ShowMessageNotification={}));var L;(function(e){e.type=new o.ProtocolRequestType("window/showMessageRequest")})(L=t.ShowMessageRequest||(t.ShowMessageRequest={}));var A;(function(e){e.type=new o.ProtocolNotificationType("window/logMessage")})(A=t.LogMessageNotification||(t.LogMessageNotification={}));var O;(function(e){e.type=new o.ProtocolNotificationType("telemetry/event")})(O=t.TelemetryEventNotification||(t.TelemetryEventNotification={}));var N;(function(e){e.None=0;e.Full=1;e.Incremental=2})(N=t.TextDocumentSyncKind||(t.TextDocumentSyncKind={}));var H;(function(e){e.method="textDocument/didOpen";e.type=new o.ProtocolNotificationType(e.method)})(H=t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={}));var q;(function(e){e.method="textDocument/didChange";e.type=new o.ProtocolNotificationType(e.method)})(q=t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={}));var W;(function(e){e.method="textDocument/didClose";e.type=new o.ProtocolNotificationType(e.method)})(W=t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={}));var U;(function(e){e.method="textDocument/didSave";e.type=new o.ProtocolNotificationType(e.method)})(U=t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={}));var j;(function(e){e.Manual=1;e.AfterDelay=2;e.FocusOut=3})(j=t.TextDocumentSaveReason||(t.TextDocumentSaveReason={}));var V;(function(e){e.method="textDocument/willSave";e.type=new o.ProtocolNotificationType(e.method)})(V=t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={}));var M;(function(e){e.method="textDocument/willSaveWaitUntil";e.type=new o.ProtocolRequestType(e.method)})(M=t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={}));var $;(function(e){e.type=new o.ProtocolNotificationType("workspace/didChangeWatchedFiles")})($=t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={}));var z;(function(e){e.Created=1;e.Changed=2;e.Deleted=3})(z=t.FileChangeType||(t.FileChangeType={}));var K;(function(e){e.Create=1;e.Change=2;e.Delete=4})(K=t.WatchKind||(t.WatchKind={}));var B;(function(e){e.type=new o.ProtocolNotificationType("textDocument/publishDiagnostics")})(B=t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={}));var G;(function(e){e.Invoked=1;e.TriggerCharacter=2;e.TriggerForIncompleteCompletions=3})(G=t.CompletionTriggerKind||(t.CompletionTriggerKind={}));var X;(function(e){e.method="textDocument/completion";e.type=new o.ProtocolRequestType(e.method);e.resultType=new r.ProgressType})(X=t.CompletionRequest||(t.CompletionRequest={}));var J;(function(e){e.method="completionItem/resolve";e.type=new o.ProtocolRequestType(e.method)})(J=t.CompletionResolveRequest||(t.CompletionResolveRequest={}));var Q;(function(e){e.method="textDocument/hover";e.type=new o.ProtocolRequestType(e.method)})(Q=t.HoverRequest||(t.HoverRequest={}));var Y;(function(e){e.Invoked=1;e.TriggerCharacter=2;e.ContentChange=3})(Y=t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={}));var Z;(function(e){e.method="textDocument/signatureHelp";e.type=new o.ProtocolRequestType(e.method)})(Z=t.SignatureHelpRequest||(t.SignatureHelpRequest={}));var ee;(function(e){e.method="textDocument/definition";e.type=new o.ProtocolRequestType(e.method);e.resultType=new r.ProgressType})(ee=t.DefinitionRequest||(t.DefinitionRequest={}));var te;(function(e){e.method="textDocument/references";e.type=new o.ProtocolRequestType(e.method);e.resultType=new r.ProgressType})(te=t.ReferencesRequest||(t.ReferencesRequest={}));var ie;(function(e){e.method="textDocument/documentHighlight";e.type=new o.ProtocolRequestType(e.method);e.resultType=new r.ProgressType})(ie=t.DocumentHighlightRequest||(t.DocumentHighlightRequest={}));var ne;(function(e){e.method="textDocument/documentSymbol";e.type=new o.ProtocolRequestType(e.method);e.resultType=new r.ProgressType})(ne=t.DocumentSymbolRequest||(t.DocumentSymbolRequest={}));var re;(function(e){e.method="textDocument/codeAction";e.type=new o.ProtocolRequestType(e.method);e.resultType=new r.ProgressType})(re=t.CodeActionRequest||(t.CodeActionRequest={}));var oe;(function(e){e.method="workspace/symbol";e.type=new o.ProtocolRequestType(e.method);e.resultType=new r.ProgressType})(oe=t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={}));var se;(function(e){e.type=new o.ProtocolRequestType("textDocument/codeLens");e.resultType=new r.ProgressType})(se=t.CodeLensRequest||(t.CodeLensRequest={}));var ae;(function(e){e.type=new o.ProtocolRequestType("codeLens/resolve")})(ae=t.CodeLensResolveRequest||(t.CodeLensResolveRequest={}));var ue;(function(e){e.method="textDocument/documentLink";e.type=new o.ProtocolRequestType(e.method);e.resultType=new r.ProgressType})(ue=t.DocumentLinkRequest||(t.DocumentLinkRequest={}));var le;(function(e){e.type=new o.ProtocolRequestType("documentLink/resolve")})(le=t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={}));var he;(function(e){e.method="textDocument/formatting";e.type=new o.ProtocolRequestType(e.method)})(he=t.DocumentFormattingRequest||(t.DocumentFormattingRequest={}));var ce;(function(e){e.method="textDocument/rangeFormatting";e.type=new o.ProtocolRequestType(e.method)})(ce=t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={}));var fe;(function(e){e.method="textDocument/onTypeFormatting";e.type=new o.ProtocolRequestType(e.method)})(fe=t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={}));var de;(function(e){e.method="textDocument/rename";e.type=new o.ProtocolRequestType(e.method)})(de=t.RenameRequest||(t.RenameRequest={}));var me;(function(e){e.method="textDocument/prepareRename";e.type=new o.ProtocolRequestType(e.method)})(me=t.PrepareRenameRequest||(t.PrepareRenameRequest={}));var pe;(function(e){e.type=new o.ProtocolRequestType("workspace/executeCommand")})(pe=t.ExecuteCommandRequest||(t.ExecuteCommandRequest={}));var ge;(function(e){e.type=new o.ProtocolRequestType("workspace/applyEdit")})(ge=t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))},877:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(480);const r=i(719);const o=i(730);const s=i(448);const a=i(545);const u=i(709);function createConverter(e){const t=e=>e.toString();const i=e||t;function asUri(e){return i(e)}function asTextDocumentIdentifier(e){return{uri:i(e.uri)}}function asVersionedTextDocumentIdentifier(e){return{uri:i(e.uri),version:e.version}}function asOpenTextDocumentParams(e){return{textDocument:{uri:i(e.uri),languageId:e.languageId,version:e.version,text:e.getText()}}}function isTextDocumentChangeEvent(e){let t=e;return!!t.document&&!!t.contentChanges}function isTextDocument(e){let t=e;return!!t.uri&&!!t.version}function asChangeTextDocumentParams(e){if(isTextDocument(e)){let t={textDocument:{uri:i(e.uri),version:e.version},contentChanges:[{text:e.getText()}]};return t}else if(isTextDocumentChangeEvent(e)){let t=e.document;let n={textDocument:{uri:i(t.uri),version:t.version},contentChanges:e.contentChanges.map(e=>{let t=e.range;return{range:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character}},rangeLength:e.rangeLength,text:e.text}})};return n}else{throw Error("Unsupported text document change parameter")}}function asCloseTextDocumentParams(e){return{textDocument:asTextDocumentIdentifier(e)}}function asSaveTextDocumentParams(e,t=false){let i={textDocument:asVersionedTextDocumentIdentifier(e)};if(t){i.text=e.getText()}return i}function asTextDocumentSaveReason(e){switch(e){case n.TextDocumentSaveReason.Manual:return r.TextDocumentSaveReason.Manual;case n.TextDocumentSaveReason.AfterDelay:return r.TextDocumentSaveReason.AfterDelay;case n.TextDocumentSaveReason.FocusOut:return r.TextDocumentSaveReason.FocusOut}return r.TextDocumentSaveReason.Manual}function asWillSaveTextDocumentParams(e){return{textDocument:asTextDocumentIdentifier(e.document),reason:asTextDocumentSaveReason(e.reason)}}function asTextDocumentPositionParams(e,t){return{textDocument:asTextDocumentIdentifier(e),position:asWorkerPosition(t)}}function asCompletionTriggerKind(e){switch(e){case n.CompletionTriggerKind.TriggerCharacter:return r.CompletionTriggerKind.TriggerCharacter;case n.CompletionTriggerKind.TriggerForIncompleteCompletions:return r.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return r.CompletionTriggerKind.Invoked}}function asCompletionParams(e,t,i){return{textDocument:asTextDocumentIdentifier(e),position:asWorkerPosition(t),context:{triggerKind:asCompletionTriggerKind(i.triggerKind),triggerCharacter:i.triggerCharacter}}}function asSignatureHelpTriggerKind(e){switch(e){case n.SignatureHelpTriggerKind.Invoke:return r.SignatureHelpTriggerKind.Invoked;case n.SignatureHelpTriggerKind.TriggerCharacter:return r.SignatureHelpTriggerKind.TriggerCharacter;case n.SignatureHelpTriggerKind.ContentChange:return r.SignatureHelpTriggerKind.ContentChange}}function asParameterInformation(e){return{label:e.label}}function asParameterInformations(e){return e.map(asParameterInformation)}function asSignatureInformation(e){return{label:e.label,parameters:asParameterInformations(e.parameters)}}function asSignatureInformations(e){return e.map(asSignatureInformation)}function asSignatureHelp(e){if(e===undefined){return e}return{signatures:asSignatureInformations(e.signatures),activeSignature:e.activeSignature,activeParameter:e.activeParameter}}function asSignatureHelpParams(e,t,i){return{textDocument:asTextDocumentIdentifier(e),position:asWorkerPosition(t),context:{isRetrigger:i.isRetrigger,triggerCharacter:i.triggerCharacter,triggerKind:asSignatureHelpTriggerKind(i.triggerKind),activeSignatureHelp:asSignatureHelp(i.activeSignatureHelp)}}}function asWorkerPosition(e){return{line:e.line,character:e.character}}function asPosition(e){if(e===undefined||e===null){return e}return{line:e.line,character:e.character}}function asPositions(e){let t=[];for(let i of e){t.push(asPosition(i))}return t}function isInsertReplace(e){const t=e;return t&&!!t.inserting&&!!t.replacing}function asRange(e){if(e===undefined||e===null){return e}if(isInsertReplace(e)){throw new Error(`Receving unknown insert replace range.`)}return{start:asPosition(e.start),end:asPosition(e.end)}}function asLocation(e){if(e===undefined||e===null){return e}return r.Location.create(asUri(e.uri),asRange(e.range))}function asDiagnosticSeverity(e){switch(e){case n.DiagnosticSeverity.Error:return r.DiagnosticSeverity.Error;case n.DiagnosticSeverity.Warning:return r.DiagnosticSeverity.Warning;case n.DiagnosticSeverity.Information:return r.DiagnosticSeverity.Information;case n.DiagnosticSeverity.Hint:return r.DiagnosticSeverity.Hint}}function asDiagnosticTags(e){if(!e){return undefined}let t=[];for(let i of e){let e=asDiagnosticTag(i);if(e!==undefined){t.push(e)}}return t.length>0?t:undefined}function asDiagnosticTag(e){switch(e){case n.DiagnosticTag.Unnecessary:return r.DiagnosticTag.Unnecessary;case n.DiagnosticTag.Deprecated:return r.DiagnosticTag.Deprecated;default:return undefined}}function asRelatedInformation(e){return{message:e.message,location:asLocation(e.location)}}function asRelatedInformations(e){return e.map(asRelatedInformation)}function asDiagnostic(e){let t=r.Diagnostic.create(asRange(e.range),e.message);if(o.number(e.severity)){t.severity=asDiagnosticSeverity(e.severity)}if(o.number(e.code)||o.string(e.code)){t.code=e.code}if(Array.isArray(e.tags)){t.tags=asDiagnosticTags(e.tags)}if(e.relatedInformation){t.relatedInformation=asRelatedInformations(e.relatedInformation)}if(e.source){t.source=e.source}return t}function asDiagnostics(e){if(e===undefined||e===null){return e}return e.map(asDiagnostic)}function asDocumentation(e,t){switch(e){case"$string":return t;case r.MarkupKind.PlainText:return{kind:e,value:t};case r.MarkupKind.Markdown:return{kind:e,value:t.value};default:return`Unsupported Markup content received. Kind is: ${e}`}}function asCompletionItemTag(e){switch(e){case n.CompletionItemTag.Deprecated:return r.CompletionItemTag.Deprecated}return undefined}function asCompletionItemTags(e){if(e===undefined){return e}const t=[];for(let i of e){const e=asCompletionItemTag(i);if(e!==undefined){t.push(e)}}return t}function asCompletionItemKind(e,t){if(t!==undefined){return t}return e+1}function asCompletionItem(e){let t={label:e.label};let i=e instanceof s.default?e:undefined;if(e.detail){t.detail=e.detail}if(e.documentation){if(!i||i.documentationFormat==="$string"){t.documentation=e.documentation}else{t.documentation=asDocumentation(i.documentationFormat,e.documentation)}}if(e.filterText){t.filterText=e.filterText}fillPrimaryInsertText(t,e);if(o.number(e.kind)){t.kind=asCompletionItemKind(e.kind,i&&i.originalItemKind)}if(e.sortText){t.sortText=e.sortText}if(e.additionalTextEdits){t.additionalTextEdits=asTextEdits(e.additionalTextEdits)}if(e.commitCharacters){t.commitCharacters=e.commitCharacters.slice()}if(e.command){t.command=asCommand(e.command)}if(e.preselect===true||e.preselect===false){t.preselect=e.preselect}const r=asCompletionItemTags(e.tags);if(i){if(i.data!==undefined){t.data=i.data}if(i.deprecated===true||i.deprecated===false){if(i.deprecated===true&&r!==undefined&&r.length>0){const e=r.indexOf(n.CompletionItemTag.Deprecated);if(e!==-1){r.splice(e,1)}}t.deprecated=i.deprecated}}if(r!==undefined&&r.length>0){t.tags=r}return t}function fillPrimaryInsertText(e,t){let i=r.InsertTextFormat.PlainText;let o=undefined;let s=undefined;if(t.textEdit){o=t.textEdit.newText;s=asRange(t.textEdit.range)}else if(t.insertText instanceof n.SnippetString){i=r.InsertTextFormat.Snippet;o=t.insertText.value}else{o=t.insertText}if(t.range){s=asRange(t.range)}e.insertTextFormat=i;if(t.fromEdit&&o!==undefined&&s!==undefined){e.textEdit={newText:o,range:s}}else{e.insertText=o}}function asTextEdit(e){return{range:asRange(e.range),newText:e.newText}}function asTextEdits(e){if(e===undefined||e===null){return e}return e.map(asTextEdit)}function asSymbolKind(e){if(e<=n.SymbolKind.TypeParameter){return e+1}return r.SymbolKind.Property}function asSymbolTag(e){return e}function asSymbolTags(e){return e.map(asSymbolTag)}function asReferenceParams(e,t,i){return{textDocument:asTextDocumentIdentifier(e),position:asWorkerPosition(t),context:{includeDeclaration:i.includeDeclaration}}}function asCodeActionContext(e){if(e===undefined||e===null){return e}let t;if(e.only&&o.string(e.only.value)){t=[e.only.value]}return r.CodeActionContext.create(asDiagnostics(e.diagnostics),t)}function asCommand(e){let t=r.Command.create(e.title,e.command);if(e.arguments){t.arguments=e.arguments}return t}function asCodeLens(e){let t=r.CodeLens.create(asRange(e.range));if(e.command){t.command=asCommand(e.command)}if(e instanceof a.default){if(e.data){t.data=e.data}}return t}function asFormattingOptions(e){return{tabSize:e.tabSize,insertSpaces:e.insertSpaces}}function asDocumentSymbolParams(e){return{textDocument:asTextDocumentIdentifier(e)}}function asCodeLensParams(e){return{textDocument:asTextDocumentIdentifier(e)}}function asDocumentLink(e){let t=r.DocumentLink.create(asRange(e.range));if(e.target){t.target=asUri(e.target)}if(e.tooltip!==undefined){t.tooltip=e.tooltip}let i=e instanceof u.default?e:undefined;if(i&&i.data){t.data=i.data}return t}function asDocumentLinkParams(e){return{textDocument:asTextDocumentIdentifier(e)}}return{asUri:asUri,asTextDocumentIdentifier:asTextDocumentIdentifier,asVersionedTextDocumentIdentifier:asVersionedTextDocumentIdentifier,asOpenTextDocumentParams:asOpenTextDocumentParams,asChangeTextDocumentParams:asChangeTextDocumentParams,asCloseTextDocumentParams:asCloseTextDocumentParams,asSaveTextDocumentParams:asSaveTextDocumentParams,asWillSaveTextDocumentParams:asWillSaveTextDocumentParams,asTextDocumentPositionParams:asTextDocumentPositionParams,asCompletionParams:asCompletionParams,asSignatureHelpParams:asSignatureHelpParams,asWorkerPosition:asWorkerPosition,asRange:asRange,asPosition:asPosition,asPositions:asPositions,asLocation:asLocation,asDiagnosticSeverity:asDiagnosticSeverity,asDiagnosticTag:asDiagnosticTag,asDiagnostic:asDiagnostic,asDiagnostics:asDiagnostics,asCompletionItem:asCompletionItem,asTextEdit:asTextEdit,asSymbolKind:asSymbolKind,asSymbolTag:asSymbolTag,asSymbolTags:asSymbolTags,asReferenceParams:asReferenceParams,asCodeActionContext:asCodeActionContext,asCommand:asCommand,asCodeLens:asCodeLens,asFormattingOptions:asFormattingOptions,asDocumentSymbolParams:asDocumentSymbolParams,asCodeLensParams:asCodeLensParams,asDocumentLink:asDocumentLink,asDocumentLinkParams:asDocumentLinkParams}}t.createConverter=createConverter},882:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(993);class ProtocolRequestType0 extends n.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=ProtocolRequestType0;class ProtocolRequestType extends n.RequestType{constructor(e){super(e)}}t.ProtocolRequestType=ProtocolRequestType;class ProtocolNotificationType extends n.NotificationType{constructor(e){super(e)}}t.ProtocolNotificationType=ProtocolNotificationType;class ProtocolNotificationType0 extends n.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=ProtocolNotificationType0},940:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(993);const r=i(882);var o;(function(e){e.method="textDocument/selectionRange";e.type=new r.ProtocolRequestType(e.method);e.resultType=new n.ProgressType})(o=t.SelectionRangeRequest||(t.SelectionRangeRequest={}))},960:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(719);const r=i(581);function ensure(e,t){if(e[t]===void 0){e[t]=Object.create(null)}return e[t]}class ProgressFeature{constructor(e){this._client=e}fillClientCapabilities(e){ensure(e,"window").workDoneProgress=true}initialize(){let e=this._client;let t=e=>{new r.ProgressPart(this._client,e.token)};e.onRequest(n.WorkDoneProgressCreateRequest.type,t)}}t.ProgressFeature=ProgressFeature},988:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});const n=i(480);const r=i(719);const o=i(369);function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}class ColorProviderFeature extends o.TextDocumentFeature{constructor(e){super(e,r.DocumentColorRequest.type)}fillClientCapabilities(e){ensure(ensure(e,"textDocument"),"colorProvider").dynamicRegistration=true}initialize(e,t){let[i,n]=this.getRegistration(t,e.colorProvider);if(!i||!n){return}this.register(this.messages,{id:i,registerOptions:n})}registerLanguageProvider(e){const t={provideColorPresentations:(e,t,i)=>{const n=this._client;const o=(e,t,i)=>{const o={color:e,textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(t.document),range:n.code2ProtocolConverter.asRange(t.range)};return n.sendRequest(r.ColorPresentationRequest.type,o,i).then(this.asColorPresentations.bind(this),e=>{n.logFailedRequest(r.ColorPresentationRequest.type,e);return Promise.resolve(null)})};const s=n.clientOptions.middleware;return s.provideColorPresentations?s.provideColorPresentations(e,t,i,o):o(e,t,i)},provideDocumentColors:(e,t)=>{const i=this._client;const n=(e,t)=>{const n={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e)};return i.sendRequest(r.DocumentColorRequest.type,n,t).then(this.asColorInformations.bind(this),e=>{i.logFailedRequest(r.ColorPresentationRequest.type,e);return Promise.resolve(null)})};const o=i.clientOptions.middleware;return o.provideDocumentColors?o.provideDocumentColors(e,t,n):n(e,t)}};return[n.languages.registerColorProvider(e.documentSelector,t),t]}asColor(e){return new n.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){if(Array.isArray(e)){return e.map(e=>{return new n.ColorInformation(this._client.protocol2CodeConverter.asRange(e.range),this.asColor(e.color))})}return[]}asColorPresentations(e){if(Array.isArray(e)){return e.map(e=>{let t=new n.ColorPresentation(e.label);t.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(e.additionalTextEdits);t.textEdit=this._client.protocol2CodeConverter.asTextEdit(e.textEdit);return t})}return[]}}t.ColorProviderFeature=ColorProviderFeature},993:function(e,t,i){"use strict";function __export(e){for(var i in e)if(!t.hasOwnProperty(i))t[i]=e[i]}Object.defineProperty(t,"__esModule",{value:true});const n=i(630);const r=i(251);t.RequestType=r.RequestType;t.RequestType0=r.RequestType0;t.RequestType1=r.RequestType1;t.RequestType2=r.RequestType2;t.RequestType3=r.RequestType3;t.RequestType4=r.RequestType4;t.RequestType5=r.RequestType5;t.RequestType6=r.RequestType6;t.RequestType7=r.RequestType7;t.RequestType8=r.RequestType8;t.RequestType9=r.RequestType9;t.ResponseError=r.ResponseError;t.ErrorCodes=r.ErrorCodes;t.NotificationType=r.NotificationType;t.NotificationType0=r.NotificationType0;t.NotificationType1=r.NotificationType1;t.NotificationType2=r.NotificationType2;t.NotificationType3=r.NotificationType3;t.NotificationType4=r.NotificationType4;t.NotificationType5=r.NotificationType5;t.NotificationType6=r.NotificationType6;t.NotificationType7=r.NotificationType7;t.NotificationType8=r.NotificationType8;t.NotificationType9=r.NotificationType9;const o=i(18);t.MessageReader=o.MessageReader;t.StreamMessageReader=o.StreamMessageReader;t.IPCMessageReader=o.IPCMessageReader;t.SocketMessageReader=o.SocketMessageReader;const s=i(142);t.MessageWriter=s.MessageWriter;t.StreamMessageWriter=s.StreamMessageWriter;t.IPCMessageWriter=s.IPCMessageWriter;t.SocketMessageWriter=s.SocketMessageWriter;const a=i(364);t.Disposable=a.Disposable;t.Event=a.Event;t.Emitter=a.Emitter;const u=i(119);t.CancellationTokenSource=u.CancellationTokenSource;t.CancellationToken=u.CancellationToken;const l=i(269);__export(i(215));__export(i(530));var h;(function(e){e.type=new r.NotificationType("$/cancelRequest")})(h||(h={}));var c;(function(e){e.type=new r.NotificationType("$/progress")})(c||(c={}));class ProgressType{constructor(){}}t.ProgressType=ProgressType;t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var f;(function(e){e[e["Off"]=0]="Off";e[e["Messages"]=1]="Messages";e[e["Verbose"]=2]="Verbose"})(f=t.Trace||(t.Trace={}));(function(e){function fromString(t){if(!n.string(t)){return e.Off}t=t.toLowerCase();switch(t){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=fromString;function toString(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}e.toString=toString})(f=t.Trace||(t.Trace={}));var d;(function(e){e["Text"]="text";e["JSON"]="json"})(d=t.TraceFormat||(t.TraceFormat={}));(function(e){function fromString(t){t=t.toLowerCase();if(t==="json"){return e.JSON}else{return e.Text}}e.fromString=fromString})(d=t.TraceFormat||(t.TraceFormat={}));var m;(function(e){e.type=new r.NotificationType("$/setTraceNotification")})(m=t.SetTraceNotification||(t.SetTraceNotification={}));var p;(function(e){e.type=new r.NotificationType("$/logTraceNotification")})(p=t.LogTraceNotification||(t.LogTraceNotification={}));var g;(function(e){e[e["Closed"]=1]="Closed";e[e["Disposed"]=2]="Disposed";e[e["AlreadyListening"]=3]="AlreadyListening"})(g=t.ConnectionErrors||(t.ConnectionErrors={}));class ConnectionError extends Error{constructor(e,t){super(t);this.code=e;Object.setPrototypeOf(this,ConnectionError.prototype)}}t.ConnectionError=ConnectionError;var y;(function(e){function is(e){let t=e;return t&&n.func(t.cancelUndispatched)}e.is=is})(y=t.ConnectionStrategy||(t.ConnectionStrategy={}));var C;(function(e){e[e["New"]=1]="New";e[e["Listening"]=2]="Listening";e[e["Closed"]=3]="Closed";e[e["Disposed"]=4]="Disposed"})(C||(C={}));function _createMessageConnection(e,t,i,o){let s=0;let y=0;let x=0;const w="2.0";let S=undefined;let R=Object.create(null);let D=undefined;let b=Object.create(null);let _=new Map;let T;let E=new l.LinkedMap;let v=Object.create(null);let k=Object.create(null);let P=f.Off;let F=d.Text;let I;let L=C.New;let A=new a.Emitter;let O=new a.Emitter;let N=new a.Emitter;let H=new a.Emitter;let q=new a.Emitter;function createRequestQueueKey(e){return"req-"+e.toString()}function createResponseQueueKey(e){if(e===null){return"res-unknown-"+(++x).toString()}else{return"res-"+e.toString()}}function createNotificationQueueKey(){return"not-"+(++y).toString()}function addMessageToQueue(e,t){if(r.isRequestMessage(t)){e.set(createRequestQueueKey(t.id),t)}else if(r.isResponseMessage(t)){e.set(createResponseQueueKey(t.id),t)}else{e.set(createNotificationQueueKey(),t)}}function cancelUndispatched(e){return undefined}function isListening(){return L===C.Listening}function isClosed(){return L===C.Closed}function isDisposed(){return L===C.Disposed}function closeHandler(){if(L===C.New||L===C.Listening){L=C.Closed;O.fire(undefined)}}function readErrorHandler(e){A.fire([e,undefined,undefined])}function writeErrorHandler(e){A.fire(e)}e.onClose(closeHandler);e.onError(readErrorHandler);t.onClose(closeHandler);t.onError(writeErrorHandler);function triggerMessageQueue(){if(T||E.size===0){return}T=setImmediate(()=>{T=undefined;processMessageQueue()})}function processMessageQueue(){if(E.size===0){return}let e=E.shift();try{if(r.isRequestMessage(e)){handleRequest(e)}else if(r.isNotificationMessage(e)){handleNotification(e)}else if(r.isResponseMessage(e)){handleResponse(e)}else{handleInvalidMessage(e)}}finally{triggerMessageQueue()}}let W=e=>{try{if(r.isNotificationMessage(e)&&e.method===h.type.method){let i=createRequestQueueKey(e.params.id);let n=E.get(i);if(r.isRequestMessage(n)){let r=o&&o.cancelUndispatched?o.cancelUndispatched(n,cancelUndispatched):cancelUndispatched(n);if(r&&(r.error!==void 0||r.result!==void 0)){E.delete(i);r.id=n.id;traceSendingResponse(r,e.method,Date.now());t.write(r);return}}}addMessageToQueue(E,e)}finally{triggerMessageQueue()}};function handleRequest(e){if(isDisposed()){return}function reply(i,n,o){let s={jsonrpc:w,id:e.id};if(i instanceof r.ResponseError){s.error=i.toJson()}else{s.result=i===void 0?null:i}traceSendingResponse(s,n,o);t.write(s)}function replyError(i,n,r){let o={jsonrpc:w,id:e.id,error:i.toJson()};traceSendingResponse(o,n,r);t.write(o)}function replySuccess(i,n,r){if(i===void 0){i=null}let o={jsonrpc:w,id:e.id,result:i};traceSendingResponse(o,n,r);t.write(o)}traceReceivedRequest(e);let i=R[e.method];let o;let s;if(i){o=i.type;s=i.handler}let a=Date.now();if(s||S){let t=new u.CancellationTokenSource;let i=String(e.id);k[i]=t;try{let u;if(e.params===void 0||o!==void 0&&o.numberOfParams===0){u=s?s(t.token):S(e.method,t.token)}else if(n.array(e.params)&&(o===void 0||o.numberOfParams>1)){u=s?s(...e.params,t.token):S(e.method,...e.params,t.token)}else{u=s?s(e.params,t.token):S(e.method,e.params,t.token)}let l=u;if(!u){delete k[i];replySuccess(u,e.method,a)}else if(l.then){l.then(t=>{delete k[i];reply(t,e.method,a)},t=>{delete k[i];if(t instanceof r.ResponseError){replyError(t,e.method,a)}else if(t&&n.string(t.message)){replyError(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,a)}else{replyError(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,a)}})}else{delete k[i];reply(u,e.method,a)}}catch(t){delete k[i];if(t instanceof r.ResponseError){reply(t,e.method,a)}else if(t&&n.string(t.message)){replyError(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,a)}else{replyError(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,a)}}}else{replyError(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,a)}}function handleResponse(e){if(isDisposed()){return}if(e.id===null){if(e.error){i.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,undefined,4)}`)}else{i.error(`Received response message without id. No further error information provided.`)}}else{let t=String(e.id);let n=v[t];traceReceivedResponse(e,n);if(n){delete v[t];try{if(e.error){let t=e.error;n.reject(new r.ResponseError(t.code,t.message,t.data))}else if(e.result!==void 0){n.resolve(e.result)}else{throw new Error("Should never happen.")}}catch(e){if(e.message){i.error(`Response handler '${n.method}' failed with message: ${e.message}`)}else{i.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}}function handleNotification(e){if(isDisposed()){return}let t=undefined;let r;if(e.method===h.type.method){r=(e=>{let t=e.id;let i=k[String(t)];if(i){i.cancel()}})}else{let i=b[e.method];if(i){r=i.handler;t=i.type}}if(r||D){try{traceReceivedNotification(e);if(e.params===void 0||t!==void 0&&t.numberOfParams===0){r?r():D(e.method)}else if(n.array(e.params)&&(t===void 0||t.numberOfParams>1)){r?r(...e.params):D(e.method,...e.params)}else{r?r(e.params):D(e.method,e.params)}}catch(t){if(t.message){i.error(`Notification handler '${e.method}' failed with message: ${t.message}`)}else{i.error(`Notification handler '${e.method}' failed unexpectedly.`)}}}else{N.fire(e)}}function handleInvalidMessage(e){if(!e){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(n.string(t.id)||n.number(t.id)){let e=String(t.id);let i=v[e];if(i){i.reject(new Error("The received response has neither a result nor an error property."))}}}function traceSendingRequest(e){if(P===f.Off||!I){return}if(F===d.Text){let t=undefined;if(P===f.Verbose&&e.params){t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`}I.log(`Sending request '${e.method} - (${e.id})'.`,t)}else{logLSPMessage("send-request",e)}}function traceSendingNotification(e){if(P===f.Off||!I){return}if(F===d.Text){let t=undefined;if(P===f.Verbose){if(e.params){t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`}else{t="No parameters provided.\n\n"}}I.log(`Sending notification '${e.method}'.`,t)}else{logLSPMessage("send-notification",e)}}function traceSendingResponse(e,t,i){if(P===f.Off||!I){return}if(F===d.Text){let n=undefined;if(P===f.Verbose){if(e.error&&e.error.data){n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`}else{if(e.result){n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`}else if(e.error===void 0){n="No result returned.\n\n"}}}I.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-i}ms`,n)}else{logLSPMessage("send-response",e)}}function traceReceivedRequest(e){if(P===f.Off||!I){return}if(F===d.Text){let t=undefined;if(P===f.Verbose&&e.params){t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`}I.log(`Received request '${e.method} - (${e.id})'.`,t)}else{logLSPMessage("receive-request",e)}}function traceReceivedNotification(e){if(P===f.Off||!I||e.method===p.type.method){return}if(F===d.Text){let t=undefined;if(P===f.Verbose){if(e.params){t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`}else{t="No parameters provided.\n\n"}}I.log(`Received notification '${e.method}'.`,t)}else{logLSPMessage("receive-notification",e)}}function traceReceivedResponse(e,t){if(P===f.Off||!I){return}if(F===d.Text){let i=undefined;if(P===f.Verbose){if(e.error&&e.error.data){i=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`}else{if(e.result){i=`Result: ${JSON.stringify(e.result,null,4)}\n\n`}else if(e.error===void 0){i="No result returned.\n\n"}}}if(t){let n=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";I.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${n}`,i)}else{I.log(`Received response ${e.id} without active response promise.`,i)}}else{logLSPMessage("receive-response",e)}}function logLSPMessage(e,t){if(!I||P===f.Off){return}const i={isLSPMessage:true,type:e,message:t,timestamp:Date.now()};I.log(i)}function throwIfClosedOrDisposed(){if(isClosed()){throw new ConnectionError(g.Closed,"Connection is closed.")}if(isDisposed()){throw new ConnectionError(g.Disposed,"Connection is disposed.")}}function throwIfListening(){if(isListening()){throw new ConnectionError(g.AlreadyListening,"Connection is already listening")}}function throwIfNotListening(){if(!isListening()){throw new Error("Call listen() first.")}}function undefinedToNull(e){if(e===void 0){return null}else{return e}}function computeMessageParams(e,t){let i;let n=e.numberOfParams;switch(n){case 0:i=null;break;case 1:i=undefinedToNull(t[0]);break;default:i=[];for(let e=0;e<t.length&&e<n;e++){i.push(undefinedToNull(t[e]))}if(t.length<n){for(let e=t.length;e<n;e++){i.push(null)}}break}return i}let U={sendNotification:(e,...i)=>{throwIfClosedOrDisposed();let r;let o;if(n.string(e)){r=e;switch(i.length){case 0:o=null;break;case 1:o=i[0];break;default:o=i;break}}else{r=e.method;o=computeMessageParams(e,i)}let s={jsonrpc:w,method:r,params:o};traceSendingNotification(s);t.write(s)},onNotification:(e,t)=>{throwIfClosedOrDisposed();if(n.func(e)){D=e}else if(t){if(n.string(e)){b[e]={type:undefined,handler:t}}else{b[e.method]={type:e,handler:t}}}},onProgress:(e,t,i)=>{if(_.has(t)){throw new Error(`Progress handler for token ${t} already registered`)}_.set(t,i);return{dispose:()=>{_.delete(t)}}},sendProgress:(e,t,i)=>{U.sendNotification(c.type,{token:t,value:i})},onUnhandledProgress:H.event,sendRequest:(e,...i)=>{throwIfClosedOrDisposed();throwIfNotListening();let o;let a;let l=undefined;if(n.string(e)){o=e;switch(i.length){case 0:a=null;break;case 1:if(u.CancellationToken.is(i[0])){a=null;l=i[0]}else{a=undefinedToNull(i[0])}break;default:const e=i.length-1;if(u.CancellationToken.is(i[e])){l=i[e];if(i.length===2){a=undefinedToNull(i[0])}else{a=i.slice(0,e).map(e=>undefinedToNull(e))}}else{a=i.map(e=>undefinedToNull(e))}break}}else{o=e.method;a=computeMessageParams(e,i);let t=e.numberOfParams;l=u.CancellationToken.is(i[t])?i[t]:undefined}let c=s++;let f=new Promise((e,i)=>{let n={jsonrpc:w,id:c,method:o,params:a};let s={method:o,timerStart:Date.now(),resolve:e,reject:i};traceSendingRequest(n);try{t.write(n)}catch(e){s.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason"));s=null}if(s){v[String(c)]=s}});if(l){l.onCancellationRequested(()=>{U.sendNotification(h.type,{id:c})})}return f},onRequest:(e,t)=>{throwIfClosedOrDisposed();if(n.func(e)){S=e}else if(t){if(n.string(e)){R[e]={type:undefined,handler:t}}else{R[e.method]={type:e,handler:t}}}},trace:(e,t,i)=>{let r=false;let o=d.Text;if(i!==void 0){if(n.boolean(i)){r=i}else{r=i.sendNotification||false;o=i.traceFormat||d.Text}}P=e;F=o;if(P===f.Off){I=undefined}else{I=t}if(r&&!isClosed()&&!isDisposed()){U.sendNotification(m.type,{value:f.toString(e)})}},onError:A.event,onClose:O.event,onUnhandledNotification:N.event,onDispose:q.event,dispose:()=>{if(isDisposed()){return}L=C.Disposed;q.fire(undefined);let i=new Error("Connection got disposed.");Object.keys(v).forEach(e=>{v[e].reject(i)});v=Object.create(null);k=Object.create(null);E=new l.LinkedMap;if(n.func(t.dispose)){t.dispose()}if(n.func(e.dispose)){e.dispose()}},listen:()=>{throwIfClosedOrDisposed();throwIfListening();L=C.Listening;e.listen(W)},inspect:()=>{console.log("inspect")}};U.onNotification(p.type,e=>{if(P===f.Off||!I){return}I.log(e.message,P===f.Verbose?e.verbose:undefined)});U.onNotification(c.type,e=>{const t=_.get(e.token);if(t){t(e.value)}else{H.fire(e)}});return U}function isMessageReader(e){return e.listen!==void 0&&e.read===void 0}function isMessageWriter(e){return e.write!==void 0&&e.end===void 0}function createMessageConnection(e,i,n,r){if(!n){n=t.NullLogger}let a=isMessageReader(e)?e:new o.StreamMessageReader(e);let u=isMessageWriter(i)?i:new s.StreamMessageWriter(i);return _createMessageConnection(a,u,n,r)}t.createMessageConnection=createMessageConnection}});